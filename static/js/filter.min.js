(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{213:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return formatTextEndingByNumber});var formatTextEndingByNumber=function(number,root,endings){return(number=Math.abs(number)%100)>4&&number<21||(number%=10)>4||0===number?root+endings[0]:number>1?root+endings[1]:root+endings[2]}},217:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return SearchCounter}),__webpack_require__(3),__webpack_require__(4),__webpack_require__(6),__webpack_require__(24),__webpack_require__(8),__webpack_require__(78),__webpack_require__(1),__webpack_require__(13),__webpack_require__(49),__webpack_require__(0),__webpack_require__(7),__webpack_require__(98),__webpack_require__(2),__webpack_require__(33),__webpack_require__(9),__webpack_require__(5);var axios__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(20),axios__WEBPACK_IMPORTED_MODULE_16___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_16__),_helpers_formatTextEndings__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(213),_content_search_content_search_helpers__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(50);function _toConsumableArray(arr){return function(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}}(arr)||function(iter){if(Symbol.iterator in Object(iter)||"[object Arguments]"===Object.prototype.toString.call(iter))return Array.from(iter)}(arr)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var SearchCounter=function(){function SearchCounter(element){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{useCache:!1,customSerialize:null,excludeInputs:[],nextUrl:""};!function(instance,Constructor){if(!(instance instanceof SearchCounter))throw new TypeError("Cannot call a class as a function")}(this),this.element=element,this.form=element.querySelector("form"),this.url=this.form.getAttribute("action"),this.buttons=_toConsumableArray(element.querySelectorAll(".main-filter-n-2__search-page-button .button-n-2, .map-filter-n-2__search-page-button .button-n-2, .main-filter-n-2__search-button, .main-filter-n-2__search-button-small")),this.buttonTexts={current:"Найти",default:"Найти"},this.useCache=options.useCache,this.customSerialize="function"==typeof options.customSerialize?options.customSerialize:null,this.cache=null,this.excludeInputs=options.excludeInputs||[],this.nextUrl=options.nextUrl||"",this.requestSource=axios__WEBPACK_IMPORTED_MODULE_16___default.a.CancelToken.source(),this.bindHandlers()}var Constructor,protoProps;return Constructor=SearchCounter,(protoProps=[{key:"setButtonContent",value:function(content,loadingState){var _this=this;this.buttonTexts.current=content||this.buttonTexts.default,this.buttons.map(function(button){if("INPUT"===button.nodeName)button.value=_this.buttonTexts.current;else{if(loadingState){button.classList.add("hidden-text");var spinner=document.createElement("span");return spinner.classList.add("spinner"),spinner.classList.add("spinner_ignore-content"),button.innerHTML="",void button.appendChild(spinner)}button.innerText=_this.buttonTexts.current,button.classList.remove("hidden-text")}})}},{key:"reset",value:function(){this.cache=null,this.setButtonContent(""),this.buttons.forEach(function(button){button.disabled=!1})}},{key:"bindHandlers",value:function(){var _this2=this;this.form&&_toConsumableArray(this.form.querySelectorAll("input, select")).forEach(function(input){_this2.excludeInputs.includes(input.name)||input.addEventListener("change",function(){_this2.defferedRequest()})})}},{key:"defferedRequest",value:function(){var _this3=this;this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){return _this3.request()},300)}},{key:"request",value:function(){var _this4=this,url=this.url,serializationObject=this.customSerialize?this.customSerialize():this.serialize();this.cache=null,this.setButtonContent(null,!0),this.query=axios__WEBPACK_IMPORTED_MODULE_16___default.a.get(url,{params:serializationObject.dataObject,cancelToken:this.requestSource.token}).then(function(response){var data=response.data,nextUrl=_this4.nextUrl||""===_this4.nextUrl?_this4.nextUrl:"";history.pushState(serializationObject.dataObject,"Search-request","".concat(nextUrl,"?").concat(serializationObject.requestData)),_this4.useCache&&(_this4.cache={serializationObject:serializationObject,data:data});var count=data.items_total,nextFormattedText=Object(_helpers_formatTextEndings__WEBPACK_IMPORTED_MODULE_17__.a)(count,"объект",["ов","а",""]);count>0?(_this4.setButtonContent(count>0?"Показать ".concat(count," ").concat(nextFormattedText):""),_this4.buttons.forEach(function(button){button.disabled=!1})):(_this4.setButtonContent("Нет объектов"),_this4.buttons.forEach(function(button){button.disabled=!0}))}).catch(function(){_this4.setButtonContent(_this4.buttonTexts.default)})}},{key:"serialize",value:function(){var data=Object(_content_search_content_search_helpers__WEBPACK_IMPORTED_MODULE_18__.c)(this.form,{hash:!0}),priceFrom=data["f[price][from]"],priceTo=data["f[price][to]"];priceFrom&&(data["f[price][from]"]=priceFrom.replace(/\s/g,"")),priceTo&&(data["f[price][to]"]=priceTo.replace(/\s/g,"")),delete data["f[geo][]"];var stringifiedData=Object(_content_search_content_search_helpers__WEBPACK_IMPORTED_MODULE_18__.b)(data),advancedGeoParams=_toConsumableArray(this.form.querySelectorAll(".advanced-parametrs-n-2__location-tabs .checkbox-container-n-2__input:checked"));return advancedGeoParams.length?advancedGeoParams.forEach(function(param){var geoValue=param.getAttribute("data-value");stringifiedData+="&f[geo][]=".concat(geoValue)}):_toConsumableArray(this.form.querySelectorAll(".location-city-tab-n-2__input:checked")).forEach(function(tab){var geoValue=tab.getAttribute("data-value");stringifiedData+="&f[geo][]=".concat(geoValue)}),{dataObject:data,requestData:stringifiedData,location:location}}}])&&_defineProperties(Constructor.prototype,protoProps),SearchCounter}()},225:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"default",function(){return Filter}),__webpack_require__(3),__webpack_require__(4),__webpack_require__(6),__webpack_require__(24),__webpack_require__(95),__webpack_require__(8),__webpack_require__(78),__webpack_require__(1),__webpack_require__(79),__webpack_require__(13),__webpack_require__(102),__webpack_require__(157),__webpack_require__(96),__webpack_require__(97),__webpack_require__(0),__webpack_require__(77),__webpack_require__(7),__webpack_require__(2),__webpack_require__(33),__webpack_require__(101),__webpack_require__(9),__webpack_require__(5);var axios__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(20),axios__WEBPACK_IMPORTED_MODULE_22___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_22__),_cookie_cookie__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(29),_form_input_search_input_helpers__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(150),_filter_search_search_counter__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(217),_content_search_content_search_helpers__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(50);function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toConsumableArray(arr){return function(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}}(arr)||function(iter){if(Symbol.iterator in Object(iter)||"[object Arguments]"===Object.prototype.toString.call(iter))return Array.from(iter)}(arr)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var Filter=function(){function Filter(element){var _this2=this;!function(instance,Constructor){if(!(instance instanceof Filter))throw new TypeError("Cannot call a class as a function")}(this),this.element=element,this.form=this.element.querySelector(".main-filter-n-2__form"),this.formEndpoints=this.form.getAttribute("action"),this.searchType=this.form.getAttribute("data-search-type")||"buildings",this.locationInput=this.element.querySelector(".location-input-n-2 input"),this.locationTips=_toConsumableArray(this.element.querySelectorAll(".location-input-n-2__tips-item")),this.pulseDot=element.querySelector(".dot-n-2"),this.mapSearchButtons=_toConsumableArray(element.querySelectorAll(".main-filter-n-2__search-button-small, .filter-slider-wrapper-n-2 .main-filter-n-2__search-on-map")),this.cookie=new _cookie_cookie__WEBPACK_IMPORTED_MODULE_23__.a,this.lastPopup=null,this.element.hasAttribute("data-filter-search")||this.element.hasAttribute("data-filter-map")||(this.searchCounter=new _filter_search_search_counter__WEBPACK_IMPORTED_MODULE_25__.a(element)),this.closeLastPopup=function(currentPopup){if(_this2.lastPopup&&_this2.lastPopup!==currentPopup)switch(_this2.lastPopup.classList.add("filter-popup-hide-n-2"),_this2.lastPopup){case _this2.selectElement.popup:_this2.selectElement.closePopup();break;case _this2.priceElements.pricePopup:_this2.priceElements.closePopup();break;case _this2.locationElements.locationTipsWrapper:_this2.locationElements.closePopup()}},this.location(),this.price(),this.selectElement(),this.bindEvents()}var Constructor,protoProps;return Constructor=Filter,(protoProps=[{key:"bindEvents",value:function(){var _this3=this;this.form.addEventListener("submit",function(event){event.preventDefault(),_this3.preSerialize();var stringifiedData=_this3.serialize().stringifiedData;window.location.href="".concat(_this3.formEndpoints,"?").concat(stringifiedData)}),this.mapSearchButtons.forEach(function(button){button.addEventListener("click",function(event){event.preventDefault(),_this3.preSerialize();var stringifiedData=_this3.serialize().stringifiedData;window.location.href="".concat(event.target.href||event.target.getAttribute("data-href"),"?").concat(stringifiedData)})})}},{key:"preSerialize",value:function(){this.priceElements.inputBefore.value=this.priceElements.inputBefore.value.replace(/\s/g,""),this.priceElements.inputAfter.value=this.priceElements.inputAfter.value.replace(/\s/g,"")}},{key:"serialize",value:function(){var requestData=Object(_content_search_content_search_helpers__WEBPACK_IMPORTED_MODULE_26__.c)(this.form,{hash:!0});return{requestData:requestData,stringifiedData:Object(_content_search_content_search_helpers__WEBPACK_IMPORTED_MODULE_26__.b)(requestData)}}},{key:"initTips",value:function(locationTips){var _this4=this;_toConsumableArray(this.element.querySelectorAll(".location-input-n-2__tips-item")).forEach(function(tip){tip.addEventListener("click",function(){_this4.locationInput.value=tip.innerText,_this4.locationInput.dispatchEvent(new CustomEvent("change")),_this4.locationElements.closePopup()})})}},{key:"beginInitLocation",value:function(locationTipsWrapper){locationTipsWrapper.innerHTML='\n            <div class="location-input-n-2__tips-category">По геопозиции</div>\n            <div class="location-input-n-2__tips-item">Москва</div>\n            <div class="location-input-n-2__tips-item">Новая Москва</div>\n            <div class="location-input-n-2__tips-item">Подмосковье</div>\n            <div class="location-input-n-2__tips-category">Популярные запросы</div>\n            <div class="location-input-n-2__tips-item">Эконом</div>\n            <div class="location-input-n-2__tips-item">Бизнес</div>\n        ',this.initTips(this.locationTips)}},{key:"location",value:function(){var _this5=this;this.locationElements={locationInput:this.element.querySelector(".location-input-n-2 input"),locationTipsWrapper:this.element.querySelector(".location-input-n-2__tips"),locationTips:_toConsumableArray(this.element.querySelectorAll(".location-input-n-2__tips-item")),dynamicLabel:this.element.querySelector(".location-input-n-2__dynamic-label"),bottomLine:this.element.querySelector(".location-input-n-2__bottom-line"),example:this.element.querySelector(".main-filter-n-2__example span"),closePopup:function(){_this5.locationElements.locationTipsWrapper.classList.add("filter-popup-hide-n-2"),_this5.locationElements.bottomLine.classList.remove("location-input-n-2__bottom-line_expanded"),_this5.pulseDot.classList.remove("hide"),""===_this5.locationElements.locationInput.value&&_this5.locationElements.dynamicLabel.classList.remove("price-output-n-2__dynamic-label_lifted")}};var _this$locationElement=this.locationElements,locationInput=_this$locationElement.locationInput,locationTipsWrapper=_this$locationElement.locationTipsWrapper,dynamicLabel=_this$locationElement.dynamicLabel,bottomLine=_this$locationElement.bottomLine,example=_this$locationElement.example,closePopup=_this$locationElement.closePopup,initTips=(this.locationElements.locationTips,function(){_toConsumableArray(_this5.element.querySelectorAll(".location-input-n-2__tips-item")).forEach(function(tip){tip.addEventListener("click",function(){locationInput.value=tip.innerText,locationInput.dispatchEvent(new CustomEvent("change")),closePopup()})})});""!==locationInput.value&&dynamicLabel.classList.add("price-output-n-2__dynamic-label_lifted"),initTips();var templateLabel=function(item,url){return url?'<a href="'.concat(url,'" class="location-input-n-2__tips-item location-input-n-2__tips-item_link">').concat(item,"</a>"):'<span class="location-input-n-2__tips-item">'.concat(item,"</span>")},templateType=function(type){return'<div class="location-input-n-2__tips-category">'.concat(type,"</div>")},requestTips=function(){return axios__WEBPACK_IMPORTED_MODULE_22___default.a.get("/ajax/text_search_new_buildings.php",{params:{q:locationInput.value,t:_this5.searchType}}).then(function(res){if(0!==res.data.length){var result=[],types=[];res.data=res.data.map(function(item){return function(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}({substring:_form_input_search_input_helpers__WEBPACK_IMPORTED_MODULE_24__.a.longestCommonSubstring(locationInput.value,item.label)},item)}),res.data=res.data.sort(function(a,b){return a.substring.length<b.substring.length?1:-1}),res.data.forEach(function(item){types.includes(item.type_name)||(types.push(item.type_name),result.push(templateType(item.type_name))),result.push(templateLabel(item.label,item.url))}),locationTipsWrapper.innerHTML=result.join(""),initTips()}return res})},requestDefaultTips=function(){var _this=_this5;return new Promise(function(resolve){_this.defaultTips?resolve(_this.defaultTips):axios__WEBPACK_IMPORTED_MODULE_22___default.a.get("/ajax/text_search_default_tips.php?q=".concat(locationInput.value,"&t=").concat(_this5.searchType)).then(function(res){_this.defaultTips=res,resolve(res),function(res){try{if(0!==res.data.length){var result={},types=[];res.data.forEach(function(item){var type=item.type_name;types.includes(type)||(types.push(type),result[type]=[],result[type].push(templateType(type))),result[type].push(templateLabel(item.label,item.url))}),locationTipsWrapper.innerHTML=Object.entries(result).sort(function(a,b){return"cottages"===_this5.searchType?"Область"===a[0]?1:-1:0}).map(function(entry){return entry[1].join("")}).join("")}}catch(e){}}(_this5.defaultTips)})})},openTipsList=function(){_this5.closeLastPopup(locationTipsWrapper),locationTipsWrapper.classList.contains("filter-popup-hide-n-2")&&(_this5.lastPopup=locationTipsWrapper),locationTipsWrapper.classList.remove("filter-popup-hide-n-2"),_this5.pulseDot.classList.add("hide"),""===locationInput.value&&dynamicLabel.classList.add("price-output-n-2__dynamic-label_lifted"),bottomLine.classList.add("location-input-n-2__bottom-line_expanded")},getTips=function(){return 0===locationInput.value.length?requestDefaultTips():requestTips()};locationInput.addEventListener("focus",function(){getTips(),openTipsList()}),document.addEventListener("click",function(e){e.target===locationTipsWrapper||e.target===locationInput||e.target.parentNode===locationTipsWrapper||locationTipsWrapper.classList.contains("hide")||closePopup()}),example&&example.addEventListener("click",function(){locationInput.value=example.textContent,locationInput.dispatchEvent(new CustomEvent("change")),dynamicLabel.classList.add("price-output-n-2__dynamic-label_lifted")}),locationInput.addEventListener("input",function(){_this5.timeout&&clearTimeout(_this5.timeout),_this5.timeout=setTimeout(function(){0===locationInput.value.length?requestDefaultTips():requestTips()},200)}),document.activeElement===locationInput?getTips().then(function(){locationTipsWrapper.classList.contains("filter-popup-hide-n-2")&&openTipsList()}):requestDefaultTips()}},{key:"price",value:function(){var _this6=this;this.priceElements={output:this.element.querySelector(".price-output-n-2"),outputBeforeWrapper:this.element.querySelector(".price-output-n-2__before"),outputAfterWrapper:this.element.querySelector(".price-output-n-2__after"),outputBefore:this.element.querySelector(".price-output-n-2__before span"),outputAfter:this.element.querySelector(".price-output-n-2__after span"),pricePopup:this.element.querySelector(".price-input-n-2__popup"),inputBefore:this.element.querySelector(".price-input-n-2__input-before"),inputAfter:this.element.querySelector(".price-input-n-2__input-after"),suggestBeforeAll:this.element.querySelector(".price-input-n-2__suggest-before"),suggestAfterAll:this.element.querySelector(".price-input-n-2__suggest-after"),crossButtonBefore:this.element.querySelector(".price-input-n-2__input-before-wrapper .price-input-n-2__input-cross"),crossButtonAfter:this.element.querySelector(".price-input-n-2__input-after-wrapper .price-input-n-2__input-cross"),suggestBeforeElements:_toConsumableArray(this.element.querySelectorAll(".price-input-n-2__suggest-before .price-input-n-2__suggest-element")),suggestAfterElements:_toConsumableArray(this.element.querySelectorAll(".price-input-n-2__suggest-after .price-input-n-2__suggest-element")),radioAll:this.element.querySelector(".price-input-n-2__toggle-radio-all"),radioArea:this.element.querySelector(".price-input-n-2__toggle-radio-area"),suggestRowAll:this.element.querySelector(".price-input-n-2__suggest-row"),suggestRowArea:this.element.querySelector(".price-input-n-2__suggest-row-area"),suggestBeforeArea:this.element.querySelector(".price-input-n-2__suggest-row-area .price-input-n-2__suggest-before"),suggestAfterArea:this.element.querySelector(".price-input-n-2__suggest-row-area .price-input-n-2__suggest-after"),dynamicLabel:this.element.querySelector(".price-output-n-2__dynamic-label"),bottomLine:this.element.querySelector(".price-output-n-2__bottom-line"),dropButton:this.element.querySelector(".price-output-n-2__drop-button"),closePopup:function(){_this6.priceElements.pricePopup.classList.add("filter-popup-hide-n-2"),""===_this6.priceElements.inputBefore.value&&""===_this6.priceElements.inputAfter.value&&_this6.priceElements.dynamicLabel.classList.remove("price-output-n-2__dynamic-label_lifted"),_this6.priceElements.bottomLine.classList.remove("price-output-n-2__bottom-line_expanded"),_this6.priceElements.dropButton.classList.remove("price-output-n-2__drop-button_open"),document.removeEventListener("click",clickOutHandle)}};var _this$priceElements=this.priceElements,output=_this$priceElements.output,outputBeforeWrapper=_this$priceElements.outputBeforeWrapper,outputAfterWrapper=_this$priceElements.outputAfterWrapper,outputBefore=_this$priceElements.outputBefore,outputAfter=_this$priceElements.outputAfter,pricePopup=_this$priceElements.pricePopup,inputBefore=_this$priceElements.inputBefore,inputAfter=_this$priceElements.inputAfter,suggestBeforeAll=_this$priceElements.suggestBeforeAll,suggestAfterAll=_this$priceElements.suggestAfterAll,crossButtonBefore=_this$priceElements.crossButtonBefore,crossButtonAfter=_this$priceElements.crossButtonAfter,suggestBeforeElements=_this$priceElements.suggestBeforeElements,suggestAfterElements=_this$priceElements.suggestAfterElements,radioAll=_this$priceElements.radioAll,radioArea=_this$priceElements.radioArea,suggestRowAll=_this$priceElements.suggestRowAll,suggestRowArea=_this$priceElements.suggestRowArea,suggestBeforeArea=_this$priceElements.suggestBeforeArea,suggestAfterArea=_this$priceElements.suggestAfterArea,dynamicLabel=_this$priceElements.dynamicLabel,bottomLine=_this$priceElements.bottomLine,closePopup=_this$priceElements.closePopup,dropButton=_this$priceElements.dropButton,suggestBefore=suggestBeforeAll,suggestAfter=suggestAfterAll,addSpace=function(value){var gettingValue=value.replace(/[^\d]/g,"");return gettingValue.length>10&&(gettingValue=gettingValue.substr(0,10)),gettingValue.replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,"$1 ")},changeHandleBefore=function(){var found=!1;_toConsumableArray(document.querySelectorAll(".price-input-n-2__suggest-before .price-input-n-2__suggest-element")).forEach(function(element){element.innerText===inputBefore.value?(element.classList.add("price-input-n-2__suggest-element_selected"),found=!0):element.classList.remove("price-input-n-2__suggest-element_selected"),found?deactivateBefore():activateBefore()}),outputBefore.innerText=inputBefore.value,""!==inputBefore.value?(crossButtonBefore.classList.remove("hide"),outputBeforeWrapper.classList.remove("hide")):(crossButtonBefore.classList.add("hide"),outputBeforeWrapper.classList.add("hide"));var event=document.createEvent("HTMLEvents");event.initEvent("change",!0,!1),inputBefore.dispatchEvent(event)},changeHandleAfter=function(){var found=!1;_toConsumableArray(document.querySelectorAll(".price-input-n-2__suggest-after .price-input-n-2__suggest-element")).forEach(function(element){element.innerText.trim()===inputAfter.value?(element.classList.add("price-input-n-2__suggest-element_selected"),found=!0):element.classList.remove("price-input-n-2__suggest-element_selected"),found?deactivateAfter():activateAfter()}),outputAfter.innerText=inputAfter.value,""!==inputAfter.value?(crossButtonAfter.classList.remove("hide"),outputAfterWrapper.classList.remove("hide")):(crossButtonAfter.classList.add("hide"),outputAfterWrapper.classList.add("hide"));var event=document.createEvent("HTMLEvents");event.initEvent("change",!0),inputAfter.dispatchEvent(event)},suggestInit=function(suggestBefElements,suggestAftElements){suggestBefElements.forEach(function(element){element.addEventListener("click",function(){inputBefore.value=addSpace(element.innerText),inputBefore.dispatchEvent(new CustomEvent("change")),changeHandleBefore(),deactivateBefore()})}),suggestAftElements.forEach(function(element){element.addEventListener("click",function(){inputAfter.value=addSpace(element.innerText),inputAfter.dispatchEvent(new CustomEvent("change")),changeHandleAfter(),deactivateAfter()})})},clearingInputs=function(){inputBefore.value="",inputAfter.value="",inputBefore.dispatchEvent(new CustomEvent("change"))},activateBefore=function(){suggestBefore.classList.remove("price-input-n-2__suggest-before_inactive")},deactivateBefore=function(){suggestBefore.classList.add("price-input-n-2__suggest-before_inactive")},activateAfter=function(){suggestAfter.classList.remove("price-input-n-2__suggest-after_inactive")},deactivateAfter=function(){suggestAfter.classList.add("price-input-n-2__suggest-after_inactive")};radioAll&&radioAll.addEventListener("change",function(){suggestBefore=suggestBeforeAll,suggestAfter=suggestAfterAll,suggestRowAll.classList.remove("hide"),suggestRowArea.classList.add("hide"),clearingInputs(),changeHandleBefore(),changeHandleAfter()}),radioArea&&radioArea.addEventListener("change",function(){suggestBefore=suggestBeforeArea,suggestAfter=suggestAfterArea,suggestRowArea.classList.remove("hide"),suggestRowAll.classList.add("hide"),clearingInputs(),changeHandleBefore(),changeHandleAfter()}),inputBefore.addEventListener("input",function(){inputBefore.value=addSpace(inputBefore.value),changeHandleBefore()}),inputAfter.addEventListener("input",function(){inputAfter.value=addSpace(inputAfter.value),changeHandleAfter()}),crossButtonBefore.addEventListener("click",function(e){e.preventDefault(),e.target.classList.add("hide"),inputBefore.value="",inputBefore.dispatchEvent(new CustomEvent("change")),changeHandleBefore()}),crossButtonAfter.addEventListener("click",function(e){e.preventDefault(),e.target.classList.add("hide"),inputAfter.value="",inputAfter.dispatchEvent(new CustomEvent("change")),changeHandleAfter()});var clickOutHandle=function(e){e.target===output||pricePopup.contains(e.target)||closePopup()},updateSuggest=function(){try{var values={},dataCityTab=document.querySelector(".location-city-tab-n-2.active")?document.querySelector(".location-city-tab-n-2.active").getAttribute("data-city-tab"):"",stage="";if("tab-city-1"===dataCityTab?(stage="msk",values.all={from:[4,5,6,7,8],to:[5,6,8,10,15]},values.area={from:[120,150,200,220,250],to:[180,220,260,290,350]}):(stage="other",values.all={from:[1,2,3,4,5],to:[2,4,6,8,12]},values.area={from:[40,60,80,100,140],to:[60,80,100,120,160]}),_this6.suggestStage===stage)return!0;_this6.suggestStage=stage,printSuggest(values)}catch(e){}},printSuggest=function(values){try{var suggestRAll=_this6.element.querySelector(".price-input-n-2__suggest-row"),suggestRArea=_this6.element.querySelector(".price-input-n-2__suggest-row-area"),suggestRowAllBefore=suggestRAll.querySelector(".price-input-n-2__suggest-before"),suggestRowAllAfter=suggestRAll.querySelector(".price-input-n-2__suggest-after"),suggestRowAreaBefore=null,suggestRowAreaAfter=null;suggestRArea&&(suggestRowAreaBefore=suggestRArea.querySelector(".price-input-n-2__suggest-before"),suggestRowAreaAfter=suggestRArea.querySelector(".price-input-n-2__suggest-after")),suggestRowAllBefore.innerHTML="",values.all.from.forEach(function(element){var div=document.createElement("div");div.classList.add("price-input-n-2__suggest-element"),div.innerHTML="".concat(element," 000 000"),suggestRowAllBefore.appendChild(div)}),suggestRowAllAfter.innerHTML="",values.all.to.forEach(function(element){var div=document.createElement("div");div.classList.add("price-input-n-2__suggest-element"),div.innerHTML="".concat(element," 000 000"),suggestRowAllAfter.appendChild(div)}),suggestRowAreaBefore&&(suggestRowAreaBefore.innerHTML="",values.area.from.forEach(function(element){var div=document.createElement("div");div.classList.add("price-input-n-2__suggest-element"),div.innerHTML="".concat(element," 000"),suggestRowAreaBefore.appendChild(div)})),suggestRowAreaAfter&&(suggestRowAreaAfter.innerHTML="",values.area.to.forEach(function(element){var div=document.createElement("div");div.classList.add("price-input-n-2__suggest-element"),div.innerHTML="".concat(element," 000"),suggestRowAreaAfter.appendChild(div)})),suggestInit(_toConsumableArray(_this6.element.querySelectorAll(".price-input-n-2__suggest-before .price-input-n-2__suggest-element")),_toConsumableArray(_this6.element.querySelectorAll(".price-input-n-2__suggest-after .price-input-n-2__suggest-element")))}catch(e){}};output.addEventListener("click",function(){_this6.closeLastPopup(pricePopup),updateSuggest(),pricePopup.classList.contains("filter-popup-hide-n-2")?(_this6.lastPopup=pricePopup,output.classList.add("price-input-n-2__output_active"),pricePopup.classList.remove("filter-popup-hide-n-2"),dropButton.classList.add("price-output-n-2__drop-button_open"),""===inputBefore.value&&""===inputAfter.value&&dynamicLabel.classList.add("price-output-n-2__dynamic-label_lifted"),document.addEventListener("click",clickOutHandle),bottomLine.classList.add("price-output-n-2__bottom-line_expanded"),setTimeout(function(){inputBefore.focus()},100)):closePopup()}),suggestInit(suggestBeforeElements,suggestAfterElements),updateSuggest()}},{key:"selectElement",value:function(){var _this7=this;this.selectElements={checked:this.element.querySelector(".filter-select-output-n-2__checked-elements"),extra:this.element.querySelector(".filter-select-output-n-2__extra-tag"),popup:this.element.querySelector(".filter-select-n-2__popup"),output:this.element.querySelector(".filter-select-output-n-2"),cross:this.element.querySelector(".filter-select-n-2__popup-cross"),cancel:this.element.querySelector(".filter-select-n-2__popup-cancel"),apply:this.element.querySelector(".filter-select-n-2__popup-apply"),checkboxes:_toConsumableArray(this.element.querySelectorAll('.filter-select-n-2__popup input[type="checkbox"]')),dynamicLabel:this.element.querySelector(".filter-select-output-n-2__dynamic-label"),bottomLine:this.element.querySelector(".filter-select-output-n-2__bottom-line"),dropButton:this.element.querySelector(".filter-select-output-n-2__drop-button"),transparentLayout:this.element.querySelector(".filter-select-n-2__transparent-layout"),active:[],outputText:null,haveLargeElement:!1,scrollDisable:!1,closePopup:function(){_this7.selectElements.popup.classList.add("filter-popup-hide-n-2"),document.body.classList.remove("no-scroll"),0===_toConsumableArray(_this7.selectElements.popup.querySelectorAll("input:checked")).length&&_this7.selectElements.dynamicLabel.classList.remove("filter-select-output-n-2__dynamic-label_lifted"),_this7.selectElements.bottomLine.classList.remove("filter-select-output-n-2__bottom-line_expanded"),_this7.selectElements.dropButton.classList.remove("filter-select-output-n-2__drop-button_open"),_this7.selectElements.transparentLayout.classList.add("hide"),document.removeEventListener("click",clickOutHandle)}};var _this$selectElements=this.selectElements,checked=_this$selectElements.checked,extra=_this$selectElements.extra,popup=_this$selectElements.popup,output=_this$selectElements.output,cross=_this$selectElements.cross,cancel=_this$selectElements.cancel,apply=_this$selectElements.apply,checkboxes=_this$selectElements.checkboxes,dynamicLabel=_this$selectElements.dynamicLabel,bottomLine=_this$selectElements.bottomLine,closePopup=_this$selectElements.closePopup,dropButton=_this$selectElements.dropButton,transparentLayout=_this$selectElements.transparentLayout,_this$selectElements2=this.selectElements,active=_this$selectElements2.active,outputText=_this$selectElements2.outputText,haveLargeElement=_this$selectElements2.haveLargeElement;popup.addEventListener("change",function(event){var activeElements=popup.querySelectorAll("input:checked");active=[],_toConsumableArray(activeElements).forEach(function(activeElement){active.push(activeElement.getAttribute("data-value")),activeElement.hasAttribute("data-large")&&(haveLargeElement=!0)}),active=active.sort();var setOutputText=function(text){outputText=activeElements.length===checkboxes.length?"Все":text};activeElements.length<2&&!haveLargeElement?(extra.classList.add("filter-select-output-n-2__extra-tag_hidden"),setOutputText(active.join(", "))):1===active.length&&haveLargeElement?(extra.classList.add("filter-select-output-n-2__extra-tag_hidden"),setOutputText(active[0])):(extra.classList.remove("filter-select-output-n-2__extra-tag_hidden"),extra.innerText=active.length,setOutputText(event.srcElement.checked?event.srcElement.getAttribute("data-value"):active[active.length-1])),0!==activeElements.length?(dynamicLabel.classList.add("filter-select-output-n-2__dynamic-label_lifted"),checked.innerText=outputText):(checked.innerText="",extra.classList.add("filter-select-output-n-2__extra-tag_hidden"),dynamicLabel.classList.remove("filter-select-output-n-2__dynamic-label_lifted"))}),transparentLayout.addEventListener("click",closePopup);var clickOutHandle=function(e){e.target===output||popup.contains(e.target)||closePopup()};output.addEventListener("click",function(){_this7.closeLastPopup(popup),popup.classList.contains("filter-popup-hide-n-2")?(_this7.lastPopup=popup,bottomLine.classList.add("filter-select-output-n-2__bottom-line_expanded"),popup.classList.remove("filter-popup-hide-n-2"),document.documentElement.clientWidth<768&&document.body.classList.add("no-scroll"),dropButton.classList.add("filter-select-output-n-2__drop-button_open"),dynamicLabel.classList.add("filter-select-output-n-2__dynamic-label_lifted"),transparentLayout.classList.remove("hide"),document.addEventListener("click",clickOutHandle)):closePopup()}),cancel.addEventListener("click",function(e){e.preventDefault(),checkboxes.forEach(function(checkbox){checkbox.checked=!1}),checked.innerText="",extra.innerText="",active.splice(0,active.length),closePopup()}),apply.addEventListener("click",function(e){e.preventDefault(),closePopup()}),cross.addEventListener("click",function(e){e.preventDefault(),closePopup()})}}])&&_defineProperties(Constructor.prototype,protoProps),Filter}()}}]);