(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{250:function(module,exports,__webpack_require__){"use strict";var createHTML=__webpack_require__(116),FORCED=__webpack_require__(117)("fontsize");__webpack_require__(12)({target:"String",proto:!0,forced:FORCED},{fontsize:function(size){return createHTML(this,"font","size",size)}})},260:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(250);var moveTo=__webpack_require__(38),moveTo_default=__webpack_require__.n(moveTo),content_search_helpers=__webpack_require__(34),throttle=function(callback,wait){var immediate=arguments.length>2&&void 0!==arguments[2]&&arguments[2],timeout=null,initialCall=!0;return function(){var _this=this,_arguments=arguments,next=function(){callback.apply(_this,_arguments),timeout=null};immediate&&initialCall&&(initialCall=!1,next()),timeout||(timeout=setTimeout(next,wait))}};function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}__webpack_require__.d(__webpack_exports__,"default",function(){return books_BooksReader});var DEFAULT_FONT_SIZE=15,books_BooksReader=function(){function BooksReader(element){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,BooksReader),this.element=element,this.moveTo=new moveTo_default.a,this.bookContent=document.querySelector(".js-book-content"),this.bookRender=document.querySelector(".js-book-render"),this.bookControls=document.querySelector(".js-book-controls"),this.bookSidebar=document.querySelector(".js-book-sidebar"),this.mobileOverlay=document.querySelector(".js-mobile-overlay"),this.mobileSidebarButton=document.querySelector(".js-book-content-toggle"),this.mobileSidebarCloseButton=document.querySelector(".js-book-content-close"),this.mobileFontDropdown=document.querySelector(".js-book-font-dropdown"),this.mobileFontDropdownButton=document.querySelector(".js-book-font-toggle"),this.mobileFontDropdownForm=document.querySelector(".js-book-font-form"),this.mobilePagination=document.querySelector(".js-mobile-pagination"),this.mobilePaginationParentHeight=Math.max(document.documentElement.clientHeight,window.innerHeight||0),this.bookControls&&(this.currentFontSize=DEFAULT_FONT_SIZE,this.bookFontIncrease=this.bookControls.querySelector(".js-font-increase"),this.bookFontDecrease=this.bookControls.querySelector(".js-font-decrease"),this.bookFontReset=this.bookControls.querySelector(".js-font-reset")),this.bindEvents()}var Constructor,protoProps,staticProps;return Constructor=BooksReader,(protoProps=[{key:"bindFontControlsEvents",value:function(){var _this=this,setFontSize=function(fontSize){_this.bookRender.style.fontSize=fontSize+"px"};this.bookControls&&(this.bookFontIncrease.addEventListener("click",function(){setFontSize(++_this.currentFontSize)}),this.bookFontDecrease.addEventListener("click",function(){setFontSize(--_this.currentFontSize)}),this.bookFontReset.addEventListener("click",function(){setFontSize(DEFAULT_FONT_SIZE),_this.currentFontSize=DEFAULT_FONT_SIZE})),this.mobileFontDropdownButton&&(this.mobileFontDropdownButton.addEventListener("click",function(){_this.mobileFontDropdown.classList.toggle("is-active"),_this.mobileFontDropdownButton.classList.toggle("is-active")}),window.addEventListener("click",function(event){_this.mobileFontDropdown.contains(event.target)||_this.mobileFontDropdownButton.contains(event.target)||(_this.mobileFontDropdown.classList.remove("is-active"),_this.mobileFontDropdownButton.classList.remove("is-active"))})),this.mobileFontDropdownForm&&(this.mobileFontDropdownForm.addEventListener("change",function(e){e.preventDefault();var fontsize=Object(content_search_helpers.c)(_this.mobileFontDropdownForm,{hash:!0}).fontsize;fontsize&&(setFontSize(+fontsize),_this.currentFontSize=+fontsize)}),this.mobileFontDropdownForm.addEventListener("submit",function(e){e.preventDefault()}))}},{key:"bindSidebarEvents",value:function(){var _this2=this;this.bookSidebar&&(this.mobileOverlay&&this.mobileOverlay.addEventListener("click",function(){document.body.classList.remove("no-scroll_sm"),_this2.bookSidebar.classList.remove("is-open"),_this2.mobileSidebarButton.classList.remove("is-active"),_this2.mobileOverlay.classList.remove("is-active")}),this.mobileSidebarButton&&this.mobileSidebarButton.addEventListener("click",function(){document.body.classList.toggle("no-scroll_sm"),_this2.bookSidebar.classList.toggle("is-open"),_this2.mobileSidebarButton.classList.toggle("is-active"),_this2.mobileOverlay.classList.toggle("is-active")}),this.mobileSidebarCloseButton&&this.mobileSidebarCloseButton.addEventListener("click",function(){document.body.classList.remove("no-scroll_sm"),_this2.bookSidebar.classList.remove("is-open"),_this2.mobileSidebarButton.classList.remove("is-active"),_this2.mobileOverlay.classList.remove("is-active")}))}},{key:"bindPaginationEvents",value:function(){var _this3=this;this.mobilePagination&&(window.addEventListener("scroll",throttle(function(e){_this3.handleScroll()},100)),window.addEventListener("resize",throttle(function(e){_this3.mobilePaginationParentHeight=Math.max(document.documentElement.clientHeight,window.innerHeight||0)},100)))}},{key:"handleScroll",value:function(){var paginationParentOffset=this.mobilePagination.parentElement.getBoundingClientRect().bottom;this.isMobilePaginationStatic&&(paginationParentOffset-=this.mobilePagination.clientHeight),paginationParentOffset-this.mobilePaginationParentHeight<0?(this.mobilePagination.style.position="static",this.isMobilePaginationStatic=!0):(this.mobilePagination.style.position="",this.isMobilePaginationStatic=!1)}},{key:"bindEvents",value:function(){this.bindFontControlsEvents(),this.bindSidebarEvents(),this.bindPaginationEvents()}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),BooksReader}()}}]);