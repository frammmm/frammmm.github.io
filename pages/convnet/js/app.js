!function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="js/",e(e.s=0)}([function(t,e,n){"use strict";function i(t){for(var e="[\n",n=0;n<t.length;n++){e+="\t["+t[n].join(", ")+"]",n!==t.length-1&&(e+=",\n")}e+="\n]",document.getElementById("output").innerText=e}var o=n(1);new(n(5))(document.getElementById("canvas")).resize(400),document.getElementById("init").addEventListener("mouseup",function(){(0,o.setTimeout)(function(){var t=document.getElementById("init"),e=new Image;e.src=t.toDataURL(),e.onload=function(){var t=document.getElementById("resized"),n=t.getContext("2d");n.drawImage(e,0,0,28,28);var o=n.getImageData(0,0,28,28);(new Image).src=t.toDataURL();for(var r=[],s=0;s<28;s++){for(var a=[],c=0;c<28;c++)a.push(o.data[4*(28*s+c)+3]);r.push(a)}i(r)}},200)})},function(t,e,n){function i(t,e){this._id=t,this._clearFn=e}var o=Function.prototype.apply;e.setTimeout=function(){return new i(o.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new i(o.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(2),e.setImmediate=setImmediate,e.clearImmediate=clearImmediate},function(t,e,n){(function(t,e){!function(t,n){"use strict";function i(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var i={callback:t,args:e};return u[c]=i,a(c),c++}function o(t){delete u[t]}function r(t){var e=t.callback,i=t.args;switch(i.length){case 0:e();break;case 1:e(i[0]);break;case 2:e(i[0],i[1]);break;case 3:e(i[0],i[1],i[2]);break;default:e.apply(n,i)}}function s(t){if(l)setTimeout(s,0,t);else{var e=u[t];if(e){l=!0;try{r(e)}finally{o(t),l=!1}}}}if(!t.setImmediate){var a,c=1,u={},l=!1,h=t.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(t);d=d&&d.setTimeout?d:t,"[object process]"==={}.toString.call(t.process)?function(){a=function(t){e.nextTick(function(){s(t)})}}():function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?function(){var e="setImmediate$"+Math.random()+"$",n=function(n){n.source===t&&"string"==typeof n.data&&0===n.data.indexOf(e)&&s(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",n,!1):t.attachEvent("onmessage",n),a=function(n){t.postMessage(e+n,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){s(t.data)},a=function(e){t.port2.postMessage(e)}}():h&&"onreadystatechange"in h.createElement("script")?function(){var t=h.documentElement;a=function(e){var n=h.createElement("script");n.onreadystatechange=function(){s(e),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n)}}():function(){a=function(t){setTimeout(s,0,t)}}(),d.setImmediate=i,d.clearImmediate=o}}("undefined"==typeof self?void 0===t?this:t:self)}).call(e,n(3),n(4))},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(t){if(l===setTimeout)return setTimeout(t,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(t,0);try{return l(t,0)}catch(e){try{return l.call(null,t,0)}catch(e){return l.call(this,t,0)}}}function r(t){if(h===clearTimeout)return clearTimeout(t);if((h===i||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{return h(t)}catch(e){try{return h.call(null,t)}catch(e){return h.call(this,t)}}}function s(){m&&f&&(m=!1,f.length?p=f.concat(p):v=-1,p.length&&a())}function a(){if(!m){var t=o(s);m=!0;for(var e=p.length;e;){for(f=p,p=[];++v<e;)f&&f[v].run();v=-1,e=p.length}f=null,m=!1,r(t)}}function c(t,e){this.fun=t,this.array=e}function u(){}var l,h,d=t.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(t){l=n}try{h="function"==typeof clearTimeout?clearTimeout:i}catch(t){h=i}}();var f,p=[],m=!1,v=-1;d.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];p.push(new c(t,e)),1!==p.length||m||o(a)},c.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=u,d.addListener=u,d.once=u,d.off=u,d.removeListener=u,d.removeAllListeners=u,d.emit=u,d.prependListener=u,d.prependOnceListener=u,d.listeners=function(t){return[]},d.binding=function(t){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(t){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(t,e){!function(){function e(t,e){var n,i={};for(n in t||{})t.hasOwnProperty(n)&&(i[n]=t[n]);for(n in e||{})e.hasOwnProperty(n)&&(i[n]=e[n]);return i}function n(t,n){function i(t,e){T.setAttribute("width",t),T.setAttribute("height",e),T.style.width=t+"px",T.style.height=e+"px"}function o(t){return{x:t.x/T.width,y:t.y/T.height}}function r(t){return-1!==t.type.indexOf("touch")}function s(t){var e={};if(r(t))e.x=t.touches[0].pageX-T.offsetLeft,e.y=t.touches[0].pageY-T.offsetTop;else{var n=v.canvas.getBoundingClientRect();e.x=t.clientX-n.left,e.y=t.clientY-n.top}return o(e)}function a(t){return t/T.width}function c(){k.clearRect(0,0,T.width,T.height),n.backgroundColor&&(k.fillStyle=n.backgroundColor,k.fillRect(0,0,T.width,T.height))}function u(t){return{x:t.x*T.width,y:t.y*T.height}}function l(t){return t*T.width}function h(t){k.beginPath();for(var e=0;e<t.points.length-1;e++){var n=u(t.points[e]),i=u(t.points[e+1]);k.moveTo(n.x,n.y),k.lineTo(i.x,i.y)}k.closePath(),k.strokeStyle=t.color,k.lineWidth=l(t.size),k.lineJoin=t.join,k.lineCap=t.cap,k.miterLimit=t.miterLimit,k.stroke()}function d(){c();for(var t=0;t<v.strokes.length;t++)h(v.strokes[t])}function f(t){t.preventDefault(),g=v.strokes,y=!0,v.undos=[];var e=s(t);g.push({points:[e],color:n.line.color,size:a(n.line.size),cap:n.line.cap,join:n.line.join,miterLimit:n.line.miterLimit})}function p(t){if(y){t.preventDefault();var e=s(t);v.strokes[g.length-1].points.push({x:e.x,y:e.y}),v.redraw()}}function m(t){if(y&&(t.preventDefault(),y=!1,!r(t))){var e=s(t);v.strokes[g.length-1].points.push({x:e.x,y:e.y}),v.redraw(),v.onDrawEnd&&v.onDrawEnd()}}var v=this;if(!t)throw new Error("Must pass in a container element");n=n||{};var g=[],w=[];n.data&&(n.aspectRatio=n.data.aspectRatio,g=n.data.strokes),n.aspectRatio=n.aspectRatio||1,n.width=n.width||t.clientWidth,n.height=n.height||n.width*n.aspectRatio,n.line=e({color:"#000",size:40,cap:"round",join:"round",miterLimit:10},n.line);var y=!1,T=document.createElement("canvas");T.id="init",i(n.width,n.height),t.appendChild(T);var k=T.getContext("2d");T.addEventListener("mousedown",f),T.addEventListener("touchstart",f),T.addEventListener("mousemove",p),T.addEventListener("touchmove",p),T.addEventListener("mouseup",m),T.addEventListener("mouseleave",m),T.addEventListener("touchend",m),"function"==typeof n.onDrawEnd&&(this.onDrawEnd=n.onDrawEnd),this.canvas=T,this.strokes=g,this.undos=w,this.opts=n,this.redraw=d,this.setCanvasSize=i,this.getPointRelativeToCanvas=o,this.getLineSizeRelativeToCanvas=a,g&&d()}n.prototype.undo=function(){0!==this.strokes.length&&(this.undos.push(this.strokes.pop()),this.redraw())},n.prototype.redo=function(){0!==this.undos.length&&(this.strokes.push(this.undos.pop()),this.redraw())},n.prototype.clear=function(){this.undos=[],this.strokes=[],this.redraw()},n.prototype.toJSON=function(){return{aspectRatio:this.canvas.width/this.canvas.height,strokes:this.strokes}},n.prototype.loadJSON=function(t){this.strokes=t.strokes,this.redraw()},n.prototype.setLineSize=function(t){this.opts.line.size=t},n.prototype.setLineColor=function(t){this.opts.line.color=t},n.prototype.drawLine=function(t,n,i){i=e(this.opts.line,i),t=this.getPointRelativeToCanvas(t),n=this.getPointRelativeToCanvas(n),this.strokes.push({points:[t,n],color:i.color,size:this.getLineSizeRelativeToCanvas(i.size),cap:i.cap,join:i.join,miterLimit:i.miterLimit}),this.redraw()},n.prototype.resize=function(t){var e=t*this.opts.aspectRatio;this.opts.lineSize=this.opts.lineSize*(t/this.opts.width),this.opts.width=t,this.opts.height=e,this.setCanvasSize(t,e),this.redraw()},void 0!==t&&void 0!==t.exports?t.exports=n:window.Sketchpad=n}()}]);