(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{234:function(module,exports,__webpack_require__){(function(global){var factory;factory=function(){"use strict";var _defined=function(it){if(null==it)throw TypeError("Can't call method on  "+it);return it},hasOwnProperty={}.hasOwnProperty,_has=function(it,key){return hasOwnProperty.call(it,key)},toString={}.toString,_iobject=Object("z").propertyIsEnumerable(0)?Object:function(it){return"String"==function(it){return toString.call(it).slice(8,-1)}(it)?it.split(""):Object(it)},_toIobject=function(it){return _iobject(_defined(it))},ceil=Math.ceil,floor=Math.floor,_toInteger=function(it){return isNaN(it=+it)?0:(it>0?floor:ceil)(it)},min=Math.min,_toLength=function(it){return it>0?min(_toInteger(it),9007199254740991):0},max=Math.max,min$1=Math.min;function createCommonjsModule(fn,module){return fn(module={exports:{}},module.exports),module.exports}var _global=createCommonjsModule(function(module){var global=module.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=global)}),store=_global["__core-js_shared__"]||(_global["__core-js_shared__"]={}),id=0,px=Math.random(),_uid=function(key){return"Symbol(".concat(void 0===key?"":key,")_",(++id+px).toString(36))},shared=store["keys"]||(store.keys={}),arrayIndexOf=(!1,function($this,el,fromIndex){var O=_toIobject($this),length=_toLength(O.length),index=function(index,length){return(index=_toInteger(index))<0?max(index+length,0):min$1(index,length)}(fromIndex,length);for(0;length>index;index++)if(index in O&&O[index]===el)return index||0;return-1}),IE_PROTO=function(key){return shared[key]||(shared[key]=_uid(key))}("IE_PROTO"),_enumBugKeys="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),_objectKeys=Object.keys||function(O){return function(object,names){var key,O=_toIobject(object),i=0,result=[];for(key in O)key!=IE_PROTO&&_has(O,key)&&result.push(key);for(;names.length>i;)_has(O,key=names[i++])&&(~arrayIndexOf(result,key)||result.push(key));return result}(O,_enumBugKeys)},_core=createCommonjsModule(function(module){var core=module.exports={version:"2.5.5"};"number"==typeof __e&&(__e=core)}),_isObject=(_core.version,function(it){return"object"==typeof it?null!==it:"function"==typeof it}),_anObject=function(it){if(!_isObject(it))throw TypeError(it+" is not an object!");return it},_fails=function(exec){try{return!!exec()}catch(e){return!0}},_descriptors=!_fails(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),document$1=_global.document,is=_isObject(document$1)&&_isObject(document$1.createElement),_ie8DomDefine=!_descriptors&&!_fails(function(){return 7!=Object.defineProperty(("div",is?document$1.createElement("div"):{}),"a",{get:function(){return 7}}).a}),dP=Object.defineProperty,_objectDp={f:_descriptors?Object.defineProperty:function(O,P,Attributes){if(_anObject(O),P=function(it,S){if(!_isObject(it))return it;var fn,val;if("function"==typeof(fn=it.toString)&&!_isObject(val=fn.call(it)))return val;if("function"==typeof(fn=it.valueOf)&&!_isObject(val=fn.call(it)))return val;throw TypeError("Can't convert object to primitive value")}(P),_anObject(Attributes),_ie8DomDefine)try{return dP(O,P,Attributes)}catch(e){}if("get"in Attributes||"set"in Attributes)throw TypeError("Accessors not supported!");return"value"in Attributes&&(O[P]=Attributes.value),O}},_hide=_descriptors?function(object,key,value){return _objectDp.f(object,key,function(bitmap,value){return{enumerable:!1,configurable:!0,writable:!0,value:value}}(0,value))}:function(object,key,value){return object[key]=value,object},_redefine=createCommonjsModule(function(module){var SRC=_uid("src"),$toString=Function.toString,TPL=(""+$toString).split("toString");_core.inspectSource=function(it){return $toString.call(it)},(module.exports=function(O,key,val,safe){var isFunction="function"==typeof val;isFunction&&(_has(val,"name")||_hide(val,"name",key)),O[key]!==val&&(isFunction&&(_has(val,SRC)||_hide(val,SRC,O[key]?""+O[key]:TPL.join(String(key)))),O===_global?O[key]=val:safe?O[key]?O[key]=val:_hide(O,key,val):(delete O[key],_hide(O,key,val)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[SRC]||$toString.call(this)})}),_ctx=function(fn,that,length){if(function(it){if("function"!=typeof fn)throw TypeError(fn+" is not a function!")}(),void 0===that)return fn;switch(length){case 1:return function(a){return fn.call(that,a)};case 2:return function(a,b){return fn.call(that,a,b)};case 3:return function(a,b,c){return fn.call(that,a,b,c)}}return function(){return fn.apply(that,arguments)}},$export=function(type,name,source){var key,own,out,exp,IS_FORCED=type&$export.F,IS_GLOBAL=type&$export.G,IS_STATIC=type&$export.S,IS_PROTO=type&$export.P,IS_BIND=type&$export.B,target=IS_GLOBAL?_global:IS_STATIC?_global[name]||(_global[name]={}):(_global[name]||{}).prototype,exports=IS_GLOBAL?_core:_core[name]||(_core[name]={}),expProto=exports.prototype||(exports.prototype={});for(key in IS_GLOBAL&&(source=name),source)out=((own=!IS_FORCED&&target&&void 0!==target[key])?target:source)[key],exp=IS_BIND&&own?_ctx(out,_global):IS_PROTO&&"function"==typeof out?_ctx(Function.call,out):out,target&&_redefine(target,key,out,type&$export.U),exports[key]!=out&&_hide(exports,key,exp),IS_PROTO&&expProto[key]!=out&&(expProto[key]=out)};_global.core=_core,$export.F=1,$export.G=2,$export.S=4,$export.P=8,$export.B=16,$export.W=32,$export.U=64,$export.R=128;var exec,fn,exp,_export=$export;exec=function(){return function(it){return _objectKeys(function(it){return Object(_defined(it))}(it))}},fn=(_core.Object||{}).keys||Object.keys,(exp={}).keys=exec(),_export(_export.S+_export.F*_fails(function(){fn(1)}),"Object",exp),_core.Object.keys;var _stringRepeat=function(count){var str=String(_defined(this)),res="",n=_toInteger(count);if(n<0||n==1/0)throw RangeError("Count can't be negative");for(;n>0;(n>>>=1)&&(str+=str))1&n&&(res+=str);return res};_export(_export.P,"String",{repeat:_stringRepeat}),_core.String.repeat;var _stringPad=function(that,maxLength,fillString,left){var S=String(_defined(that)),stringLength=S.length,fillStr=void 0===fillString?" ":String(fillString),intMaxLength=_toLength(maxLength);if(intMaxLength<=stringLength||""==fillStr)return S;var fillLen=intMaxLength-stringLength,stringFiller=_stringRepeat.call(fillStr,Math.ceil(fillLen/fillStr.length));return stringFiller.length>fillLen&&(stringFiller=stringFiller.slice(0,fillLen)),left?stringFiller+S:S+stringFiller},navigator=_global.navigator,_userAgent=navigator&&navigator.userAgent||"";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");var o,p;subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&(o=subClass,p=superClass,(Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p))}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function _possibleConstructorReturn(self,call){return!call||"object"!=typeof call&&"function"!=typeof call?function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _superPropBase(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=_getPrototypeOf(object)););return object}function _get(target,property,receiver){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(target,property,receiver){var base=_superPropBase(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(receiver):desc.value}})(target,property,receiver||target)}function set(target,property,value,receiver){return(set="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(target,property,value,receiver){var desc,base=_superPropBase(target,property);if(base){if((desc=Object.getOwnPropertyDescriptor(base,property)).set)return desc.set.call(receiver,value),!0;if(!desc.writable)return!1}if(desc=Object.getOwnPropertyDescriptor(receiver,property)){if(!desc.writable)return!1;desc.value=value,Object.defineProperty(receiver,property,desc)}else _defineProperty(receiver,property,value);return!0})(target,property,value,receiver)}function _set(target,property,value,receiver,isStrict){if(!set(target,property,value,receiver||target)&&isStrict)throw new Error("failed to set property");return value}function _slicedToArray(arr,i){return function(arr){if(Array.isArray(arr))return arr}(arr)||function(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}_export(_export.P+_export.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(_userAgent),"String",{padStart:function(maxLength){return _stringPad(this,maxLength,arguments.length>1?arguments[1]:void 0,!0)}}),_core.String.padStart,_export(_export.P+_export.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(_userAgent),"String",{padEnd:function(maxLength){return _stringPad(this,maxLength,arguments.length>1?arguments[1]:void 0,!1)}}),_core.String.padEnd;var DIRECTION_NONE="NONE",DIRECTION_LEFT="LEFT",DIRECTION_FORCE_LEFT="FORCE_LEFT",DIRECTION_RIGHT="RIGHT",DIRECTION_FORCE_RIGHT="FORCE_RIGHT";function escapeRegExp(str){return str.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}var g="undefined"!=typeof window&&window||void 0!==global&&global.global===global&&global||"undefined"!=typeof self&&self.self===self&&self||{},ActionDetails=function(){function ActionDetails(value,cursorPos,oldValue,oldSelection){for(_classCallCheck(this,ActionDetails),this.value=value,this.cursorPos=cursorPos,this.oldValue=oldValue,this.oldSelection=oldSelection;this.value.slice(0,this.startChangePos)!==this.oldValue.slice(0,this.startChangePos);)--this.oldSelection.start}return _createClass(ActionDetails,[{key:"startChangePos",get:function(){return Math.min(this.cursorPos,this.oldSelection.start)}},{key:"insertedCount",get:function(){return this.cursorPos-this.startChangePos}},{key:"inserted",get:function(){return this.value.substr(this.startChangePos,this.insertedCount)}},{key:"removedCount",get:function(){return Math.max(this.oldSelection.end-this.startChangePos||this.oldValue.length-this.value.length,0)}},{key:"removed",get:function(){return this.oldValue.substr(this.startChangePos,this.removedCount)}},{key:"head",get:function(){return this.value.substring(0,this.startChangePos)}},{key:"tail",get:function(){return this.value.substring(this.startChangePos+this.insertedCount)}},{key:"removeDirection",get:function(){return!this.removedCount||this.insertedCount?DIRECTION_NONE:this.oldSelection.end===this.cursorPos||this.oldSelection.start===this.cursorPos?DIRECTION_RIGHT:DIRECTION_LEFT}}]),ActionDetails}(),ChangeDetails=function(){function ChangeDetails(details){_classCallCheck(this,ChangeDetails),_extends(this,{inserted:"",rawInserted:"",skip:!1,tailShift:0},details)}return _createClass(ChangeDetails,[{key:"aggregate",value:function(details){return this.rawInserted+=details.rawInserted,this.skip=this.skip||details.skip,this.inserted+=details.inserted,this.tailShift+=details.tailShift,this}},{key:"offset",get:function(){return this.tailShift+this.inserted.length}}]),ChangeDetails}(),Masked=function(){function Masked(opts){_classCallCheck(this,Masked),this._value="",this._update(opts),this.isInitialized=!0}return _createClass(Masked,[{key:"updateOptions",value:function(opts){Object.keys(opts).length&&this.withValueRefresh(this._update.bind(this,opts))}},{key:"_update",value:function(opts){_extends(this,opts)}},{key:"reset",value:function(){this._value=""}},{key:"resolve",value:function(value){return this.reset(),this.append(value,{input:!0},{value:""}),this.doCommit(),this.value}},{key:"nearestInputPos",value:function(cursorPos,direction){return cursorPos}},{key:"extractInput",value:function(){var fromPos=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,toPos=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length;return this.value.slice(fromPos,toPos)}},{key:"extractTail",value:function(){var fromPos=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,toPos=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length;return{value:this.extractInput(fromPos,toPos)}}},{key:"_storeBeforeTailState",value:function(){this._beforeTailState=this.state}},{key:"_restoreBeforeTailState",value:function(){this.state=this._beforeTailState}},{key:"_resetBeforeTailState",value:function(){this._beforeTailState=null}},{key:"appendTail",value:function(tail){return this.append(tail?tail.value:"",{tail:!0})}},{key:"_appendCharRaw",value:function(ch){return this._value+=ch,new ChangeDetails({inserted:ch,rawInserted:ch})}},{key:"_appendChar",value:function(ch){var flags=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},checkTail=arguments.length>2?arguments[2]:void 0;if(!(ch=this.doPrepare(ch,flags)))return new ChangeDetails;var consistentState=this.state,details=this._appendCharRaw(ch,flags);if(details.inserted){var appended=!1!==this.doValidate(flags);if(appended&&null!=checkTail){this._storeBeforeTailState();var tailDetails=this.appendTail(checkTail);(appended=tailDetails.rawInserted===checkTail.value)&&tailDetails.inserted&&this._restoreBeforeTailState()}appended||(details.rawInserted=details.inserted="",this.state=consistentState)}return details}},{key:"append",value:function(str,flags,tail){this.value.length;for(var details=new ChangeDetails,ci=0;ci<str.length;++ci)details.aggregate(this._appendChar(str[ci],flags,tail));return null!=tail&&(this._storeBeforeTailState(),details.tailShift+=this.appendTail(tail).tailShift),details}},{key:"remove",value:function(){var fromPos=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,toPos=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length;return this._value=this.value.slice(0,fromPos)+this.value.slice(toPos),new ChangeDetails}},{key:"withValueRefresh",value:function(fn){if(this._refreshing||!this.isInitialized)return fn();this._refreshing=!0;var unmasked=this.unmaskedValue,value=this.value,ret=fn();return this.resolve(value)!==value&&(this.unmaskedValue=unmasked),delete this._refreshing,ret}},{key:"doPrepare",value:function(str){var flags=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.prepare?this.prepare(str,this,flags):str}},{key:"doValidate",value:function(flags){return(!this.validate||this.validate(this.value,this,flags))&&(!this.parent||this.parent.doValidate(flags))}},{key:"doCommit",value:function(){this.commit&&this.commit(this.value,this)}},{key:"splice",value:function(start,deleteCount,inserted,removeDirection){var tailPos=start+deleteCount,tail=this.extractTail(tailPos),startChangePos=this.nearestInputPos(start,removeDirection);return new ChangeDetails({tailShift:startChangePos-start}).aggregate(this.remove(startChangePos)).aggregate(this.append(inserted,{input:!0},tail))}},{key:"state",get:function(){return{_value:this.value}},set:function(state){this._value=state._value}},{key:"value",get:function(){return this._value},set:function(value){this.resolve(value)}},{key:"unmaskedValue",get:function(){return this.value},set:function(value){this.reset(),this.append(value,{},{value:""}),this.doCommit()}},{key:"typedValue",get:function(){return this.unmaskedValue},set:function(value){this.unmaskedValue=value}},{key:"rawInputValue",get:function(){return this.extractInput(0,this.value.length,{raw:!0})},set:function(value){this.reset(),this.append(value,{raw:!0},{value:""}),this.doCommit()}},{key:"isComplete",get:function(){return!0}}]),Masked}();function maskedClass(mask){if(null==mask)throw new Error("mask property should be defined");return mask instanceof RegExp?g.IMask.MaskedRegExp:"string"==typeof(str=mask)||str instanceof String?g.IMask.MaskedPattern:mask instanceof Date||mask===Date?g.IMask.MaskedDate:mask instanceof Number||"number"==typeof mask||mask===Number?g.IMask.MaskedNumber:Array.isArray(mask)||mask===Array?g.IMask.MaskedDynamic:mask.prototype instanceof g.IMask.Masked?mask:mask instanceof Function?g.IMask.MaskedFunction:g.IMask.Masked;var str}function createMask(opts){var mask=(opts=_objectSpread({},opts)).mask;return mask instanceof g.IMask.Masked?mask:new(maskedClass(mask))(opts)}var DEFAULT_INPUT_DEFINITIONS={0:/\d/,a:/[\u0041-\u005A\u0061-\u007A\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,"*":/./},PatternInputDefinition=function(){function PatternInputDefinition(opts){_classCallCheck(this,PatternInputDefinition);var mask=opts.mask,blockOpts=_objectWithoutProperties(opts,["mask"]);this.masked=createMask({mask:mask}),_extends(this,blockOpts)}return _createClass(PatternInputDefinition,[{key:"reset",value:function(){this._isFilled=!1,this.masked.reset()}},{key:"remove",value:function(){var fromPos=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,toPos=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length;return 0===fromPos&&toPos>=1?(this._isFilled=!1,this.masked.remove(fromPos,toPos)):new ChangeDetails}},{key:"_appendChar",value:function(str){var flags=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._isFilled)return new ChangeDetails;var state=this.masked.state,details=this.masked._appendChar(str,flags);return details.inserted&&!1===this.doValidate(flags)&&(details.inserted=details.rawInserted="",this.masked.state=state),details.inserted||this.isOptional||this.lazy||flags.input||(details.inserted=this.placeholderChar),details.skip=!details.inserted&&!this.isOptional,this._isFilled=Boolean(details.inserted),details}},{key:"_appendPlaceholder",value:function(){var details=new ChangeDetails;return this._isFilled||this.isOptional?details:(this._isFilled=!0,details.inserted=this.placeholderChar,details)}},{key:"extractTail",value:function(){var _this$masked;return(_this$masked=this.masked).extractTail.apply(_this$masked,arguments)}},{key:"appendTail",value:function(){var _this$masked2;return(_this$masked2=this.masked).appendTail.apply(_this$masked2,arguments)}},{key:"extractInput",value:function(){var fromPos=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,toPos=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length,flags=arguments.length>2?arguments[2]:void 0;return this.masked.extractInput(fromPos,toPos,flags)}},{key:"nearestInputPos",value:function(cursorPos){var direction=arguments.length>1&&void 0!==arguments[1]?arguments[1]:DIRECTION_NONE,maxPos=this.value.length,boundPos=Math.min(Math.max(cursorPos,0),maxPos);switch(direction){case DIRECTION_LEFT:case DIRECTION_FORCE_LEFT:return this.isComplete?boundPos:0;case DIRECTION_RIGHT:case DIRECTION_FORCE_RIGHT:return this.isComplete?boundPos:maxPos;case DIRECTION_NONE:default:return boundPos}}},{key:"doValidate",value:function(){var _this$masked3,_this$parent;return(_this$masked3=this.masked).doValidate.apply(_this$masked3,arguments)&&(!this.parent||(_this$parent=this.parent).doValidate.apply(_this$parent,arguments))}},{key:"doCommit",value:function(){this.masked.doCommit()}},{key:"value",get:function(){return this.masked.value||(this._isFilled&&!this.isOptional?this.placeholderChar:"")}},{key:"unmaskedValue",get:function(){return this.masked.unmaskedValue}},{key:"isComplete",get:function(){return Boolean(this.masked.value)||this.isOptional}},{key:"state",get:function(){return{masked:this.masked.state,_isFilled:this._isFilled}},set:function(state){this.masked.state=state.masked,this._isFilled=state._isFilled}}]),PatternInputDefinition}(),PatternFixedDefinition=function(){function PatternFixedDefinition(opts){_classCallCheck(this,PatternFixedDefinition),_extends(this,opts),this._value=""}return _createClass(PatternFixedDefinition,[{key:"reset",value:function(){this._isRawInput=!1,this._value=""}},{key:"remove",value:function(){var fromPos=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,toPos=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._value.length;return this._value=this._value.slice(0,fromPos)+this._value.slice(toPos),this._value||(this._isRawInput=!1),new ChangeDetails}},{key:"nearestInputPos",value:function(cursorPos){var direction=arguments.length>1&&void 0!==arguments[1]?arguments[1]:DIRECTION_NONE,maxPos=this._value.length;switch(direction){case DIRECTION_LEFT:case DIRECTION_FORCE_LEFT:return 0;case DIRECTION_NONE:case DIRECTION_RIGHT:case DIRECTION_FORCE_RIGHT:default:return maxPos}}},{key:"extractInput",value:function(){var fromPos=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,toPos=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._value.length;return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).raw&&this._isRawInput&&this._value.slice(fromPos,toPos)||""}},{key:"_appendChar",value:function(str,flags){var details=new ChangeDetails;if(this._value)return details;var isResolved=this.char===str[0]&&(this.isUnmasking||flags.input||flags.raw)&&!flags.tail;return isResolved&&(details.rawInserted=this.char),this._value=details.inserted=this.char,this._isRawInput=isResolved&&(flags.raw||flags.input),details}},{key:"_appendPlaceholder",value:function(){var details=new ChangeDetails;return this._value?details:(this._value=details.inserted=this.char,details)}},{key:"extractTail",value:function(){return arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length,{value:""}}},{key:"appendTail",value:function(tail){return this._appendChar(tail?tail.value:"",{tail:!0})}},{key:"doCommit",value:function(){}},{key:"value",get:function(){return this._value}},{key:"unmaskedValue",get:function(){return this.isUnmasking?this.value:""}},{key:"isComplete",get:function(){return!0}},{key:"state",get:function(){return{_value:this._value,_isRawInput:this._isRawInput}},set:function(state){_extends(this,state)}}]),PatternFixedDefinition}(),ChunksTailDetails=function(){function ChunksTailDetails(chunks){_classCallCheck(this,ChunksTailDetails),this.chunks=chunks}return _createClass(ChunksTailDetails,[{key:"value",get:function(){return this.chunks.map(function(c){return c.value}).join("")}}]),ChunksTailDetails}(),MaskedPattern=function(_Masked){function MaskedPattern(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,MaskedPattern),opts.definitions=_extends({},DEFAULT_INPUT_DEFINITIONS,opts.definitions),_possibleConstructorReturn(this,_getPrototypeOf(MaskedPattern).call(this,_objectSpread({},MaskedPattern.DEFAULTS,opts)))}return _inherits(MaskedPattern,Masked),_createClass(MaskedPattern,[{key:"_update",value:function(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};opts.definitions=_extends({},this.definitions,opts.definitions),_get(_getPrototypeOf(MaskedPattern.prototype),"_update",this).call(this,opts),this._rebuildMask()}},{key:"_rebuildMask",value:function(){var _this=this,defs=this.definitions;this._blocks=[],this._stops=[],this._maskedBlocks={};var pattern=this.mask;if(pattern&&defs)for(var unmaskingBlock=!1,optionalBlock=!1,i=0;i<pattern.length;++i)if(!this.blocks||"continue"!==function(){var p=pattern.slice(i),bNames=Object.keys(_this.blocks).filter(function(bName){return 0===p.indexOf(bName)});bNames.sort(function(a,b){return b.length-a.length});var bName=bNames[0];if(bName){var maskedBlock=createMask(_objectSpread({parent:_this,lazy:_this.lazy,placeholderChar:_this.placeholderChar},_this.blocks[bName]));return maskedBlock&&(_this._blocks.push(maskedBlock),_this._maskedBlocks[bName]||(_this._maskedBlocks[bName]=[]),_this._maskedBlocks[bName].push(_this._blocks.length-1)),i+=bName.length-1,"continue"}}()){var char=pattern[i],_isInput=char in defs;if(char!==MaskedPattern.STOP_CHAR)if("{"!==char&&"}"!==char)if("["!==char&&"]"!==char){if(char===MaskedPattern.ESCAPE_CHAR){if(!(char=pattern[++i]))break;_isInput=!1}var def;def=_isInput?new PatternInputDefinition({parent:this,lazy:this.lazy,placeholderChar:this.placeholderChar,mask:defs[char],isOptional:optionalBlock}):new PatternFixedDefinition({char:char,isUnmasking:unmaskingBlock}),this._blocks.push(def)}else optionalBlock=!optionalBlock;else unmaskingBlock=!unmaskingBlock;else this._stops.push(this._blocks.length)}}},{key:"_storeBeforeTailState",value:function(){this._blocks.forEach(function(b){"function"==typeof b._storeBeforeTailState&&b._storeBeforeTailState()}),_get(_getPrototypeOf(MaskedPattern.prototype),"_storeBeforeTailState",this).call(this)}},{key:"_restoreBeforeTailState",value:function(){this._blocks.forEach(function(b){"function"==typeof b._restoreBeforeTailState&&b._restoreBeforeTailState()}),_get(_getPrototypeOf(MaskedPattern.prototype),"_restoreBeforeTailState",this).call(this)}},{key:"_resetBeforeTailState",value:function(){this._blocks.forEach(function(b){"function"==typeof b._resetBeforeTailState&&b._resetBeforeTailState()}),_get(_getPrototypeOf(MaskedPattern.prototype),"_resetBeforeTailState",this).call(this)}},{key:"reset",value:function(){_get(_getPrototypeOf(MaskedPattern.prototype),"reset",this).call(this),this._blocks.forEach(function(b){return b.reset()})}},{key:"doCommit",value:function(){this._blocks.forEach(function(b){return b.doCommit()}),_get(_getPrototypeOf(MaskedPattern.prototype),"doCommit",this).call(this)}},{key:"appendTail",value:function(tail){var details=new ChangeDetails;return tail&&details.aggregate(tail instanceof ChunksTailDetails?this._appendTailChunks(tail.chunks):_get(_getPrototypeOf(MaskedPattern.prototype),"appendTail",this).call(this,tail)),details.aggregate(this._appendPlaceholder())}},{key:"_appendCharRaw",value:function(ch){var flags=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},blockData=this._mapPosToBlock(this.value.length),details=new ChangeDetails;if(!blockData)return details;for(var bi=blockData.index;;++bi){var _block=this._blocks[bi];if(!_block)break;var blockDetails=_block._appendChar(ch,flags),skip=blockDetails.skip;if(details.aggregate(blockDetails),skip||blockDetails.rawInserted)break}return details}},{key:"_appendTailChunks",value:function(chunks){for(var details=new ChangeDetails,ci=0;ci<chunks.length&&!details.skip;++ci){var chunk=chunks[ci],lastBlock=this._mapPosToBlock(this.value.length),chunkBlock=chunk instanceof ChunksTailDetails&&null!=chunk.index&&(!lastBlock||lastBlock.index<=chunk.index)&&this._blocks[chunk.index];if(chunkBlock){details.aggregate(this._appendPlaceholder(chunk.index));var tailDetails=chunkBlock.appendTail(chunk);tailDetails.skip=!1,details.aggregate(tailDetails),this._value+=tailDetails.inserted;var remainChars=chunk.value.slice(tailDetails.rawInserted.length);remainChars&&details.aggregate(this.append(remainChars,{tail:!0}))}else{var _ref=chunk,stop=_ref.stop,value=_ref.value;null!=stop&&this._stops.indexOf(stop)>=0&&details.aggregate(this._appendPlaceholder(stop)),details.aggregate(this.append(value,{tail:!0}))}}return details}},{key:"extractTail",value:function(){var fromPos=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,toPos=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length;return new ChunksTailDetails(this._extractTailChunks(fromPos,toPos))}},{key:"extractInput",value:function(){var fromPos=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,toPos=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length,flags=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(fromPos===toPos)return"";var input="";return this._forEachBlocksInRange(fromPos,toPos,function(b,_,fromPos,toPos){input+=b.extractInput(fromPos,toPos,flags)}),input}},{key:"_extractTailChunks",value:function(){var _this2=this,fromPos=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,toPos=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length;if(fromPos===toPos)return[];var lastChunk,chunks=[];return this._forEachBlocksInRange(fromPos,toPos,function(b,bi,fromPos,toPos){for(var nearestStop,blockChunk=b.extractTail(fromPos,toPos),si=0;si<_this2._stops.length;++si){var stop=_this2._stops[si];if(!(stop<=bi))break;nearestStop=stop}if(blockChunk instanceof ChunksTailDetails){if(null==nearestStop){for(var headFloatChunksCount=blockChunk.chunks.length,ci=0;ci<blockChunk.chunks.length;++ci)if(null!=blockChunk.chunks[ci].stop){headFloatChunksCount=ci;break}blockChunk.chunks.splice(0,headFloatChunksCount).filter(function(chunk){return chunk.value}).forEach(function(chunk){lastChunk?lastChunk.value+=chunk.value:lastChunk={value:chunk.value}})}blockChunk.chunks.length&&(lastChunk&&chunks.push(lastChunk),blockChunk.index=nearestStop,chunks.push(blockChunk),lastChunk=null)}else{if(null!=nearestStop)lastChunk&&chunks.push(lastChunk),blockChunk.stop=nearestStop;else if(lastChunk)return void(lastChunk.value+=blockChunk.value);lastChunk=blockChunk}}),lastChunk&&lastChunk.value&&chunks.push(lastChunk),chunks}},{key:"_appendPlaceholder",value:function(toBlockIndex){var _this3=this,details=new ChangeDetails;if(this.lazy&&null==toBlockIndex)return details;var startBlockData=this._mapPosToBlock(this.value.length);if(!startBlockData)return details;var startBlockIndex=startBlockData.index,endBlockIndex=null!=toBlockIndex?toBlockIndex:this._blocks.length;return this._blocks.slice(startBlockIndex,endBlockIndex).forEach(function(b){if("function"==typeof b._appendPlaceholder){var args=null!=b._blocks?[b._blocks.length]:[],bDetails=b._appendPlaceholder.apply(b,args);_this3._value+=bDetails.inserted,details.aggregate(bDetails)}}),details}},{key:"_mapPosToBlock",value:function(pos){for(var accVal="",bi=0;bi<this._blocks.length;++bi){var _block2=this._blocks[bi],blockStartPos=accVal.length;if(pos<=(accVal+=_block2.value).length)return{index:bi,offset:pos-blockStartPos}}}},{key:"_blockStartPos",value:function(blockIndex){return this._blocks.slice(0,blockIndex).reduce(function(pos,b){return pos+b.value.length},0)}},{key:"_forEachBlocksInRange",value:function(fromPos){var toPos=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length,fn=arguments.length>2?arguments[2]:void 0,fromBlock=this._mapPosToBlock(fromPos);if(fromBlock){var toBlock=this._mapPosToBlock(toPos),isSameBlock=toBlock&&fromBlock.index===toBlock.index,fromBlockRemoveBegin=fromBlock.offset,fromBlockRemoveEnd=toBlock&&isSameBlock?toBlock.offset:void 0;if(fn(this._blocks[fromBlock.index],fromBlock.index,fromBlockRemoveBegin,fromBlockRemoveEnd),toBlock&&!isSameBlock){for(var bi=fromBlock.index+1;bi<toBlock.index;++bi)fn(this._blocks[bi],bi);fn(this._blocks[toBlock.index],toBlock.index,0,toBlock.offset)}}}},{key:"remove",value:function(){var fromPos=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,toPos=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length,removeDetails=_get(_getPrototypeOf(MaskedPattern.prototype),"remove",this).call(this,fromPos,toPos);return this._forEachBlocksInRange(fromPos,toPos,function(b,_,bFromPos,bToPos){removeDetails.aggregate(b.remove(bFromPos,bToPos))}),removeDetails}},{key:"nearestInputPos",value:function(cursorPos){var direction=arguments.length>1&&void 0!==arguments[1]?arguments[1]:DIRECTION_NONE,beginBlockData=this._mapPosToBlock(cursorPos)||{index:0,offset:0},beginBlockOffset=beginBlockData.offset,beginBlockIndex=beginBlockData.index,beginBlock=this._blocks[beginBlockIndex];if(!beginBlock)return cursorPos;var beginBlockCursorPos=beginBlockOffset;0!==beginBlockCursorPos&&beginBlockCursorPos<beginBlock.value.length&&(beginBlockCursorPos=beginBlock.nearestInputPos(beginBlockOffset,function(direction){switch(direction){case DIRECTION_LEFT:return DIRECTION_FORCE_LEFT;case DIRECTION_RIGHT:return DIRECTION_FORCE_RIGHT;default:return direction}}(direction)));var cursorAtRight=beginBlockCursorPos===beginBlock.value.length;if(0!==beginBlockCursorPos&&!cursorAtRight)return this._blockStartPos(beginBlockIndex)+beginBlockCursorPos;var searchBlockIndex=cursorAtRight?beginBlockIndex+1:beginBlockIndex;if(direction===DIRECTION_NONE){if(searchBlockIndex>0){var blockIndexAtLeft=searchBlockIndex-1,blockAtLeft=this._blocks[blockIndexAtLeft],blockInputPos=blockAtLeft.nearestInputPos(0,DIRECTION_NONE);if(!blockAtLeft.value.length||blockInputPos!==blockAtLeft.value.length)return this._blockStartPos(searchBlockIndex)}for(var bi=searchBlockIndex;bi<this._blocks.length;++bi){var _block3=this._blocks[bi],_blockInputPos=_block3.nearestInputPos(0,DIRECTION_NONE);if(_blockInputPos!==_block3.value.length)return this._blockStartPos(bi)+_blockInputPos}return this.value.length}if(direction===DIRECTION_LEFT||direction===DIRECTION_FORCE_LEFT){for(var firstFilledBlockIndexAtRight,_bi=searchBlockIndex;_bi<this._blocks.length;++_bi)if(this._blocks[_bi].value){firstFilledBlockIndexAtRight=_bi;break}if(null!=firstFilledBlockIndexAtRight){var filledBlock=this._blocks[firstFilledBlockIndexAtRight],_blockInputPos2=filledBlock.nearestInputPos(0,DIRECTION_RIGHT);if(0===_blockInputPos2&&filledBlock.unmaskedValue.length)return this._blockStartPos(firstFilledBlockIndexAtRight)+_blockInputPos2}for(var firstEmptyInputBlockIndex,firstFilledInputBlockIndex=-1,_bi2=searchBlockIndex-1;_bi2>=0;--_bi2){var _block4=this._blocks[_bi2],_blockInputPos3=_block4.nearestInputPos(_block4.value.length,DIRECTION_FORCE_LEFT);if(null!=firstEmptyInputBlockIndex||_block4.value&&0===_blockInputPos3||(firstEmptyInputBlockIndex=_bi2),0!==_blockInputPos3){if(_blockInputPos3!==_block4.value.length)return this._blockStartPos(_bi2)+_blockInputPos3;firstFilledInputBlockIndex=_bi2;break}}if(direction===DIRECTION_LEFT)for(var _bi3=firstFilledInputBlockIndex+1;_bi3<=Math.min(searchBlockIndex,this._blocks.length-1);++_bi3){var _block5=this._blocks[_bi3],_blockInputPos4=_block5.nearestInputPos(0,DIRECTION_NONE),blockAlignedPos=this._blockStartPos(_bi3)+_blockInputPos4;if((!_block5.value.length&&blockAlignedPos===this.value.length||_blockInputPos4!==_block5.value.length)&&blockAlignedPos<=cursorPos)return blockAlignedPos}if(firstFilledInputBlockIndex>=0)return this._blockStartPos(firstFilledInputBlockIndex)+this._blocks[firstFilledInputBlockIndex].value.length;if(direction===DIRECTION_FORCE_LEFT||this.lazy&&!this.extractInput()&&!function(block){if(!block)return!1;var value=block.value;return!value||block.nearestInputPos(0,DIRECTION_NONE)!==value.length}(this._blocks[searchBlockIndex]))return 0;if(null!=firstEmptyInputBlockIndex)return this._blockStartPos(firstEmptyInputBlockIndex);for(var _bi4=searchBlockIndex;_bi4<this._blocks.length;++_bi4){var _block6=this._blocks[_bi4],_blockInputPos5=_block6.nearestInputPos(0,DIRECTION_NONE);if(!_block6.value.length||_blockInputPos5!==_block6.value.length)return this._blockStartPos(_bi4)+_blockInputPos5}return 0}if(direction===DIRECTION_RIGHT||direction===DIRECTION_FORCE_RIGHT){for(var firstInputBlockAlignedIndex,firstInputBlockAlignedPos,_bi5=searchBlockIndex;_bi5<this._blocks.length;++_bi5){var _block7=this._blocks[_bi5],_blockInputPos6=_block7.nearestInputPos(0,DIRECTION_NONE);if(_blockInputPos6!==_block7.value.length){firstInputBlockAlignedPos=this._blockStartPos(_bi5)+_blockInputPos6,firstInputBlockAlignedIndex=_bi5;break}}if(null!=firstInputBlockAlignedIndex&&null!=firstInputBlockAlignedPos){for(var _bi6=firstInputBlockAlignedIndex;_bi6<this._blocks.length;++_bi6){var _block8=this._blocks[_bi6],_blockInputPos7=_block8.nearestInputPos(0,DIRECTION_FORCE_RIGHT);if(_blockInputPos7!==_block8.value.length)return this._blockStartPos(_bi6)+_blockInputPos7}return direction===DIRECTION_FORCE_RIGHT?this.value.length:firstInputBlockAlignedPos}for(var _bi7=Math.min(searchBlockIndex,this._blocks.length-1);_bi7>=0;--_bi7){var _block9=this._blocks[_bi7],_blockInputPos8=_block9.nearestInputPos(_block9.value.length,DIRECTION_LEFT);if(0!==_blockInputPos8){var alignedPos=this._blockStartPos(_bi7)+_blockInputPos8;if(alignedPos>=cursorPos)return alignedPos;break}}}return cursorPos}},{key:"maskedBlock",value:function(name){return this.maskedBlocks(name)[0]}},{key:"maskedBlocks",value:function(name){var _this4=this,indices=this._maskedBlocks[name];return indices?indices.map(function(gi){return _this4._blocks[gi]}):[]}},{key:"state",get:function(){return _objectSpread({},_get(_getPrototypeOf(MaskedPattern.prototype),"state",this),{_blocks:this._blocks.map(function(b){return b.state})})},set:function(state){var _blocks=state._blocks,maskedState=_objectWithoutProperties(state,["_blocks"]);this._blocks.forEach(function(b,bi){return b.state=_blocks[bi]}),_set(_getPrototypeOf(MaskedPattern.prototype),"state",maskedState,this,!0)}},{key:"isComplete",get:function(){return this._blocks.every(function(b){return b.isComplete})}},{key:"unmaskedValue",get:function(){return this._blocks.reduce(function(str,b){return str+b.unmaskedValue},"")},set:function(unmaskedValue){_set(_getPrototypeOf(MaskedPattern.prototype),"unmaskedValue",unmaskedValue,this,!0)}},{key:"value",get:function(){return this._blocks.reduce(function(str,b){return str+b.value},"")},set:function(value){_set(_getPrototypeOf(MaskedPattern.prototype),"value",value,this,!0)}}]),MaskedPattern}();MaskedPattern.DEFAULTS={lazy:!0,placeholderChar:"_"},MaskedPattern.STOP_CHAR="`",MaskedPattern.ESCAPE_CHAR="\\",MaskedPattern.InputDefinition=PatternInputDefinition,MaskedPattern.FixedDefinition=PatternFixedDefinition;var MaskedRange=function(_MaskedPattern){function MaskedRange(){return _classCallCheck(this,MaskedRange),_possibleConstructorReturn(this,_getPrototypeOf(MaskedRange).apply(this,arguments))}return _inherits(MaskedRange,MaskedPattern),_createClass(MaskedRange,[{key:"_update",value:function(opts){opts=_objectSpread({to:this.to||0,from:this.from||0},opts);var maxLength=String(opts.to).length;null!=opts.maxLength&&(maxLength=Math.max(maxLength,opts.maxLength)),opts.maxLength=maxLength;for(var toStr=String(opts.to).padStart(maxLength,"0"),fromStr=String(opts.from).padStart(maxLength,"0"),sameCharsCount=0;sameCharsCount<toStr.length&&toStr[sameCharsCount]===fromStr[sameCharsCount];)++sameCharsCount;opts.mask=toStr.slice(0,sameCharsCount).replace(/0/g,"\\0")+"0".repeat(maxLength-sameCharsCount),_get(_getPrototypeOf(MaskedRange.prototype),"_update",this).call(this,opts)}},{key:"doValidate",value:function(){var _get2,str=this.value,minstr="",maxstr="",_ref2=_slicedToArray(str.match(/^(\D*)(\d*)(\D*)/)||[],3),placeholder=_ref2[1],num=_ref2[2];if(num&&(minstr="0".repeat(placeholder.length)+num,maxstr="9".repeat(placeholder.length)+num),-1===str.search(/[^0]/)&&str.length<=this._matchFrom)return!0;minstr=minstr.padEnd(this.maxLength,"0"),maxstr=maxstr.padEnd(this.maxLength,"9");for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return this.from<=Number(maxstr)&&Number(minstr)<=this.to&&(_get2=_get(_getPrototypeOf(MaskedRange.prototype),"doValidate",this)).call.apply(_get2,[this].concat(args))}},{key:"_matchFrom",get:function(){return this.maxLength-String(this.from).length}},{key:"isComplete",get:function(){return _get(_getPrototypeOf(MaskedRange.prototype),"isComplete",this)&&Boolean(this.value)}}]),MaskedRange}(),MaskedDate=function(_MaskedPattern){function MaskedDate(opts){return _classCallCheck(this,MaskedDate),_possibleConstructorReturn(this,_getPrototypeOf(MaskedDate).call(this,_objectSpread({},MaskedDate.DEFAULTS,opts)))}return _inherits(MaskedDate,MaskedPattern),_createClass(MaskedDate,[{key:"_update",value:function(opts){opts.mask===Date&&delete opts.mask,opts.pattern&&(opts.mask=opts.pattern,delete opts.pattern);var blocks=opts.blocks;opts.blocks=_extends({},MaskedDate.GET_DEFAULT_BLOCKS()),opts.min&&(opts.blocks.Y.from=opts.min.getFullYear()),opts.max&&(opts.blocks.Y.to=opts.max.getFullYear()),opts.min&&opts.max&&opts.blocks.Y.from===opts.blocks.Y.to&&(opts.blocks.m.from=opts.min.getMonth()+1,opts.blocks.m.to=opts.max.getMonth()+1,opts.blocks.m.from===opts.blocks.m.to&&(opts.blocks.d.from=opts.min.getDate(),opts.blocks.d.to=opts.max.getDate())),_extends(opts.blocks,blocks),_get(_getPrototypeOf(MaskedDate.prototype),"_update",this).call(this,opts)}},{key:"doValidate",value:function(){for(var _get2,date=this.date,_len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(_get2=_get(_getPrototypeOf(MaskedDate.prototype),"doValidate",this)).call.apply(_get2,[this].concat(args))&&(!this.isComplete||this.isDateExist(this.value)&&null!=date&&(null==this.min||this.min<=date)&&(null==this.max||date<=this.max))}},{key:"isDateExist",value:function(str){return this.format(this.parse(str))===str}},{key:"date",get:function(){return this.isComplete?this.parse(this.value):null},set:function(date){this.value=this.format(date)}},{key:"typedValue",get:function(){return this.date},set:function(value){this.date=value}}]),MaskedDate}();MaskedDate.DEFAULTS={pattern:"d{.}`m{.}`Y",format:function(date){return[String(date.getDate()).padStart(2,"0"),String(date.getMonth()+1).padStart(2,"0"),date.getFullYear()].join(".")},parse:function(str){var _str$split2=_slicedToArray(str.split("."),3),day=_str$split2[0],month=_str$split2[1],year=_str$split2[2];return new Date(year,month-1,day)}},MaskedDate.GET_DEFAULT_BLOCKS=function(){return{d:{mask:MaskedRange,from:1,to:31,maxLength:2},m:{mask:MaskedRange,from:1,to:12,maxLength:2},Y:{mask:MaskedRange,from:1900,to:9999}}};var MaskElement=function(){function MaskElement(){_classCallCheck(this,MaskElement)}return _createClass(MaskElement,[{key:"select",value:function(start,end){if(null!=start&&null!=end&&(start!==this.selectionStart||end!==this.selectionEnd))try{this._unsafeSelect(start,end)}catch(e){}}},{key:"_unsafeSelect",value:function(start,end){}},{key:"bindEvents",value:function(handlers){}},{key:"unbindEvents",value:function(){}},{key:"selectionStart",get:function(){var start;try{start=this._unsafeSelectionStart}catch(e){}return null!=start?start:this.value.length}},{key:"selectionEnd",get:function(){var end;try{end=this._unsafeSelectionEnd}catch(e){}return null!=end?end:this.value.length}},{key:"isActive",get:function(){return!1}}]),MaskElement}(),HTMLMaskElement=function(_MaskElement){function HTMLMaskElement(input){var _this;return _classCallCheck(this,HTMLMaskElement),(_this=_possibleConstructorReturn(this,_getPrototypeOf(HTMLMaskElement).call(this))).input=input,_this._handlers={},_this}return _inherits(HTMLMaskElement,MaskElement),_createClass(HTMLMaskElement,[{key:"_unsafeSelect",value:function(start,end){this.input.setSelectionRange(start,end)}},{key:"bindEvents",value:function(handlers){var _this2=this;Object.keys(handlers).forEach(function(event){return _this2._toggleEventHandler(HTMLMaskElement.EVENTS_MAP[event],handlers[event])})}},{key:"unbindEvents",value:function(){var _this3=this;Object.keys(this._handlers).forEach(function(event){return _this3._toggleEventHandler(event)})}},{key:"_toggleEventHandler",value:function(event,handler){this._handlers[event]&&(this.input.removeEventListener(event,this._handlers[event]),delete this._handlers[event]),handler&&(this.input.addEventListener(event,handler),this._handlers[event]=handler)}},{key:"isActive",get:function(){return this.input===document.activeElement}},{key:"_unsafeSelectionStart",get:function(){return this.input.selectionStart}},{key:"_unsafeSelectionEnd",get:function(){return this.input.selectionEnd}},{key:"value",get:function(){return this.input.value},set:function(value){this.input.value=value}}]),HTMLMaskElement}();HTMLMaskElement.EVENTS_MAP={selectionChange:"keydown",input:"input",drop:"drop",click:"click",focus:"focus",commit:"change"};var InputMask=function(){function InputMask(el,opts){_classCallCheck(this,InputMask),this.el=el instanceof MaskElement?el:new HTMLMaskElement(el),this.masked=createMask(opts),this._listeners={},this._value="",this._unmaskedValue="",this._saveSelection=this._saveSelection.bind(this),this._onInput=this._onInput.bind(this),this._onChange=this._onChange.bind(this),this._onDrop=this._onDrop.bind(this),this.alignCursor=this.alignCursor.bind(this),this.alignCursorFriendly=this.alignCursorFriendly.bind(this),this._bindEvents(),this.updateValue(),this._onChange()}return _createClass(InputMask,[{key:"_bindEvents",value:function(){this.el.bindEvents({selectionChange:this._saveSelection,input:this._onInput,drop:this._onDrop,click:this.alignCursorFriendly,focus:this.alignCursorFriendly,commit:this._onChange})}},{key:"_unbindEvents",value:function(){this.el.unbindEvents()}},{key:"_fireEvent",value:function(ev){var listeners=this._listeners[ev];listeners&&listeners.forEach(function(l){return l()})}},{key:"_saveSelection",value:function(){this.value,this.el.value,this._selection={start:this.selectionStart,end:this.cursorPos}}},{key:"updateValue",value:function(){this.masked.value=this.el.value,this._value=this.masked.value}},{key:"updateControl",value:function(){var newUnmaskedValue=this.masked.unmaskedValue,newValue=this.masked.value,isChanged=this.unmaskedValue!==newUnmaskedValue||this.value!==newValue;this._unmaskedValue=newUnmaskedValue,this._value=newValue,this.el.value!==newValue&&(this.el.value=newValue),isChanged&&this._fireChangeEvents()}},{key:"updateOptions",value:function(opts){if(!function objectIncludes(b,a){if(a===b)return!0;var i,arrA=Array.isArray(a),arrB=Array.isArray(b);if(arrA&&arrB){if(a.length!=b.length)return!1;for(i=0;i<a.length;i++)if(!objectIncludes(a[i],b[i]))return!1;return!0}if(arrA!=arrB)return!1;if(a&&b&&"object"===_typeof(a)&&"object"===_typeof(b)){var dateA=a instanceof Date,dateB=b instanceof Date;if(dateA&&dateB)return a.getTime()==b.getTime();if(dateA!=dateB)return!1;var regexpA=a instanceof RegExp,regexpB=b instanceof RegExp;if(regexpA&&regexpB)return a.toString()==b.toString();if(regexpA!=regexpB)return!1;var keys=Object.keys(a);for(i=0;i<keys.length;i++)if(!Object.prototype.hasOwnProperty.call(b,keys[i]))return!1;for(i=0;i<keys.length;i++)if(!objectIncludes(b[keys[i]],a[keys[i]]))return!1;return!0}return!1}(this.masked,opts)){var mask=opts.mask,restOpts=_objectWithoutProperties(opts,["mask"]);this.mask=mask,this.masked.updateOptions(restOpts),this.updateControl()}}},{key:"updateCursor",value:function(cursorPos){null!=cursorPos&&(this.cursorPos=cursorPos,this._delayUpdateCursor(cursorPos))}},{key:"_delayUpdateCursor",value:function(cursorPos){var _this=this;this._abortUpdateCursor(),this._changingCursorPos=cursorPos,this._cursorChanging=setTimeout(function(){_this.el&&(_this.cursorPos=_this._changingCursorPos,_this._abortUpdateCursor())},10)}},{key:"_fireChangeEvents",value:function(){this._fireEvent("accept"),this.masked.isComplete&&this._fireEvent("complete")}},{key:"_abortUpdateCursor",value:function(){this._cursorChanging&&(clearTimeout(this._cursorChanging),delete this._cursorChanging)}},{key:"alignCursor",value:function(){this.cursorPos=this.masked.nearestInputPos(this.cursorPos,DIRECTION_LEFT)}},{key:"alignCursorFriendly",value:function(){this.selectionStart===this.cursorPos&&this.alignCursor()}},{key:"on",value:function(ev,handler){return this._listeners[ev]||(this._listeners[ev]=[]),this._listeners[ev].push(handler),this}},{key:"off",value:function(ev,handler){if(this._listeners[ev]){if(handler){var hIndex=this._listeners[ev].indexOf(handler);return hIndex>=0&&this._listeners[ev].splice(hIndex,1),this}delete this._listeners[ev]}}},{key:"_onInput",value:function(){if(this._abortUpdateCursor(),!this._selection)return this.updateValue();var details=new ActionDetails(this.el.value,this.cursorPos,this.value,this._selection),oldRawValue=this.masked.rawInputValue,offset=this.masked.splice(details.startChangePos,details.removed.length,details.inserted,details.removeDirection).offset,removeDirection=oldRawValue===this.masked.rawInputValue?details.removeDirection:DIRECTION_NONE,cursorPos=this.masked.nearestInputPos(details.startChangePos+offset,removeDirection);this.updateControl(),this.updateCursor(cursorPos)}},{key:"_onChange",value:function(){this.value!==this.el.value&&this.updateValue(),this.masked.doCommit(),this.updateControl()}},{key:"_onDrop",value:function(ev){ev.preventDefault(),ev.stopPropagation()}},{key:"destroy",value:function(){this._unbindEvents(),this._listeners.length=0,delete this.el}},{key:"mask",get:function(){return this.masked.mask},set:function(mask){if(!(null==mask||mask===this.masked.mask||mask===Date&&this.masked instanceof MaskedDate))if(this.masked.constructor!==maskedClass(mask)){var masked=createMask({mask:mask});masked.unmaskedValue=this.masked.unmaskedValue,this.masked=masked}else this.masked.updateOptions({mask:mask})}},{key:"value",get:function(){return this._value},set:function(str){this.masked.value=str,this.updateControl(),this.alignCursor()}},{key:"unmaskedValue",get:function(){return this._unmaskedValue},set:function(str){this.masked.unmaskedValue=str,this.updateControl(),this.alignCursor()}},{key:"typedValue",get:function(){return this.masked.typedValue},set:function(val){this.masked.typedValue=val,this.updateControl(),this.alignCursor()}},{key:"selectionStart",get:function(){return this._cursorChanging?this._changingCursorPos:this.el.selectionStart}},{key:"cursorPos",get:function(){return this._cursorChanging?this._changingCursorPos:this.el.selectionEnd},set:function(pos){this.el.isActive&&(this.el.select(pos,pos),this._saveSelection())}}]),InputMask}(),MaskedEnum=function(_MaskedPattern){function MaskedEnum(){return _classCallCheck(this,MaskedEnum),_possibleConstructorReturn(this,_getPrototypeOf(MaskedEnum).apply(this,arguments))}return _inherits(MaskedEnum,MaskedPattern),_createClass(MaskedEnum,[{key:"_update",value:function(opts){opts.enum&&(opts.mask="*".repeat(opts.enum[0].length)),_get(_getPrototypeOf(MaskedEnum.prototype),"_update",this).call(this,opts)}},{key:"doValidate",value:function(){for(var _get2,_this=this,_len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return this.enum.some(function(e){return e.indexOf(_this.unmaskedValue)>=0})&&(_get2=_get(_getPrototypeOf(MaskedEnum.prototype),"doValidate",this)).call.apply(_get2,[this].concat(args))}}]),MaskedEnum}(),MaskedNumber=function(_Masked){function MaskedNumber(opts){return _classCallCheck(this,MaskedNumber),_possibleConstructorReturn(this,_getPrototypeOf(MaskedNumber).call(this,_objectSpread({},MaskedNumber.DEFAULTS,opts)))}return _inherits(MaskedNumber,Masked),_createClass(MaskedNumber,[{key:"_update",value:function(opts){_get(_getPrototypeOf(MaskedNumber.prototype),"_update",this).call(this,opts),this._updateRegExps()}},{key:"_updateRegExps",value:function(){var midInput="",mid="";this.allowNegative?(midInput+="([+|\\-]?|([+|\\-]?(0|([1-9]+\\d*))))",mid+="[+|\\-]?"):midInput+="(0|([1-9]+\\d*))",mid+="\\d*";var end=(this.scale?"("+escapeRegExp(this.radix)+"\\d{0,"+this.scale+"})?":"")+"$";this._numberRegExpInput=new RegExp("^"+midInput+end),this._numberRegExp=new RegExp("^"+mid+end),this._mapToRadixRegExp=new RegExp("["+this.mapToRadix.map(escapeRegExp).join("")+"]","g"),this._thousandsSeparatorRegExp=new RegExp(escapeRegExp(this.thousandsSeparator),"g")}},{key:"extractTail",value:function(){var fromPos=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,toPos=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length,tail=_get(_getPrototypeOf(MaskedNumber.prototype),"extractTail",this).call(this,fromPos,toPos);return _objectSpread({},tail,{value:this._removeThousandsSeparators(tail.value)})}},{key:"_removeThousandsSeparators",value:function(value){return value.replace(this._thousandsSeparatorRegExp,"")}},{key:"_insertThousandsSeparators",value:function(value){var parts=value.split(this.radix);return parts[0]=parts[0].replace(/\B(?=(\d{3})+(?!\d))/g,this.thousandsSeparator),parts.join(this.radix)}},{key:"doPrepare",value:function(str){for(var _get2,_len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];return(_get2=_get(_getPrototypeOf(MaskedNumber.prototype),"doPrepare",this)).call.apply(_get2,[this,this._removeThousandsSeparators(str.replace(this._mapToRadixRegExp,this.radix))].concat(args))}},{key:"_separatorsCount",value:function(){for(var value=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._value,rawValueLength=this._removeThousandsSeparators(value).length,valueWithSeparatorsLength=rawValueLength,pos=0;pos<=valueWithSeparatorsLength;++pos)this._value[pos]===this.thousandsSeparator&&++valueWithSeparatorsLength;return valueWithSeparatorsLength-rawValueLength}},{key:"extractInput",value:function(){for(var _get3,_len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];return this._removeThousandsSeparators((_get3=_get(_getPrototypeOf(MaskedNumber.prototype),"extractInput",this)).call.apply(_get3,[this].concat(args)))}},{key:"_appendCharRaw",value:function(ch){var flags=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.thousandsSeparator)return _get(_getPrototypeOf(MaskedNumber.prototype),"_appendCharRaw",this).call(this,ch,flags);var previousBeforeTailSeparatorsCount=this._separatorsCount(flags.tail&&this._beforeTailState?this._beforeTailState._value:this._value);this._value=this._removeThousandsSeparators(this.value);var appendDetails=_get(_getPrototypeOf(MaskedNumber.prototype),"_appendCharRaw",this).call(this,ch,flags);this._value=this._insertThousandsSeparators(this._value);var beforeTailSeparatorsCount=this._separatorsCount(flags.tail&&this._beforeTailState?this._beforeTailState._value:this._value);return appendDetails.tailShift+=beforeTailSeparatorsCount-previousBeforeTailSeparatorsCount,appendDetails}},{key:"remove",value:function(){var fromPos=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,toPos=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length,valueBeforePos=this.value.slice(0,fromPos),valueAfterPos=this.value.slice(toPos),previousBeforeTailSeparatorsCount=this._separatorsCount(valueBeforePos);this._value=this._insertThousandsSeparators(this._removeThousandsSeparators(valueBeforePos+valueAfterPos));var beforeTailSeparatorsCount=this._separatorsCount(valueBeforePos);return new ChangeDetails({tailShift:beforeTailSeparatorsCount-previousBeforeTailSeparatorsCount})}},{key:"nearestInputPos",value:function(cursorPos,direction){if(!direction||direction===DIRECTION_LEFT)return cursorPos;var nextPos=function(pos,direction){return direction===DIRECTION_LEFT&&--pos,pos}(cursorPos,direction);return this.value[nextPos]===this.thousandsSeparator&&(cursorPos=function(pos,direction){switch(direction){case DIRECTION_LEFT:case DIRECTION_FORCE_LEFT:return--pos;case DIRECTION_RIGHT:case DIRECTION_FORCE_RIGHT:return++pos;default:return pos}}(cursorPos,direction)),cursorPos}},{key:"doValidate",value:function(flags){var valid=(flags.input?this._numberRegExpInput:this._numberRegExp).test(this._removeThousandsSeparators(this.value));if(valid){var number=this.number;valid=valid&&!isNaN(number)&&(null==this.min||this.min>=0||this.min<=this.number)&&(null==this.max||this.max<=0||this.number<=this.max)}return valid&&_get(_getPrototypeOf(MaskedNumber.prototype),"doValidate",this).call(this,flags)}},{key:"doCommit",value:function(){var number=this.number,validnum=number;null!=this.min&&(validnum=Math.max(validnum,this.min)),null!=this.max&&(validnum=Math.min(validnum,this.max)),validnum!==number&&(this.unmaskedValue=String(validnum));var formatted=this.value;this.normalizeZeros&&(formatted=this._normalizeZeros(formatted)),this.padFractionalZeros&&(formatted=this._padFractionalZeros(formatted)),this._value=this._insertThousandsSeparators(formatted),_get(_getPrototypeOf(MaskedNumber.prototype),"doCommit",this).call(this)}},{key:"_normalizeZeros",value:function(value){var parts=this._removeThousandsSeparators(value).split(this.radix);return parts[0]=parts[0].replace(/^(\D*)(0*)(\d*)/,function(match,sign,zeros,num){return sign+num}),value.length&&!/\d$/.test(parts[0])&&(parts[0]=parts[0]+"0"),parts.length>1&&(parts[1]=parts[1].replace(/0*$/,""),parts[1].length||(parts.length=1)),this._insertThousandsSeparators(parts.join(this.radix))}},{key:"_padFractionalZeros",value:function(value){if(!value)return value;var parts=value.split(this.radix);return parts.length<2&&parts.push(""),parts[1]=parts[1].padEnd(this.scale,"0"),parts.join(this.radix)}},{key:"unmaskedValue",get:function(){return this._removeThousandsSeparators(this._normalizeZeros(this.value)).replace(this.radix,".")},set:function(unmaskedValue){_set(_getPrototypeOf(MaskedNumber.prototype),"unmaskedValue",unmaskedValue.replace(".",this.radix),this,!0)}},{key:"number",get:function(){return Number(this.unmaskedValue)},set:function(number){this.unmaskedValue=String(number)}},{key:"typedValue",get:function(){return this.number},set:function(value){this.number=value}},{key:"allowNegative",get:function(){return this.signed||null!=this.min&&this.min<0||null!=this.max&&this.max<0}}]),MaskedNumber}();MaskedNumber.DEFAULTS={radix:",",thousandsSeparator:"",mapToRadix:["."],scale:2,signed:!1,normalizeZeros:!0,padFractionalZeros:!1};var MaskedRegExp=function(_Masked){function MaskedRegExp(){return _classCallCheck(this,MaskedRegExp),_possibleConstructorReturn(this,_getPrototypeOf(MaskedRegExp).apply(this,arguments))}return _inherits(MaskedRegExp,Masked),_createClass(MaskedRegExp,[{key:"_update",value:function(opts){opts.mask&&(opts.validate=function(value){return value.search(opts.mask)>=0}),_get(_getPrototypeOf(MaskedRegExp.prototype),"_update",this).call(this,opts)}}]),MaskedRegExp}(),MaskedFunction=function(_Masked){function MaskedFunction(){return _classCallCheck(this,MaskedFunction),_possibleConstructorReturn(this,_getPrototypeOf(MaskedFunction).apply(this,arguments))}return _inherits(MaskedFunction,Masked),_createClass(MaskedFunction,[{key:"_update",value:function(opts){opts.mask&&(opts.validate=opts.mask),_get(_getPrototypeOf(MaskedFunction.prototype),"_update",this).call(this,opts)}}]),MaskedFunction}(),MaskedDynamic=function(_Masked){function MaskedDynamic(opts){var _this;return _classCallCheck(this,MaskedDynamic),(_this=_possibleConstructorReturn(this,_getPrototypeOf(MaskedDynamic).call(this,_objectSpread({},MaskedDynamic.DEFAULTS,opts)))).currentMask=null,_this}return _inherits(MaskedDynamic,Masked),_createClass(MaskedDynamic,[{key:"_update",value:function(opts){_get(_getPrototypeOf(MaskedDynamic.prototype),"_update",this).call(this,opts),"mask"in opts&&(this.compiledMasks=Array.isArray(opts.mask)?opts.mask.map(function(m){return createMask(m)}):[])}},{key:"_appendCharRaw",value:function(){var _this$currentMask,details=this._applyDispatch.apply(this,arguments);return this.currentMask&&details.aggregate((_this$currentMask=this.currentMask)._appendChar.apply(_this$currentMask,arguments)),details}},{key:"_applyDispatch",value:function(){var appended=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",flags=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},prevValueBeforeTail=flags.tail&&this._beforeTailState?this._beforeTailState._value:this.value,inputValue=this.rawInputValue,insertValue=flags.tail&&this._beforeTailState?this._beforeTailState._rawInputValue:inputValue,tailValue=inputValue.slice(insertValue.length),prevMask=this.currentMask,details=new ChangeDetails,prevMaskState=prevMask&&prevMask.state,prevMaskBeforeTailState=prevMask&&prevMask._beforeTailState;if(this.currentMask=this.doDispatch(appended,flags),this.currentMask)if(this.currentMask!==prevMask){this.currentMask.reset();var d=this.currentMask.append(insertValue,{raw:!0});details.tailShift=d.inserted.length-prevValueBeforeTail.length,tailValue&&(details.tailShift+=this.currentMask.append(tailValue,{raw:!0,tail:!0}).tailShift)}else this.currentMask.state=prevMaskState,this.currentMask._beforeTailState=prevMaskBeforeTailState;return details}},{key:"doDispatch",value:function(appended){var flags=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.dispatch(appended,this,flags)}},{key:"doValidate",value:function(){for(var _get2,_this$currentMask2,_len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(_get2=_get(_getPrototypeOf(MaskedDynamic.prototype),"doValidate",this)).call.apply(_get2,[this].concat(args))&&(!this.currentMask||(_this$currentMask2=this.currentMask).doValidate.apply(_this$currentMask2,args))}},{key:"reset",value:function(){this.currentMask&&this.currentMask.reset(),this.compiledMasks.forEach(function(m){return m.reset()})}},{key:"remove",value:function(){var _this$currentMask3,details=new ChangeDetails;return this.currentMask&&details.aggregate((_this$currentMask3=this.currentMask).remove.apply(_this$currentMask3,arguments)).aggregate(this._applyDispatch()),details}},{key:"extractInput",value:function(){var _this$currentMask4;return this.currentMask?(_this$currentMask4=this.currentMask).extractInput.apply(_this$currentMask4,arguments):""}},{key:"extractTail",value:function(){for(var _this$currentMask5,_get3,_len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];return this.currentMask?(_this$currentMask5=this.currentMask).extractTail.apply(_this$currentMask5,args):(_get3=_get(_getPrototypeOf(MaskedDynamic.prototype),"extractTail",this)).call.apply(_get3,[this].concat(args))}},{key:"doCommit",value:function(){this.currentMask&&this.currentMask.doCommit(),_get(_getPrototypeOf(MaskedDynamic.prototype),"doCommit",this).call(this)}},{key:"nearestInputPos",value:function(){for(var _this$currentMask6,_get4,_len3=arguments.length,args=new Array(_len3),_key3=0;_key3<_len3;_key3++)args[_key3]=arguments[_key3];return this.currentMask?(_this$currentMask6=this.currentMask).nearestInputPos.apply(_this$currentMask6,args):(_get4=_get(_getPrototypeOf(MaskedDynamic.prototype),"nearestInputPos",this)).call.apply(_get4,[this].concat(args))}},{key:"value",get:function(){return this.currentMask?this.currentMask.value:""},set:function(value){_set(_getPrototypeOf(MaskedDynamic.prototype),"value",value,this,!0)}},{key:"unmaskedValue",get:function(){return this.currentMask?this.currentMask.unmaskedValue:""},set:function(unmaskedValue){_set(_getPrototypeOf(MaskedDynamic.prototype),"unmaskedValue",unmaskedValue,this,!0)}},{key:"typedValue",get:function(){return this.currentMask?this.currentMask.typedValue:""},set:function(value){var unmaskedValue=String(value);this.currentMask&&(this.currentMask.typedValue=value,unmaskedValue=this.currentMask.unmaskedValue),this.unmaskedValue=unmaskedValue}},{key:"isComplete",get:function(){return!!this.currentMask&&this.currentMask.isComplete}},{key:"state",get:function(){return _objectSpread({},_get(_getPrototypeOf(MaskedDynamic.prototype),"state",this),{_rawInputValue:this.rawInputValue,compiledMasks:this.compiledMasks.map(function(m){return m.state}),currentMaskRef:this.currentMask,currentMask:this.currentMask&&this.currentMask.state})},set:function(state){var compiledMasks=state.compiledMasks,currentMaskRef=state.currentMaskRef,currentMask=state.currentMask,maskedState=_objectWithoutProperties(state,["compiledMasks","currentMaskRef","currentMask"]);this.compiledMasks.forEach(function(m,mi){return m.state=compiledMasks[mi]}),null!=currentMaskRef&&(this.currentMask=currentMaskRef,this.currentMask.state=currentMask),_set(_getPrototypeOf(MaskedDynamic.prototype),"state",maskedState,this,!0)}}]),MaskedDynamic}();function IMask(el){var opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new InputMask(el,opts)}return MaskedDynamic.DEFAULTS={dispatch:function(appended,masked,flags){if(masked.compiledMasks.length){var inputValue=masked.rawInputValue,inputs=masked.compiledMasks.map(function(m,index){return m.rawInputValue=inputValue,m.append(appended,flags),{weight:m.rawInputValue.length,index:index}});return inputs.sort(function(i1,i2){return i2.weight-i1.weight}),masked.compiledMasks[inputs[0].index]}}},IMask.InputMask=InputMask,IMask.Masked=Masked,IMask.MaskedPattern=MaskedPattern,IMask.MaskedEnum=MaskedEnum,IMask.MaskedRange=MaskedRange,IMask.MaskedNumber=MaskedNumber,IMask.MaskedDate=MaskedDate,IMask.MaskedRegExp=MaskedRegExp,IMask.MaskedFunction=MaskedFunction,IMask.MaskedDynamic=MaskedDynamic,IMask.createMask=createMask,IMask.MaskElement=MaskElement,IMask.HTMLMaskElement=HTMLMaskElement,g.IMask=IMask,IMask},module.exports=factory()}).call(this,__webpack_require__(109))}}]);