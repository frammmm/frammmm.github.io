!function(e){function t(t){for(var i,o,s=t[0],l=t[1],c=t[2],d=0,h=[];d<s.length;d++)o=s[d],r[o]&&h.push(r[o][0]),r[o]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);for(u&&u(t);h.length;)h.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],i=!0,s=1;s<n.length;s++){var l=n[s];0!==r[l]&&(i=!1)}i&&(a.splice(t--,1),e=o(o.s=n[0]))}return e}var i={},r={8:0},a=[];function o(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var i=new Promise(function(t,i){n=r[e]=[t,i]});t.push(n[2]=i);var a,s=document.createElement("script");s.charset="utf-8",s.timeout=120,o.nc&&s.setAttribute("nonce",o.nc),s.src=function(e){return o.p+""+({0:"filter~map-search~search-filter",1:"map-search~search-filter",2:"advertise",3:"books",4:"content-search",5:"filter",6:"item-card",7:"landings-zhk",9:"map-search",10:"review-request",11:"search-filter",12:"vendors~filter",14:"vendors~map-search"}[e]||e)+".g70xbb1unx.js"}(e),a=function(t){s.onerror=s.onload=null,clearTimeout(l);var n=r[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src,o=new Error("Loading chunk "+e+" failed.\n("+i+": "+a+")");o.type=i,o.request=a,n[1](o)}r[e]=void 0}};var l=setTimeout(function(){a({type:"timeout",target:s})},12e4);s.onerror=s.onload=a,document.head.appendChild(s)}return Promise.all(t)},o.m=e,o.c=i,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/build-redesign/static/js/",o.oe=function(e){throw e};var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;a.push([261,13]),n()}([,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"y",function(){return i}),n.d(t,"e",function(){return r}),n.d(t,"d",function(){return a}),n.d(t,"z",function(){return o}),n.d(t,"f",function(){return s}),n.d(t,"a",function(){return l}),n.d(t,"b",function(){return c}),n.d(t,"c",function(){return u}),n.d(t,"g",function(){return d}),n.d(t,"h",function(){return h}),n.d(t,"u",function(){return f}),n.d(t,"v",function(){return m}),n.d(t,"p",function(){return p}),n.d(t,"n",function(){return v}),n.d(t,"o",function(){return y}),n.d(t,"q",function(){return g}),n.d(t,"r",function(){return b}),n.d(t,"t",function(){return w}),n.d(t,"m",function(){return k}),n.d(t,"w",function(){return C}),n.d(t,"x",function(){return S}),n.d(t,"s",function(){return _}),n.d(t,"l",function(){return A}),n.d(t,"k",function(){return E}),n.d(t,"i",function(){return L}),n.d(t,"j",function(){return T});var i=[0,32],r=13,a=40,o=38,s=27,l="BARBA_CHANGE",c="COMPLEXES_INIT",u="DEVELOPER_MAP_FETCH_SUCCESS",d="MAP_SEARCH_FETCH_SUCCESS",h="MAP_SEARCH_FULLSCREEN_TOGGLE",f="SEARCH_RENDER",m="SEARCH_REQUEST_RENDER",p="SEARCH_MAP_OPEN",v="SEARCH_MAP_FETCH_SUCCESS",y="SEARCH_MAP_MODAL_FETCH_SUCCESS",g="SEARCH_MAP_REGION_FETCH_REQUEST",b="SEARCH_MAP_REGION_FETCH_SUCCESS",w="SEARCH_PAGINATION_RENDER",k="SEARCH_INFINITE_PAGINATION_RENDER",C="SEARCH_RESET",S="SEARCH_TAG_REMOVE",_="SEARCH_MODAL_BRANCH_CHANGE",A="SEARCH_GEO_INPUTS_BOOTSTRAP",E="PLACEMENT_MAP_OBJECT_CLICK",L="MAP_SEARCH_PLACEMARK_EVENTS",T="PANORAMA_NOT_FOUND"},,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return l});n(2),n(6),n(7),n(3),n(38),n(73),n(25),n(0),n(77),n(1),n(4),n(76),n(35),n(5);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r=Object.prototype.hasOwnProperty,a=function(e,t){t=t||"";var n,i,a=[];for(i in"string"!=typeof t&&(t="?"),e)r.call(e,i)&&((n=e[i])||null!=n&&!isNaN(n)||(n=""),a.push(encodeURIComponent(i)+"="+encodeURIComponent(n)));return a.length?t+a.join("&"):""},o=/^(?:submit|button|image|reset|file)$/i,s=/^(?:input|select|textarea|keygen)/i,l=function(e,t){"object"!=i(t)?t={hash:!!t}:t.hash||(t.hash=!0);for(var n=t.hash?{}:"",r=t.serializer||(t.hash?c:u),a=e&&e.elements?e.elements:[],l=Object.create(null),d=0;d<a.length;++d){var h=a[d];if((t.disabled||!h.disabled)&&h.name&&(s.test(h.nodeName)&&!o.test(h.type))){var f=h.name,m=void 0;if(h.classList.contains("range-block-n-2__input-before")||h.classList.contains("range-block-n-2__input-after")){var p=h.closest(".range-block-n-2");p&&p.RangeSelect&&p.RangeSelect.trueValues?h.classList.contains("range-block-n-2__input-before")?m=h.hasAttribute("data-number-thousands")?h.value:p.RangeSelect.trueValues.inputBefore:h.classList.contains("range-block-n-2__input-after")&&(m=h.hasAttribute("data-number-thousands")?h.value:p.RangeSelect.trueValues.inputAfter):m=h.mask?h.mask.unmaskedValue:h.value}else m=h.mask?h.mask.unmaskedValue:h.value;if("checkbox"!==h.type&&"radio"!==h.type||h.checked||(m=void 0),t.empty){if("checkbox"!==h.type||h.checked||(m=""),"radio"===h.type&&(l[h.name]||h.checked?h.checked&&(l[h.name]=!0):l[h.name]=!1),!m&&"radio"===h.type)continue}else if(!m)continue;if("select-multiple"!==h.type)n=r(n,f,m);else{m=[];for(var v=h.options,y=!1,g=0;g<v.length;++g){var b=v[g],w=t.empty&&!b.value,k=b.value||w;b.selected&&k&&(y=!0,n=t.hash&&"[]"!==f.slice(f.length-2)?r(n,f+"[]",b.value):r(n,f,b.value))}!y&&t.empty&&(n=r(n,f,""))}}}if(t.empty)for(var C in l)l[C]||(n=r(n,C,""));return n};function c(e,t,n){var i=e[t];return i?(Array.isArray(i)||(e[t]=[i]),e[t].push(n)):e[t]=n,e}function u(e,t,n){return n=n.replace(/(\r)?\n/g,"\r\n"),n=(n=encodeURIComponent(n)).replace(/%20/g,"+"),e+(e?"&":"")+encodeURIComponent(t)+"="+n}},,,,function(e,t,n){"use strict";n.d(t,"a",function(){return o});n(2),n(6),n(7),n(8),n(3),n(12),n(0),n(1),n(4),n(5);function i(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.numberLink=t,this.numberLink.PhoneNumber||(this.numberLink.PhoneNumber=!0,this.numberBlock=this.numberLink.querySelector(".phone-number-n-2__number"),this.onNumberClick=this.onNumberClick.bind(this),this.bindEvents())}return a(e,null,[{key:"init",value:function(){return i((arguments.length>0&&void 0!==arguments[0]?arguments[0]:document).querySelectorAll(".phone-number-n-2")).map(function(t){return new e(t)})}}]),a(e,[{key:"bindEvents",value:function(){this.numberLink.addEventListener("click",this.onNumberClick)}},{key:"onNumberClick",value:function(e){if(this.numberBlock.querySelector("span")){e.preventDefault();var t=this.numberLink.getAttribute("data-tel");this.numberBlock.innerText=t,this.numberLink.href="tel: ".concat(t)}this.numberLink.removeEventListener("click",this.onNumberClick)}}]),e}()},,,,function(e,t,n){"use strict";n.d(t,"a",function(){return a});n(77),n(1),n(76),n(35);function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"init",value:function(){return new e}}]),r(e,[{key:"getCookie",value:function(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([.$?*|{}()[\]\\\/+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):null}},{key:"setCookie",value:function(e,t,n){var i=(n=n||{}).expires;if("number"==typeof i&&i){var r=new Date;r.setTime(r.getTime()+1e3*i),i=n.expires=r}i&&i.toUTCString&&(n.expires=i.toUTCString());var a=e+"="+(t=encodeURIComponent(t));for(var o in n)if(o){a+="; "+o;var s=n[o];!0!==s&&(a+="="+s)}document.cookie=a}}]),e}()},,,function(e,t,n){"use strict";n.d(t,"a",function(){return l});n(2),n(6),n(7),n(17),n(58),n(8),n(3),n(70),n(61),n(0),n(1),n(4),n(9),n(5);var i=n(86);function r(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var s={container:document,triggers:[],triggersSelector:".modal-n-2",modal:{}},l=function(){var e,t,n;function l(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),this.element=e,this.modal=new i.a.Modal(this.element,t.modal||{}),this.element.Modal=this.modal}return e=l,n=[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return((e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){a(e,t,n[t])})}return e}({},s,e)).triggers.length?e.triggers:r(e.container.querySelectorAll(e.triggersSelector))).forEach(function(t){t.Modal||new l(t,e)})}}],(t=null)&&o(e.prototype,t),n&&o(e,n),l}()},,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return l});n(2),n(6),n(7),n(8),n(3),n(0),n(1),n(4),n(9),n(5);var i=n(199),r=n(60);function a(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}var l=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t,this.elements=n?[n]:a(this.container.querySelectorAll("[data-tip]:not([data-manual-init])")),this.initedElements=[],this.tooltipsContainer=document.querySelector(".tooltip-wrapper"),this.init()}return s(e,null,[{key:"init",value:function(){return new e(arguments.length>0&&void 0!==arguments[0]?arguments[0]:document)}}]),s(e,[{key:"init",value:function(){var e=this;this.tooltipsContainer||(this.tooltipsContainer=document.createElement("div"),this.tooltipsContainer.className="tooltip-wrapper",document.body.appendChild(this.tooltipsContainer)),this.elements.forEach(function(t){var n=t.hasAttribute("data-hover-update"),a=t.hasAttribute("data-touch-device"),o=new i.a(t,{container:e.tooltipsContainer,delay:+t.getAttribute("data-hide-delay")||0,html:!0,modifiers:{flip:{behavior:["left","right","bottom"]}},innerSelector:".tooltip-n-2__inner",template:'\n          <div class="tooltip-n-2 '.concat(t.getAttribute("data-classes")||"",'">\n            <div class="tooltip-n-2__container">\n              <div class="tooltip-n-2__arrow"></div>\n              <div class="tooltip-n-2__inner"></div>\n            </div>\n          </div>\n        '),placement:t.getAttribute("data-placement")||"top",title:t.getAttribute("data-tip")||t.querySelector("[data-tip-content]").innerHTML,trigger:a?Object(r.a)()?"click":"hover focus":Object(r.a)()?"":"hover focus",popperOptions:{eventsEnabled:!1}});n&&t.addEventListener("mouseenter",function(){o.updateTitleContent(t.getAttribute("data-tip")||t.querySelector("[data-tip-content]").innerHTML)}),t.Tooltip=o,e.initedElements.push(t)})}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return i});n(9);var i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.elements,n=e.observerMargin,i=e.onLoad,r=void 0===i?function(e){return e}:i,a=e.scriptSrc,o=e.scriptUniqueSelector,s=function(){if(!o||o&&!document.querySelector('script[src*="'.concat(o,'"]'))){var e=document.createElement("script");e.src=a,document.body.appendChild(e)}r()};if(window.IntersectionObserver){var l={};n&&(l.rootMargin=n+"px");var c=new IntersectionObserver(function(e,t){e.some(function(e){return e.isIntersecting})&&(s(),t.disconnect())},l);t.forEach(function(e){return c.observe(e)})}else s()}},,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return s});n(2),n(6),n(7),n(24),n(8),n(3),n(0),n(37),n(1),n(4),n(5);var i=n(67),r=n(10);function a(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var s=function(){function e(t,n){var r=n.linkClass,a=n.tabsClass,o=n.callback,s=void 0===o?function(e){return e}:o,l=n.line,c=n.beforeChange,u=void 0===c?function(e){return e}:c,d=n.afterChange,h=void 0===d?function(e){return e}:d;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.classes={heading:{active:"".concat(r,"_is_active"),item:"".concat(r)},content:{active:"".concat(a,"_is_active"),show:"".concat(a,"_is_show"),item:"".concat(a)}},this.state={activeLink:null,activeTab:null,prevTab:null,prevLink:null},this.links=t,this.line=l?new i.a({line:l,buttons:this.links,bindClick:!0}):null,this.beforeChange=u,this.afterChange=h,this.callback=s}var t,n,s;return t=e,(n=[{key:"init",value:function(){this.handlers()}},{key:"handlers",value:function(){var e=this;this.tabs=a(this.links).reduce(function(t,n){var i=n.getAttribute("href");if(i){var r=document.querySelector(i);return r&&t.push(r),n.addEventListener("click",function(t){t.preventDefault();var i=e.beforeChange(n,r);i?Promise.resolve(i).then(function(){e.toggleTab(n,r),e.callback(n,r)}):(e.toggleTab(n,r),e.callback(n,r))}),t}},[]),this.state.activeLink=this.links.find(function(t){return t.classList.contains(e.classes.heading.active)}),this.state.activeTab=this.tabs.find(function(t){return t.classList.contains(e.classes.content.active)}),this.state.prevLink=this.state.activeLink,this.state.prevTab=this.state.activeTab}},{key:"toggleTab",value:function(e,t){t&&(this.activeLink=e,this.activeTab=t)}},{key:"setActiveTab",value:function(e){var t=this;this.state.prevTab=this.state.activeTab,this.state.activeTab=e,this.state.activeTab.classList.add(this.classes.content.active),r.c.fromTo(this.state.activeTab,.25,{opacity:0,y:10},{opacity:1,y:0,onComplete:function(){t.state.activeTab.classList.add(t.classes.content.show)}})}},{key:"activeLink",set:function(e){this.state.activeLink&&this.state.activeLink.classList.remove(this.classes.heading.active),this.state.prevLink=this.state.activeLink,this.state.activeLink=e,this.state.activeLink.classList.add(this.classes.heading.active)},get:function(){return this.state.activeLink}},{key:"activeTab",set:function(e){var t=this;this.state.activeTab?(this.state.activeTab.classList.remove(this.classes.content.show),r.c.to(this.state.activeTab,.3,{opacity:0,y:10,onComplete:function(){t.state.activeTab.classList.remove(t.classes.content.active),t.setActiveTab(e),t.afterChange(e)}})):this.setActiveTab(e)},get:function(){return this.state.activeTab}}])&&o(t.prototype,n),s&&o(t,s),e}()},function(e,t,n){"use strict";n.d(t,"d",function(){return i}),n.d(t,"e",function(){return r}),n.d(t,"c",function(){return a}),n.d(t,"b",function(){return o}),n.d(t,"h",function(){return s}),n.d(t,"f",function(){return l}),n.d(t,"g",function(){return c}),n.d(t,"a",function(){return u}),n.d(t,"i",function(){return d});n(12),n(35);var i=function(){return"localhost"===window.location.hostname},r=function(){return window.location.href.indexOf("/build-redesign/")>-1},a=function(e){var t=document.createElement("div");return t.innerHTML=e,t.firstChild},o=function(e){return e.replace(".",",")},s=function(e){var t=document.createElement("a");return t.href=e,t},l={1:"Январь",2:"Февраль",3:"Март",4:"Апрель",5:"Май",6:"Июнь",7:"Июль",8:"Август",9:"Сентябрь",10:"Октябрь",11:"Ноябрь",12:"Декабрь"},c=function(e){"complete"===document.readyState?e():window.addEventListener("load",function(){return e()})},u=function(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0},d=function(e){return e.map(function e(t){return Array.isArray(t)&&(Array.isArray(t[0])?t.map(e):t.reverse())})}},function(e,t,n){"use strict";n.d(t,"a",function(){return s});n(2),n(6),n(7),n(8),n(45),n(3),n(12),n(98),n(0),n(1),n(88),n(4),n(9),n(5);var i=n(31);function r(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.favoriteButtons=r(t.querySelectorAll("[data-favorite]:not([data-favorite-inited])")),this.favoriteButtons.forEach(function(e){return e.setAttribute("data-favorite-inited","")}),this.favoriteTexts=this.favoriteButtons.map(function(e){return e.querySelector("[data-favorite-text]")}),this.favoriteLinkHeader=document.querySelector(".main-nav-n-2__add-link-favorites"),this.favoriteIconHeader=this.favoriteLinkHeader?this.favoriteLinkHeader.querySelector("svg"):null,this.favoriteCountHeader=this.favoriteLinkHeader?this.favoriteLinkHeader.querySelector(".main-nav-n-2__count-tag"):null,this.cookie=new i.a,this.findFavorites(),this.bindEvents(),this.bootstrapText()}return o(e,null,[{key:"init",value:function(){return new e(arguments.length>0&&void 0!==arguments[0]?arguments[0]:document)}}]),o(e,[{key:"bindEvents",value:function(){var e=this;this.favoriteButtons.forEach(function(t,n){return t.addEventListener("click",function(t){t.preventDefault();var i=t.currentTarget;e.favoriteAction(i,e.favoriteTexts[n])})})}},{key:"bootstrapText",value:function(){var e=this;this.favoriteTexts.forEach(function(t,n){if(t){var i=e.favoriteButtons[n].getAttribute("data-favorite");t.innerText="active"===i?"Убрать из избранного":"Добавить в избранное"}})}},{key:"favoritesCount",value:function(){var e=this.cookie.getCookie("favorites");return e?(this.favoritesArray=JSON.parse(e),this.favoritesArray.length):(this.favoritesArray=[],0)}},{key:"favoriteCheck",value:function(e){return!!(this.favoritesArray&&this.favoritesArray.length&&this.favoritesArray.includes(e))}},{key:"findFavorites",value:function(){var e=this,t=this.favoritesCount();this.favoriteButtons.forEach(function(t){e.favoriteCheck(t.getAttribute("data-id"))?t.setAttribute("data-favorite","active"):t.setAttribute("data-favorite","")}),this.favoriteLinkHeader&&(t?(this.favoriteLinkHeader.classList.add("is-active"),this.favoriteCountHeader=this.favoriteLinkHeader.querySelector(".main-nav-n-2__count-tag"),this.favoriteCountHeader||(this.favoriteCountHeader=document.createElement("div"),this.favoriteCountHeader.className="main-nav-n-2__count-tag",this.favoriteLinkHeader.appendChild(this.favoriteCountHeader)),this.favoriteCountHeader.innerHTML=t):(this.favoriteLinkHeader.classList.remove("is-active"),this.favoriteCountHeader&&this.favoriteCountHeader.remove()))}},{key:"favoriteAction",value:function(e,t){var n=e.getAttribute("data-id");if(!n)return!1;var i,r=this.cookie.getCookie("favorites");r&&(i=JSON.parse(r));var a={expires:new Date((new Date).getTime()+31536e6).toUTCString(),path:"/",domain:location.hostname};if("active"===e.getAttribute("data-favorite")){if(e.setAttribute("data-favorite",""),t&&(t.innerText="Добавить в избранное"),i&&i.length){var o=i.indexOf(n);-1!==o&&(i.splice(o,1),i=JSON.stringify(i),this.cookie.setCookie("favorites",i,a))}this.findFavorites()}else e.setAttribute("data-favorite","active"),t&&(t.innerText="Убрать из избранного"),i&&i.length?-1===i.indexOf(n)&&(i.push(n.toString()),i=JSON.stringify(i),this.cookie.setCookie("favorites",i,a)):this.cookie.setCookie("favorites",'["'.concat(n,'"]'),a),this.findFavorites()}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});n(2),n(6),n(7),n(24),n(8),n(45),n(3),n(12),n(73),n(98),n(0),n(1),n(88),n(4),n(9),n(5);var i=n(31);function r(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.compareButtons=r(t.querySelectorAll("[data-compare-n-2]:not([data-compare-inited])")),this.compareButtons.forEach(function(e){return e.setAttribute("data-compare-inited","")}),this.compareTexts=this.compareButtons.map(function(e){return e.querySelector("[data-compare-n-2]")}),this.compareLinkHeader=document.querySelector(".main-nav-n-2__add-link-compare"),this.compareIconHeader=this.compareLinkHeader?this.compareLinkHeader.querySelector("svg"):null,this.compareCountHeader=this.compareLinkHeader?this.compareLinkHeader.querySelector(".main-nav-n-2__count-tag"):null,this.cookie=new i.a,this.count(),this.bindEvents(),this.bootstrapText()}return o(e,null,[{key:"init",value:function(){return new e(arguments.length>0&&void 0!==arguments[0]?arguments[0]:document)}}]),o(e,[{key:"bindEvents",value:function(){var e=this;this.compareButtons.forEach(function(t,n){return t.addEventListener("click",function(t){t.preventDefault();var i=t.currentTarget;e.action(i,e.compareTexts[n])})}),this.compareLinkHeader&&this.compareLinkHeader.addEventListener("mousedown",function(t){t.preventDefault(),e.setLink()})}},{key:"bootstrapText",value:function(){var e=this;this.compareTexts.forEach(function(t,n){if(t){var i=e.compareButtons[n].getAttribute("data-compare-n-2");t.innerText="active"===i?"Убрать из избранного":"Добавить в избранное"}})}},{key:"comparesCount",value:function(){var e=this.cookie.getCookie("compare");return e?(this.comparesArray=JSON.parse(e),this.comparesArray.length):(this.comparesArray=[],0)}},{key:"compareCheck",value:function(e){return!!(this.comparesArray&&this.comparesArray.length&&this.comparesArray.find(function(t){return t.includes(e)}))}},{key:"addToCookies",value:function(e){var t=this.cookie.getCookie("compare"),n=t?JSON.parse(t):null,i={expires:new Date((new Date).getTime()+31536e6).toUTCString(),path:"/",domain:location.hostname};n?-1===n.indexOf(e)&&(n.push(e),this.cookie.setCookie("compare",JSON.stringify(n),i)):this.cookie.setCookie("compare",'["'.concat(e,'"]'),i)}},{key:"removeFromCookies",value:function(e){var t=this.cookie.getCookie("compare"),n=t?JSON.parse(t):null,i={expires:new Date((new Date).getTime()+31536e6).toUTCString(),path:"/",domain:location.hostname};n&&-1!==n.indexOf(e)&&(n.splice(n.indexOf(e),1),this.cookie.setCookie("compare",JSON.stringify(n),i))}},{key:"action",value:function(e,t){var n=e,i=n.getAttribute("data-type"),r=n.getAttribute("data-id"),a=r+"&"+i;if(!r||!i)throw new ReferenceError("Button data is undefined!","compare.js");"active"===n.getAttribute("data-compare-n-2")?(n.setAttribute("data-compare-n-2",""),t&&(t.innerText="Добавить к сравнению"),this.removeFromCookies(a),this.count()):(n.setAttribute("data-compare-n-2","active"),t&&(t.innerText="Убрать из сравнения"),this.addToCookies(a),this.count())}},{key:"count",value:function(){var e=this,t=this.comparesCount();this.compareButtons.forEach(function(t){e.compareCheck(t.getAttribute("data-id"))?t.setAttribute("data-compare-n-2","active"):t.setAttribute("data-compare-n-2","")}),this.compareLinkHeader&&(t?(this.compareLinkHeader.classList.add("is-active"),this.compareCountHeader=this.compareLinkHeader.querySelector(".main-nav-n-2__count-tag"),this.compareCountHeader||(this.compareCountHeader=document.createElement("div"),this.compareCountHeader.className="main-nav-n-2__count-tag",this.compareLinkHeader.appendChild(this.compareCountHeader)),this.compareCountHeader.innerHTML=t):(this.compareLinkHeader.classList.remove("is-active"),this.compareCountHeader&&this.compareCountHeader.remove()))}},{key:"setLink",value:function(){var e=this.compareLinkHeader?this.compareLinkHeader:null;if(0!==this.checkCookies()&&"/compare/"!==window.location.pathname||!e){if(this.checkCookies()>0){var t=JSON.parse(this.cookie.getCookie("compare")),n="",i="";t.forEach(function(e){var t=e,r=t.indexOf("&"),a=t.slice(0,r),o=t.slice(r+1);"cottages"===o&&(n=n.length?a+","+n:a+"&type="+o),"new_buildings"===o&&(i=i.length?a+","+i:a+"&type="+o)}),e&&(n.length&&i.length?e.setAttribute("href","/compare/"):i.length?e.setAttribute("href","/compare/?ids="+i):n.length&&e.setAttribute("href","/compare/?ids="+n))}}else e.setAttribute("href","/compare/")}},{key:"cookies",get:function(){return JSON.parse(this.cookie.getCookie("compare"))}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return l});n(2),n(6),n(7),n(17),n(8),n(3),n(0),n(1),n(4),n(9),n(5);var i=n(16),r=n.n(i);function a(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}var l=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{lazy:!0,initDelay:0};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,this.initDelay=i.initDelay,this.lazy=i.lazy,this.arrows={next:this.element.querySelector(".complex-item-slider__arrow_next"),prev:this.element.querySelector(".complex-item-slider__arrow_prev")},this.lazy?(this.intersectionObserver=new IntersectionObserver(function(e){return n.handleIntersection(e)}),this.intersectionObserver.observe(this.element)):this.init()}return s(e,null,[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,n=arguments.length>1?arguments[1]:void 0;return a(t.querySelectorAll(".complex-item-slider")).forEach(function(t,i){return new e(t,n)})}},{key:"update",value:function(e){var t=a(e.querySelectorAll(".complex-item-slider"));if(t.length){var n=new IntersectionObserver(function(e){return function(e){e.forEach(function(e){e.isIntersecting&&(e.target.swiper.update(),n.unobserve(e.target))})}(e)});t.forEach(function(e){e.swiper&&n.observe(e)})}}}]),s(e,[{key:"init",value:function(){var e=this,t=function(){var t={slidesPerView:1,loop:!0,nested:!0,navigation:{nextEl:e.arrows.next,prevEl:e.arrows.prev},lazy:{loadPrevNext:!0}};e.element.hasAttribute("data-pagination")&&(t.pagination={el:".js-item-slider-pagination",type:"fraction",renderFraction:function(e,t){return'<span class="'.concat(e,' pagination-current"></span> / <span class="').concat(t,' pagination-total"></span>')}}),e.swiper=new r.a(e.element,t),e.element.swiper=e.swiper};this.initDelay?setTimeout(function(){return t()},this.initDelay):t()}},{key:"handleIntersection",value:function(e){e[0].isIntersecting&&(this.init(),this.intersectionObserver.disconnect())}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(e,t){var n=e.templateLayoutFactory.createClass('<div class="zoom-controls">\n      <button id="zoom-in" class="ymaps-control__button is-squared">\n        <svg width="14" height="14" viewBox="0 0 11 11" xmlns="http://www.w3.org/2000/svg">\n          <path d="M9.72 4.84H6.16V1.3c0-.16-.22-.51-.66-.51-.44 0-.66.35-.66.51v3.54H1.28c-.16 0-.51.22-.51.66 0 .44.35.66.51.66h3.56V9.7c0 .16.22.52.66.52.44 0 .66-.36.66-.52V6.16h3.56c.16 0 .51-.22.51-.66 0-.44-.35-.66-.51-.66z" fill="#071321"/>\n        </svg>\n      </button>\n      <button id="zoom-out" class="ymaps-control__button is-squared">\n        <svg width="14" height="3" viewBox="0 0 14 3" xmlns="http://www.w3.org/2000/svg">\n          <path d="M12.96 2.1H1.37c-.23 0-.7-.3-.7-.9 0-.61.47-.91.7-.91h11.59c.22 0 .7.3.7.9 0 .6-.48.9-.7.9z" fill="#071321"/>\n        </svg>\n      </button>\n    </div>',{build:function(){var e=this;n.superclass.build.call(this);var t=this.getData().control.getMap();t.container.getContainerElement().querySelector("#zoom-in").addEventListener("click",function(){return e.zoomIn(e)}),t.container.getContainerElement().querySelector("#zoom-out").addEventListener("click",function(){return e.zoomOut(e)})},clear:function(){var e=this,t=this.getData().control.getMap();t.container.getContainerElement().querySelector("#zoom-in").addEventListener("click",function(){return e.zoomIn(e)}),t.container.getContainerElement().querySelector("#zoom-out").addEventListener("click",function(){return e.zoomOut(e)}),n.superclass.clear.call(this)},zoomIn:function(){var e=this.getData().control.getMap();e.setZoom(e.getZoom()+1,{checkZoomRange:!0})},zoomOut:function(){var e=this.getData().control.getMap();e.setZoom(e.getZoom()-1,{checkZoomRange:!0})}});return new e.control.ZoomControl({options:{layout:n,position:t}})}},function(e,t,n){"use strict";n(2),n(6),n(7),n(8),n(3),n(12),n(0),n(1),n(4),n(5);var i=n(33),r=n.n(i),a=n(10),o=n(100);function s(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}var u=function(){function e(t){var n=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t.accordion&&(t.accordion=this,this.element=t,this.id=t.getAttribute("data-accordion"),this.previewMode=t.hasAttribute("data-accordion-preview"),this.body=document.getElementById(this.id),this.body)){if(this.opened=this.body.getAttribute("data-opened-default")||!1,this.responsive=t.getAttribute("data-responsive"),this.onCloseTarget=t.getAttribute("data-on-close-target"),this.parentTarget=t.getAttribute("data-accordion-parent"),this.parentTarget&&(this.parentNode=t.closest(this.parentTarget)),this.body.classList.contains("accordion-n-2")||(this.body.classList.add("accordion-n-2"),this.body.classList.add("accordion-n-2_preview")),this.previewMode&&(this.body.classList.contains("accordion-n-2_preview")||this.body.classList.add("accordion-n-2_preview"),this.element.style.display&&(this.onPreviewModeResize(),window.addEventListener("resize",Object(o.a)(function(){n.onPreviewModeResize()},100)))),this.textElement=t.hasAttribute("data-accordion-text")?t:t.querySelector("[data-accordion-text]"),this.textElement&&(this.text={default:this.element.innerText,alt:"Свернуть"}),this.opened&&!this.previewMode)this.body.style.height="auto",this.textElement&&(this.element.innerText=this.text.alt);else if(this.previewMode){parseFloat(window.getComputedStyle(this.body).maxHeight)>=this.body.scrollHeight&&(this.element.style.display="none")}else this.body.style.height=0;switch(this.responsive){case"desktop-open":this.onDesktopToggle(),window.addEventListener("resize",this.onDesktopToggle.bind(this))}this.element.addEventListener("click",function(e){e.preventDefault(),n.opened?n.close():n.open(),n.opened=!n.opened}),this.moveTo=new r.a}}return c(e,null,[{key:"init",value:function(){return s((arguments.length>0&&void 0!==arguments[0]?arguments[0]:document).querySelectorAll("[data-accordion]")).map(function(t){return new e(t)})}}]),c(e,[{key:"close",value:function(){var e=this,t=function(){e.textElement&&(e.textElement.innerText=e.text.default),e.element.removeAttribute("data-accordion-shown"),e.body.removeAttribute("data-accordion-shown"),e.opened=!1};this.body.classList.remove("accordion-n-2_open"),this.parentNode&&(this.parentNode.classList.remove("is-accordion-open"),this.parentNode.classList.add("is-accordion-collapsed")),this.previewMode?a.c.to(this.body,.5,{maxHeight:this.previewInitialHeight,onComplete:function(){e.body.style.maxHeight="",t()}}):a.c.to(this.body,.5,{height:0,onComplete:t}),this.onCloseTarget&&this.moveTo.move(this.onCloseTarget,{duration:500})}},{key:"open",value:function(){var e=this,t=function(){e.textElement&&(e.text.default=e.textElement.innerText,e.textElement.innerText=e.text.alt),e.element.setAttribute("data-accordion-shown",""),e.body.classList.add("accordion-n-2_open"),e.opened=!0};this.previewMode?(this.previewInitialHeight=parseFloat(window.getComputedStyle(this.body).maxHeight),a.c.fromTo(this.body,.5,{maxHeight:this.previewInitialHeight},{maxHeight:this.body.scrollHeight,onComplete:t})):(this.body.style.height="auto",this.parentNode&&(this.parentNode.classList.remove("is-accordion-collapsed"),this.parentNode.classList.add("is-accordion-open")),a.c.from(this.body,.5,{height:0,onComplete:t}))}},{key:"onDesktopToggle",value:function(){document.documentElement.clientWidth<768?this.opened&&this.close():this.opened||this.open()}},{key:"onPreviewModeResize",value:function(){var e=parseFloat(window.getComputedStyle(this.body).maxHeight),t=this.body.scrollHeight;this.setTriggerVisibility(t>e)}},{key:"setTriggerVisibility",value:function(e){this.element.style.display=e?"":"none"}}]),e}();t.a=u},function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return r});n(17),n(0),n(1),n(35);var i=function(e){return e?e.toString().replace(/\s/g,"").replace(/\B(?=(\d{3})+(?!\d))/g," "):e},r=function(e){return e?(e<1e6?(t=e/1e3,n="тыс. ₽"):(t=e/1e6,n="млн. ₽"),"".concat(+(Math.round(t+"e+1")+"e-1")," ").concat(n)):e;var t,n}},,function(e,t,n){"use strict";n.d(t,"c",function(){return r}),n.d(t,"b",function(){return a}),n.d(t,"a",function(){return o});n(2),n(6),n(7),n(3),n(38),n(12),n(115),n(0),n(77),n(1),n(4),n(76),n(35),n(9),n(5);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var r=function(e){var t={};return e.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(e,n,i){t[n]=i}),t},a=function(e){var t=new FormData;return Object.entries(e).forEach(function(e){var n=i(e,2),r=n[0],a=n[1];t.append(r,a)}),t},o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";return e&&Array.isArray(e)?e.map(function(e){return encodeURIComponent(e)}).join(t):e}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});n(38),n(46);var i=function(){return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)||window.matchMedia(["("," -webkit- -moz- -o- -ms- ".split(" ").join("touch-enabled),("),"heartz",")"].join("")).matches}},,function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(e,t,n){return(e=Math.abs(e)%100)>4&&e<21||(e%=10)>4||0===e?t+n[0]:e>1?t+n[1]:t+n[2]}},,,function(e,t,n){"use strict";n.d(t,"a",function(){return s});n(2),n(6),n(7),n(8),n(3),n(0),n(1),n(4),n(91),n(9),n(5);var i=n(48),r=n.n(i);n(257);function a(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var s=function(){var e,t,n;function i(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var t=e.getAttribute("data-element-opening");if(lightGallery(e,{selector:"this",counter:!1,iframeMaxWidth:"90%",videoMaxWidth:"90%",hash:!1,zoom:!0,scale:1.2,download:!1,height:"100%",fullScreen:!0}),window.location.search){var n=r.a.parse(window.location.search);n.openPopup&&t===n.openPopup&&e.click()}}return e=i,n=[{key:"init",value:function(){a((arguments.length>0&&void 0!==arguments[0]?arguments[0]:document).querySelectorAll("[data-element-opening]")).forEach(function(e){return new i(e)})}}],(t=null)&&o(e.prototype,t),n&&o(e,n),i}()},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ymaps,n=void 0===t?null:t,i=e.position,r=void 0===i?{}:i,a=e.disableClickPropogation,o=void 0===a||a;if(n){var s=n.templateLayoutFactory.createClass('\n    <div class="fullscreen-control">\n      <button id="ymaps-fullscreen" class="ymaps-control__button is-squared">\n        [if state.fullscreen] \n          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n            <polyline points="4 14 10 14 10 20"></polyline>\n            <polyline points="20 10 14 10 14 4"></polyline>\n            <line x1="14" y1="10" x2="21" y2="3"></line>\n            <line x1="3" y1="21" x2="10" y2="14"></line>\n          </svg>\n        [else]\n          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n            <polyline points="15 3 21 3 21 9"></polyline>\n            <polyline points="9 21 3 21 3 15"></polyline>\n            <line x1="21" y1="3" x2="14" y2="10"></line>\n            <line x1="3" y1="21" x2="10" y2="14"></line>\n          </svg>\n        [endif]\n      </button>\n    </div>'),l=new n.control.FullscreenControl({options:{layout:s,position:r}});return o&&l.events.add("click",function(e){e._sourceEvent.originalEvent.domEvent.originalEvent.preventDefault()}),l}}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});n(12);function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&t.line&&(this.line=t.line,this.buttons=t.buttons&&t.buttons.length?t.buttons:null,this.state={activeButton:null,lineWidth:0,linePos:0},this.buttons&&t.bindClick&&(this.activeButton=this.buttons[0],this.move(this.state.activeButton),this.bindHandlers()))}var t,n,r;return t=e,(n=[{key:"update",value:function(){this.move(this.state.activeButton)}},{key:"move",value:function(e){var t=this,n=this.state.linePos,i=e.offsetLeft,r=e.clientWidth;i>this.state.linePos?(this.state.lineWidth=i-n+r,this.updateLineStyle(),this.state.linePos=i,this.state.lineWidth=r,setTimeout(function(){return t.updateLineStyle()},300)):(this.state.lineWidth=r+n-i,this.state.linePos=i,this.updateLineStyle(),this.state.lineWidth=r,setTimeout(function(){return t.updateLineStyle()},300))}},{key:"updateLineStyle",value:function(){this.line.style.width="".concat(this.state.lineWidth,"px"),this.line.style.left="".concat(this.state.linePos,"px")}},{key:"bindHandlers",value:function(){var e=this;this.buttons.map(function(t){t.addEventListener("click",function(n){n.preventDefault(),e.activeButton=t,e.move(t)})})}},{key:"activeButton",set:function(e){this.state.activeButton&&this.state.activeButton.removeAttribute("data-active"),this.state.activeButton=e,this.state.activeButton.setAttribute("data-active","")}}])&&i(t.prototype,n),r&&i(t,r),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});n(2),n(6),n(7),n(24),n(8),n(3),n(12),n(0),n(1),n(4),n(5);var i=n(13),r=n.n(i),a=n(59);function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function l(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,this.buttons=o(t.querySelectorAll(".review-vote")),this.count=t.querySelector(".review-vote__count"),this.bindHandlers()}return l(e,null,[{key:"init",value:function(){return o((arguments.length>0&&void 0!==arguments[0]?arguments[0]:document).querySelectorAll(".voting")).map(function(t){return new e(t)})}}]),l(e,[{key:"bindHandlers",value:function(){var e=this;this.buttons.map(function(t){t.addEventListener("click",function(t){t.preventDefault();var n=t.currentTarget,i=e.buttons.find(function(e){return e!==n}),o=Object(a.b)({comment:n.getAttribute("data-comment"),like:n.getAttribute("data-like")});return r.a.post("/ajax/comments_likes.php",o).then(function(e){var t=e.data,r=t.count,a=t.count2;if(r||0===r){var o=n.querySelector(".review-vote__count");o&&(o.innerText=r)}if(a||0===a){var s=i.querySelector(".review-vote__count");s&&(s.innerText=a)}})})})}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});n(2),n(6),n(7),n(24),n(8),n(3),n(25),n(115),n(0),n(1),n(207),n(4),n(9),n(5);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function r(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var a=function(e,t){var n=r(e.elements);Object.entries(t).forEach(function(e){var t,r=i(e,2),a=r[0],o=r[1];(t=a.endsWith("[]")?n.find(function(e){return e.value===o}):n.find(function(e){return e.name===a}))&&("checkbox"===t.type?t.checked=!0:t.value=o)})}},,,,,,,,,,,,,,,,,function(e,t,n){"use strict";(function(e){n(2),n(6),n(7),n(17),n(3),n(73),n(0),n(4),n(5);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r=function(){var t=void 0!==e?e:this||window,n=document,r=n.documentElement,a=t.BSN={},o=a.supports=[],s=0,l="WebkitTransition"in r.style||"Transition".toLowerCase()in r.style,c="WebkitTransition"in r.style?"Webkit".toLowerCase()+"TransitionEnd":"Transition".toLowerCase()+"end",u="WebkitDuration"in r.style?"Webkit".toLowerCase()+"TransitionDuration":"Transition".toLowerCase()+"Duration",d=function(e){e.focus?e.focus():e.setActive()},h=function(e,t){e.classList.add(t)},f=function(e,t){e.classList.remove(t)},m=function(e,t){return e.classList.contains(t)},p=function(e,t){return[].slice.call(e.getElementsByClassName(t))},v=function(e,t){var r=t||n;return"object"===i(e)?e:r.querySelector(e)},y=function(e,t,n){e.addEventListener(t,n,!1)},g=function(e,t,n){e.removeEventListener(t,n,!1)},b=function(e){var n=l?t.getComputedStyle(e)[u]:0;return n="number"!=typeof(n=parseFloat(n))||isNaN(n)?0:1e3*n},w=function(e,t){var n=0;b(e)?function(e,t,n){y(e,t,function i(r){n(r),g(e,t,i)})}(e,c,function(e){!n&&t(e),n=1}):setTimeout(function(){!n&&t(),n=1},17)},k=function(e,t,n){var i=new CustomEvent(e+".bs."+t);i.relatedTarget=n,this.dispatchEvent(i)};a.version="2.0.26";var C=function(e,a){e=v(e);var o="modal-n-2",l=e.getAttribute("data-target")||e.getAttribute("href"),c=v(l),u=m(e,o)?e:c;if(m(e,o)&&(e=null),u){a=a||{},this.keyboard=!1!==a.keyboard&&"false"!==u.getAttribute("data-keyboard"),this.backdrop="static"!==a.backdrop&&"static"!==u.getAttribute("data-backdrop")||"static",this.backdrop=!1!==a.backdrop&&"false"!==u.getAttribute("data-backdrop")&&this.backdrop,this.backdropContainer=a.backdropContainer?a.backdropContainer:n.body,this.content=a.content;var C,S,_,A=this,E=null,L=p(r,"bsn-fixed").concat(p(r,"bsn-fixed-bottom")),T=function(){var e=t.getComputedStyle(n.body),i=parseInt(e.paddingRight,10);if(C&&(n.body.style.paddingRight=i+S+"px",u.style.paddingRight=S+"px",L.length))for(var r=0;r<L.length;r++)t.getComputedStyle(L[r]).paddingRight,L[r].style.right=L[r].style.right?parseFloat(L[r].style.right)+S+"px":S+"px"},x=function(){var e,i,a;C=n.body.clientWidth<(e=r.getBoundingClientRect(),t.innerWidth||e.right-Math.abs(e.left)),(a=n.createElement("div")).className="modal-n-2-scrollbar-measure",n.body.appendChild(a),i=a.offsetWidth-a.clientWidth,n.body.removeChild(a),S=i},j=function(){(_=v(".modal-n-2-backdrop"))&&null!==_&&"object"===i(_)&&(s=0,A.backdropContainer.removeChild(_),_=null),k.call(u,"hidden",o)},O=function(){m(u,"show")?y(n,"keydown",H):g(n,"keydown",H)},M=function(){m(u,"show")?y(t,"resize",A.update):g(t,"resize",A.update)},q=function(){m(u,"show")?y(u,"click",B):g(u,"click",B)},I=function(){M(),q(),O(),d(u),k.call(u,"shown",o,E)},P=function(){u.style.display="",e&&d(e),p(n,"modal-n-2 show")[0]||(function(){if(n.body.style.paddingRight="",u.style.paddingRight="",L.length)for(var e=0;e<L.length;e++)L[e].style.right=L[e].style.right?parseFloat(L[e].style.right)-S+"px":""}(),f(n.body,"modal-n-2-open"),_&&m(_,"fade")?(f(_,"show"),w(_,j)):j(),M(),q(),O())},H=function(e){A.keyboard&&27==e.which&&m(u,"show")&&A.hide()},B=function(e){var t=e.target;m(u,"show")&&(t.parentNode.getAttribute("data-dismiss")===o||t.getAttribute("data-dismiss")===o||t===u&&"static"!==A.backdrop)&&(A.hide(),E=null,e.preventDefault())};this.toggle=function(){m(u,"show")?this.hide():this.show()},this.show=function(){k.call(u,"show",o,E);var e=p(n,"modal-n-2 show")[0];e&&e!==u&&("modalTrigger"in e&&e.modalTrigger.Modal.hide(),"Modal"in e&&e.Modal.hide()),this.backdrop&&!s&&function(){s=1;var e=n.createElement("div");null===(_=v(".modal-n-2-backdrop"))&&(e.setAttribute("class","modal-n-2-backdrop fade"),_=e,A.backdropContainer.appendChild(_))}(),_&&s&&!m(_,"show")&&(_.offsetWidth,b(_),h(_,"show")),u.style.display="block",x(),T(),h(n.body,"modal-n-2-open"),h(u,"show"),u.setAttribute("aria-hidden",!1),m(u,"fade")?w(u,I):I()},this.hide=function(){k.call(u,"hide",o),(_=v(".modal-n-2-backdrop"))&&b(_),f(u,"show"),u.setAttribute("aria-hidden",!0),m(u,"fade")?w(u,P):P()},this.setContent=function(e){v(".modal-n-2-content",u).innerHTML=e},this.update=function(){m(u,"show")&&(x(),T())},!e||"Modal"in e||y(e,"click",function(t){var n=t.target;(n=n.hasAttribute("data-target")||n.hasAttribute("href")?n:n.parentNode)!==e||m(u,"show")||(u.modalTrigger=e,E=e,A.show(),t.preventDefault())}),A.content&&A.setContent(A.content),e?(e.Modal=A,u.modalTrigger=e):u.Modal=A}};o.push(["Modal",C,'[data-toggle="modal-n-2"]']);var S=function(e,t){for(var n=0,i=t.length;n<i;n++)new e(t[n])},_=a.initCallback=function(e){e=e||n;for(var t=0,i=o.length;t<i;t++)S(o[t][1],e.querySelectorAll(o[t][2]))};return n.body?_():y(n,"DOMContentLoaded",function(){_()}),{Modal:C}}();window.Modal=r.Modal,t.a=r}).call(this,n(99))},,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=null,r=!0;return function(){var a=this,o=arguments,s=function(){e.apply(a,o),i=null};n&&r&&(r=!1,s()),i||(i=setTimeout(s,t))}}},function(e,t,n){"use strict";n.d(t,"a",function(){return o});n(2),n(6),n(7),n(17),n(24),n(8),n(3),n(75),n(0),n(1),n(4),n(9),n(5);var i=n(10);function r(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t.container||document,this.items=[],this.wrapper=r(this.container.querySelectorAll(t.wrapper)),this.plainValues=t.plainValues,this.plainValuesColorRange=t.plainValuesColorRange,this.rotate=t.rotate,this.duration=t.duration||2,this.size=t.size||100,this.data=t.data,this.maxValue=t.maxValue,this.colorRange=t.colorRange,this.background=t.circle.background,this.thickness=t.circle.thickness||2,this.backwards=t.circle.backwards||!1,this.ease=t.circle.ease||"linear"}var t,n,o;return t=e,(n=[{key:"makeSVG",value:function(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg",e);for(var i in t)t.hasOwnProperty(i)&&n.setAttribute(i,t[i]);return n}},{key:"render",value:function(){var e=this;this.wrapper.forEach(function(t){var n={xmlns:"http://www.w3.org/2000/svg",viewbox:"0 0 ".concat(e.size||100+e.thickness," ").concat(e.size||100+e.thickness)};if(e.rotate){var i=Number(t.getAttribute("data-".concat(e.data))),r=0;r=e.plainValues?360-360*(100-i)/100:360-360*(5-i)/100,e.backwards&&(r+=270),n.style="transform: rotate(".concat(r,"deg) ").concat(e.backwards?"scale(-1, 1)":"")}else e.backwards&&(n.style="transform: rotate(270deg)");e.size&&(n.width=e.size,n.height=e.size);var a=e.size?e.size/2-e.thickness/2:46,o=e.makeSVG("svg",n),s=function(e,t,n){return"M "+e+" "+t+" m -"+n+", 0 a "+n+","+n+" 0 1,0 "+2*n+",0 a "+n+","+n+" 0 1,0 -"+2*n+",0"},l=document.createElementNS("http://www.w3.org/2000/svg","path");l.setAttribute("d",s(e.size/2,e.size/2,a)),l.setAttribute("fill","none"),l.setAttribute("stroke",e.background),l.setAttribute("stroke-width",e.thickness),o.appendChild(l);var c=document.createElementNS("http://www.w3.org/2000/svg","path");c.setAttribute("d",s(e.size/2,e.size/2,a)),c.setAttribute("fill","none"),c.setAttribute("stroke-width",e.thickness),c.setAttribute("stroke-dashoffset",2*Math.PI*a),c.setAttribute("stroke-dasharray",2*Math.PI*a),o.appendChild(c),t.appendChild(o),e.items.push({wrapper:t,fillingCircle:c})})}},{key:"animate",value:function(e){var t,n,r=e.wrapper,a=e.fillingCircle,o=Number(r.getAttribute("data-".concat(this.data)));if(this.plainValues){if(this.plainValuesColorRange){var s=0;this.plainValuesColorRange.forEach(function(e,t){e>=o&&(s=t+1)}),t=this.colorRange[this.colorRange.length-1-s]}else t=this.colorRange[0];n=o}else t=this.colorRange[Math.ceil(o)-1]||this.colorRange[0],o<=0?(n=0,t="#e8e8e8"):o<3?(n=25,t=this.colorRange[0]):o<4?(n=75,t=this.colorRange[1]):(n=100,t=this.colorRange[2]);n/=100;var l=a.getAttribute("stroke-dasharray"),c=l-l*n;i.c.to(a,this.duration,{ease:this.ease,stroke:t,strokeDashoffset:c})}},{key:"init",value:function(){var e=this;this.render(),this.intersectionObserver=new IntersectionObserver(function(t){return e.handleIntersection(t)},{rootMargin:"30px"}),this.items.forEach(function(t){return e.intersectionObserver.observe(t.wrapper)})}},{key:"destroy",value:function(){this.intersectionObserver.disconnect()}},{key:"handleIntersection",value:function(e){var t=this;e.forEach(function(e){if(e.isIntersecting){var n=t.items.find(function(t){return t.wrapper===e.target});t.animate(n),t.intersectionObserver.unobserve(e.target)}})}}])&&a(t.prototype,n),o&&a(t,o),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return r});n(58),n(9);function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.observers=[]}var t,n,r;return t=e,(n=[{key:"subscribe",value:function(e){this.observers.push(e)}},{key:"unsubscribe",value:function(e){this.observers=this.observers.filter(function(t){return t!==e})}},{key:"broadcast",value:function(e){this.observers.forEach(function(t){return t(e)})}}])&&i(t.prototype,n),r&&i(t,r),e}()},,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return s});n(2),n(6),n(7),n(8),n(45),n(3),n(38),n(12),n(0),n(1),n(88),n(4),n(9),n(5);var i=n(11);function r(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}var s=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,this.elements={checked:this.element.querySelector(".checkbox-block-n-2__checked-elements"),extra:this.element.querySelector(".checkbox-block-n-2__extra-tag"),popup:this.element.querySelector(".checkbox-block-n-2__popup"),output:this.element.querySelector(".checkbox-block-n-2__output"),checkboxes:r(this.element.querySelectorAll(".checkbox-block-n-2__popup input")),active:[],outputText:null,haveLargeElement:!1,roomNumber:!1,selectAllPreviousOptions:this.element.hasAttribute("data-select-previous")},this.elements.labels=this.elements.checkboxes.map(function(e){return e.nextElementSibling}),this.elements.checked){var n=this.elements.checked.querySelector(".type-empty");n&&(this.elements.defaultText=n.innerHTML)}this.disableOutsideClick="false"===this.element.getAttribute("data-outside-click"),this.maxChecked=window.innerWidth<768?3:1,this.element.hasAttribute("data-max-checked")&&(this.maxChecked=+this.element.getAttribute("data-max-checked")),this.init()}return o(e,null,[{key:"init",value:function(){r((arguments.length>0&&void 0!==arguments[0]?arguments[0]:document).querySelectorAll(".checkbox-block-n-2")).forEach(function(t){new e(t)})}}]),o(e,[{key:"openPopup",value:function(){var e=this;this.closeAll(),this.elements.popup.style.display="",setTimeout(function(){e.elements.output.classList.add("open-dropdown"),e.elements.popup.classList.remove("filter-popup-hide-n-2")},50)}},{key:"closePopup",value:function(){var e=this;this.elements.popup.classList.add("filter-popup-hide-n-2"),this.elements.output.classList.remove("open-dropdown"),setTimeout(function(){e.elements.popup.style.display="none"},50)}},{key:"closeAll",value:function(){var e=r(document.querySelectorAll('.open-dropdown:not([data-outside-click="false"])'));r(e).forEach(function(e){var t=e.parentElement.querySelector("[data-popup-filter]");e.classList.remove("open-dropdown"),t&&(t.classList.add("filter-popup-hide-n-2"),setTimeout(function(){t.style.display="none"},50))})}},{key:"init",value:function(){var e=this,t=this.elements,n=t.checked,a=t.extra,o=t.popup,s=t.output,l=(t.checkboxes,t.labels),c=t.defaultText,u=this.elements,d=u.active,h=u.outputText,f=u.haveLargeElement;s.hasAttribute("tabindex")||s.setAttribute("tabindex",0),s.addEventListener("keydown",function(t){switch(t.keyCode){case i.d:return void(l&&l.length&&l[0].focus());case i.f:return void e.closePopup();default:return}}),l.forEach(function(t){t&&(t.setAttribute("tabindex",0),t.addEventListener("keydown",function(t){switch(t.stopPropagation(),t.keyCode){case i.e:return void e.selectCurrentItem();case i.d:return t.preventDefault(),void e.focusItemByDirection(i.d);case i.z:return t.preventDefault(),void e.focusItemByDirection(i.z);case i.f:return void e.closePopup();default:return void(i.y.includes(t.keyCode)&&(t.preventDefault(),e.selectCurrentItem()))}}))}),o.addEventListener("change",function(t){var i,s=t.target.closest("[type-check]");s&&(i=s.getAttribute("type-check"));var l=o.querySelectorAll("input:checked");if(d=[],r(l).forEach(function(e){d.push(e.getAttribute("data-value")),e.getAttribute("data-large")&&(f=!0)}),d=d.sort(),l.length<=e.maxChecked&&0!==l.length&&!f)h=d.join(", "),a&&a.classList.add("hide"),n&&n.classList.add("with-value");else if(1===l.length&&f)h=d[0],a&&a.classList.add("hide"),n&&n.classList.add("with-value");else if(0===l.length){var u=function(e){return'<span class="type-empty">'.concat(e,"</span>")};switch(i){case"room":case"mkad":h=u("Любое");break;case"date_complete":h=u("Любая");break;case"room-expanded":h=u("Выберите кол-во комнат");break;case"decoration":h=u("Любая");break;case"cottage-expanded":h=u("Выберите тип недвижимости");break;case"ready-expanded":h=u("Готовность");break;case"date-expanded":h=u("Срок сдачи объекта");break;case"metro-distance":h=u("Расстояние до метро");break;default:h=u(c||"Любой")}a&&a.classList.add("hide"),n&&n.classList.remove("with-value")}else h=t.srcElement.checked?t.srcElement.getAttribute("data-value"):d[d.length-1],a&&(a.classList.remove("hide"),a.querySelector(".extra-tag-n-2").innerText=l.length),n&&n.classList.add("with-value");n&&(n.innerHTML=h)}),s.addEventListener("click",function(){o.classList.contains("filter-popup-hide-n-2")?e.openPopup():e.closePopup()}),this.disableOutsideClick||window.addEventListener("click",function(t){o.contains(t.target)||s.contains(t.target)||e.closePopup()})}},{key:"focusItemByDirection",value:function(e){var t,n=this.elements.labels.indexOf(document.activeElement);e===i.z?n>0&&(t=this.elements.labels[n-1]):e===i.d&&n>=0&&n<this.elements.labels.length-1&&(t=this.elements.labels[n+1]),t&&t.focus()}},{key:"selectCurrentItem",value:function(){var e=this.elements.labels.indexOf(document.activeElement);if(e||0===e){var t=this.elements.checkboxes[e];if("radio"===t.type&&t.checked)return;var n=!t.checked;if(t.checked=n,this.elements.selectAllPreviousOptions&&0!==e)for(var i=0;i<e;i++)this.elements.checkboxes[i].checked=n;t.dispatchEvent(new CustomEvent("change",{bubbles:!0})),this.elements.popup.dispatchEvent(new CustomEvent("change"))}}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return l});n(2),n(6),n(7),n(8),n(3),n(12),n(0),n(1),n(4),n(5);var i=n(16),r=n.n(i),a=n(54);function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var l=function(){var e,t,n;function i(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.element=e,this.arrows={next:e.parentNode.querySelector(".swiper-button-next"),prev:e.parentNode.querySelector(".swiper-button-prev")},this.swiper=new r.a(this.element,{slidesPerView:"auto",initialSlide:0,navigation:{nextEl:this.arrows.next,prevEl:this.arrows.prev},breakpoints:{1311:{slidesPerView:4},1200:{slidesPerView:3},767:{slidesPerView:2},575:{slidesPerView:1}}}),a.a.init(this.element)}return e=i,n=[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return o((e||document).querySelectorAll(".similars-slider")).map(function(e){return new i(e,t)})}}],(t=null)&&s(e.prototype,t),n&&s(e,n),i}()},,,,,,function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return a});n(2),n(6),n(7),n(210),n(8),n(3),n(12),n(0),n(1),n(4),n(35),n(5);function i(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var r=function(e,t){for(var n=i(e.toLowerCase()),r=i(t.toLowerCase()),a=Array(r.length+1).fill(null).map(function(){return Array(n.length+1).fill(null)}),o=0;o<=n.length;o+=1)a[0][o]=0;for(var s=0;s<=r.length;s+=1)a[s][0]=0;for(var l=0,c=0,u=0,d=1;d<=r.length;d+=1)for(var h=1;h<=n.length;h+=1)n[h-1]===r[d-1]?a[d][h]=a[d-1][h-1]+1:a[d][h]=0,a[d][h]>l&&(l=a[d][h],c=h,u=d);if(0===l)return"";for(var f="";a[u][c]>0;)f=n[c-1]+f,u-=1,c-=1;return f},a=function(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}},,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return r}),n.d(t,"c",function(){return a});n(17),n(25),n(75),n(193),n(74);var i=function(e){var t=e.data,n=e.onMouseEnter,i=e.onMouseLeave,r=t.feature.properties.data,a=r.image,o=r.link,s=r.name,l=r.info,c=r.price,u="",d="";c&&c.all&&(c.all.from&&(u+="от "+Math.round(c.all.from/1e5)/10),c.all.to&&(u+=u.length?" - ":"",u+="до "+Math.round(c.all.to/1e5)/10),u+=u.length?" млн. руб.":""),c&&c.metr&&(c.metr.from&&(d+="от "+Math.round(c.metr.from/100)/10),c.metr.to&&(d+=d.length?" - ":"",d+="до "+Math.round(c.metr.to/100)/10),d+=d.length?" руб/м<sup>2</sup>":"");var h=document.createElement("div");return h.classList.add("search-map-balloon"),h.classList.add("shadow-md"),h.classList.add("rounded-xl"),s.length>26&&(h.style.width="350px"),h.innerHTML='\n    <a class="search-map-balloon__preview overflow-hidden rounded-xl" href="'.concat(o,'" target="_blank" rel="noopener noreferrer">\n      <img src="').concat(a,'" alt="').concat(s,'">\n    </a>\n    <div class="search-map-balloon__body">\n      <a href="').concat(o,'" target="_blank" rel="noopener noreferrer" class="search-map-balloon__title link-n-2 text-w-medium ').concat(s.length<=26?"text-nowrap":"",'">').concat(s,"</a>\n      ").concat(l?'<div class="search-map-balloon__info text-sm text-nowrap">'.concat(l,"</div>"):"",'\n      <div class="search-map-balloon__price-square text-sm text-nowrap">').concat(d,'</div>\n      <div class="search-map-balloon__price-total text-sm text-nowrap">').concat(u,"</div>\n    </div>\n  "),n&&h.addEventListener("mouseenter",function(){n()}),i&&h.addEventListener("mouseleave",function(){i()}),h},r=function(e,t){var n=t.image,i=t.link,r=t.name,a=t.info,o=t.price,s="",l="";return o&&o.all?(o.all.from&&(s+="от "+Math.round(o.all.from/1e5)/10),o.all.to&&(s+=s.length?" - ":"",s+="до "+Math.round(o.all.to/1e5)/10),s+=s.length?" млн. руб.":""):Number.isInteger(o)&&(s="Цена: ".concat(Math.round(o/1e5)/10," млн. руб.")),o&&o.metr&&(o.metr.from&&(l+="от "+Math.round(o.metr.from/100)/10),o.metr.to&&(l+=l.length?" - ":"",l+="до "+Math.round(o.metr.to/100)/10),l+=l.length?" руб/м<sup>2</sup>":""),'\n    <a class="search-map-balloon__preview overflow-hidden rounded-xl" href="'.concat(i,'" target="_blank" rel="noopener noreferrer">\n      <img src="').concat(n,'" alt="').concat(r,'">\n    </a>\n    <div class="search-map-balloon__body">\n      <a href="').concat(i,'" target="_blank" rel="noopener noreferrer" class="search-map-balloon__title link-n-2 text-w-medium">').concat(r,"</a>\n      ").concat(a?'<div class="search-map-balloon__info text-sm text-nowrap">'.concat(a,"</div>"):"",'\n      <div class="search-map-balloon__price-square text-sm text-nowrap">').concat(l,'</div>\n      <div class="search-map-balloon__price-total text-sm text-nowrap">').concat(s,"</div>\n    </div>\n  ")},a=function(e){var t=e.templateLayoutFactory.createClass('\n      <div class="search-map-balloon shadow-md rounded-xl">\n        {{ properties.data|itemBallon|raw }}\n      </div>',{build:function(){t.superclass.build.call(this);var e=this.getData().object.properties.data;if(e.name)if(e.name.length>26)this.getParentElement().style.width="350px";else{var n=this.getElement().querySelector(".search-map-balloon__title");n&&n.classList.add("text-nowrap")}},clear:function(){t.superclass.clear.call(this)},getShape:function(){var e,t=this.getElement();if(t){var n=t.firstElementChild;e=new self.ymaps.shape.Rectangle(new self.ymaps.geometry.pixel.Rectangle([[0,-n.offsetHeight/2],[n.offsetWidth+30,n.offsetHeight/2]]))}return e}});return t}},,,,,,,function(e,t,n){"use strict";n(2),n(6),n(7),n(8),n(3),n(0),n(37),n(1),n(4),n(9),n(5);var i=n(13),r=n.n(i),a=n(15),o=n.n(a),s=n(112),l=n.n(s),c=n(53),u=n(52),d=n(34),h=n(27),f=n(43),m=n(11),p=(n(17),n(25),n(75),n(193),n(74),function(e,t,n){var i=document.createElement("li");i.className="properties-list__item";var r=document.createElement("div");r.className="property";var a=document.createElement("div");a.className="property__name",a.innerText=e;var o=document.createElement(n?"a":"div");return o.className="property__value",o.innerHTML=t,n&&(o.classList.add("link-n-2"),o.href=n,o.setAttribute("target","_blank"),o.setAttribute("rel","noopener noreferrer")),r.appendChild(a),r.appendChild(o),i.appendChild(r),i}),v='<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.6413 12.6552L13.1704 10.1784C12.6782 9.6871 11.8632 9.70203 11.3538 10.2127L10.109 11.4601C10.0303 11.4167 9.94891 11.3713 9.86332 11.3231C9.07719 10.8866 8.00124 10.2882 6.86903 9.15259C5.73347 8.01459 5.1359 6.93454 4.69898 6.14613C4.65288 6.0626 4.6087 5.98207 4.56508 5.90559L5.40057 5.06945L5.81134 4.65725C6.32143 4.14586 6.33549 3.32921 5.84448 2.83648L3.37353 0.359373C2.88251 -0.132666 2.0671 -0.117739 1.55701 0.39365L0.860608 1.09563L0.879638 1.11457C0.646127 1.4132 0.450997 1.75763 0.305788 2.12905C0.171932 2.4826 0.0885942 2.81998 0.0504876 3.15805C-0.275785 5.86906 0.960265 8.34671 4.31474 11.7088C8.95165 16.3559 12.6884 16.0049 12.8496 15.9877C13.2007 15.9457 13.5372 15.8616 13.8791 15.7285C14.2465 15.5847 14.5899 15.3894 14.8877 15.1558L14.9029 15.1694L15.6084 14.477C16.1174 13.9657 16.1321 13.1487 15.6413 12.6552Z" fill="#071321"></path></svg>',y='<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 21 19" fill="none"><path d="M9.64174 3.63033C9.8224 3.93176 10.148 4.11624 10.4994 4.11625C10.8509 4.11626 11.1765 3.93181 11.3572 3.63039C12.6037 1.55098 14.2477 0.889229 15.6855 1.01486C17.1737 1.14489 18.6267 2.1317 19.4119 3.71787C20.184 5.27743 20.323 7.46301 19.0482 9.96824C17.8062 12.409 15.2046 15.174 10.4995 17.8537C5.79482 15.1741 3.19353 12.409 1.95168 9.96828C0.67701 7.46304 0.816073 5.27744 1.58806 3.71785C2.37321 2.13166 3.82614 1.14488 5.31414 1.01485C6.7517 0.889237 8.39547 1.55093 9.64174 3.63033Z" stroke="#BFC9D5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg>',g='<svg width="17" height="17" viewBox="0 0 17 17" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M5.17358 0C4.06909 0 3.17358 0.895416 3.17358 2V3.78262H2C0.895508 3.78262 0 4.67807 0 5.78262V15C0 16.1046 0.895508 17 2 17H11.2173C12.322 17 13.2173 16.1046 13.2173 15V13.8261H14.9998C16.1042 13.8261 16.9998 12.9307 16.9998 11.8261V2C16.9998 0.895416 16.1042 0 14.9998 0H5.17358ZM13.2173 11.8261H14.9998V2H5.17358V3.78262H11.2173C12.322 3.78262 13.2173 4.67804 13.2173 5.78262V11.8261ZM2 5.78262H11.2173V15H2V5.78262Z" fill="#071321"></path></svg>',b=n(60),w=n(44),k=n(131),C=n(102),S=n(194),_=n(55);function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function E(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function L(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function T(e,t,n){return t&&L(e.prototype,t),n&&L(e,n),e}n.d(t,"a",function(){return x});var x=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i=matchMedia("(max-width: 768px)");i.addListener(function(e){return n.handleMediaChange(e)}),this.handleMediaChange(i),window.ObjectsModalMap=this,this.ymapsObserver=new C.a,this.controller=t,this.cache={requests:{}};var r=this.controller,a=r.filterForm,o=r.searchForm,s=a||o;this.objectsUrl=s&&s.getAttribute("data-request-elements-url"),this.initModal(),this.bindEvents()}return T(e,null,[{key:"init",value:function(t){if(!window.ObjectsModalMap)return new e(t)}},{key:"bindEvents",value:function(e){this.complexes=E(e.querySelectorAll(".complex-item-n-2")),this.complexes.forEach(function(e){var t=e.getAttribute("data-id");if(t){var n=e.querySelector(".js-search-on-map");n&&!n[m.p]&&(n.addEventListener("click",function(){return o.a.publish(m.p,{id:t})}),n[m.p]=!0)}})}}]),T(e,[{key:"initMap",value:function(){var e=this;this.ymaps.template.filtersStorage.add("itemBallon",function(e,t){return Object(k.a)(e,t)}),this.zoomControl=Object(_.a)(this.ymaps,{top:"253px",right:"20px"}),this.setMapControls(),this.objectsMap=new this.ymaps.Map(this.modal.modalBoxContent,{center:[55.7156053517751,37.4754233558197],zoom:16,controls:[]},{suppressMapOpenBlock:!0,maxZoom:16}),this.objectsMap.controls.add(this.zoomControl),this.objectsManager=new this.ymaps.ObjectManager({clusterize:!1}),this.regionsManager=new this.ymaps.ObjectManager({clusterize:!1}),this.objectsManager.objects.options.set({balloonLayout:Object(k.c)(this.ymaps),balloonPanelMaxMapArea:0,balloonShadow:!1,hideIconOnBalloonOpen:!1}),this.objectsMap.events.add("click",function(t){e.objectsManager.objects.balloon.close(),e.placemarkId&&(e.resetPlacemarkIcon(e.placemarkId),e.placemarkId=null)}),this.regionsManager.objects.events.add("click",function(t){e.objectsManager.objects.balloon.close(),e.placemarkId&&(e.resetPlacemarkIcon(e.placemarkId),e.placemarkId=null)}),Object(b.a)()||(this.objectsManager.objects.events.add("mouseenter",function(t){var n=t.get("objectId");e.mouseInsidePlacemark=!0,e.openBalloon(n)}),this.objectsManager.objects.events.add("mouseleave",function(t){e.mouseInsidePlacemark=!1,setTimeout(function(){e.closeBalloonIfNeeded()},100)}),this.objectsManager.objects.balloon.events.add("mouseenter",function(t){e.mouseInsideBalloon=!0}),this.objectsManager.objects.balloon.events.add("mouseleave",function(t){e.mouseInsideBalloon=!1,setTimeout(function(){e.closeBalloonIfNeeded()},100)})),this.objectsManager.objects.events.add("click",function(t){var n=t.get("objectId");e.renderItem(n),e.setPlacemarkIcon(n)}),this.ymapsObserver.broadcast(""),this.hideSpinner()}},{key:"renderMapPlacemarks",value:function(e){e.length&&(this.objectsManager.removeAll(),this.objectsManager.add({type:"FeatureCollection",features:e}),this.objectsMap.geoObjects.add(this.objectsManager))}},{key:"renderMapRegions",value:function(e){e.length&&(this.regionsManager.add({type:"FeatureCollection",features:e}),this.objectsMap.geoObjects.add(this.regionsManager))}},{key:"initModal",value:function(){var e=this;this.modal=new l.a.modal({footer:!1,closeMethods:["overlay","escape"],cssClass:["ymaps-modal"]}),this.modal.modalBoxContent.appendChild(this.createCloseButton()),this.modal.modalBoxContent.appendChild(this.createInfoContainer()),this.modal.modalBoxContent.classList.add("spinner"),Object(w.a)({elements:[this.modal.modalBoxContent],observerMargin:100,onLoad:function(){return e.bindMapEvents()},scriptSrc:"https://api-maps.yandex.ru/2.1/?lang=ru_RU&onload=ymapsBroadcast&apikey=81fd4d74-8f99-4223-b3a9-ced2137399e7",scriptUniqueSelector:"api-maps.yandex"})}},{key:"renderItem",value:function(e){var t=this.objectsManager.objects.getById(e);if(t){var n=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=document.createElement("div");t.className="object-side-info rounded-xl-not-mobile overflow-hidden";var n=document.createElement("div");n.className="object-side-info__body",n.style.display="block";var i=document.createElement(e.link?"a":"div");i.className="object-side-info__title text-w-medium text-twenty-four text-twenty-mobile",i.innerText=e.name,e.link&&(i.classList.add("link-n-2"),i.href=e.link,i.setAttribute("target","_blank"),i.setAttribute("rel","noopener noreferrer"));var r=document.createElement("div");r.className="object-side-info__price";var a=document.createElement("div");if(a.className="object-price flex-column",e.price&&e.price.all){var o="";e.price.all.from&&(o+="от "+Math.round(e.price.all.from/1e5)/10),e.price.all.to&&(o+=o.length?" - ":"",o+="до "+Math.round(e.price.all.to/1e5)/10),o+=o.length?" млн. руб.":"";var s=document.createElement("div");s.className="object-price__title text-twenty",s.innerHTML=o,a.appendChild(s)}else if(Number.isInteger(e.price)){var l=document.createElement("div");l.className="object-price__title text-twenty",l.innerHTML='"Цена: '.concat(Math.round(e.price.all.from/1e5)/10," млн. руб."),a.appendChild(l)}if(e.price&&e.price.metr){var c="";e.price.metr.from&&(c+="от "+Math.round(e.price.metr.from/100)/10),e.price.metr.to&&(c+=c.length?" - ":"",c+="до "+Math.round(e.price.metr.to/100)/10),c+=c.length?" руб/м<sup>2</sup>":"";var u=document.createElement("div");u.className="object-price__value text-md text-sm-mobile",u.innerHTML=c,a.appendChild(u)}a.childElementCount&&r.appendChild(a);var d=document.createElement("div");d.className="object-side-info__properties offset-vb-xs-mobile";var h=document.createElement("ul");h.className="properties-list",e.date_end&&h.appendChild(p("Срок сдачи",e.date_end)),e.flatsSquare&&h.appendChild(p("Площадь квартир",e.flatsSquare)),e.buildingClass&&h.appendChild(p("Класс жилья",e.buildingClass)),e.developers&&Array.isArray(e.developers)&&e.developers.length&&h.appendChild(p("Застройщик",e.developers[0].name,e.developers[0].link)),d.appendChild(h);var f=document.createElement("div");if(f.className="object-side-info__buttons",e.telNumber){var m=document.createElement("a");m.className="phone-number-n-2 phone-number-n-2_large phone-number-n-2_theme_yellow rounded-md w-auto",m.setAttribute("data-tel",e.telNumber),m.setAttribute("onclick",'ym(39897405, "reachGoal", "Click_phone");'),m.innerHTML='\n      <div class="phone-number-n-2__icon">\n        '.concat(v,'\n      </div>\n      <div class="phone-number-n-2__number">\n        +7 <span>Показать телефон</span>\n      </div>\n    '),f.appendChild(m)}if(e.advCallable){var b=document.createElement("button");b.className="button-n-2 button-n-2_theme_light-blue rounded-md text-l-tablet text-sm-mobile",b.setAttribute("data-toggle","modal-n-2"),b.setAttribute("data-target","#modal-callback-right"),b.setAttribute("data-form","developer"),b.setAttribute("data-form-adv",e.id),b.setAttribute("data-form-title","С Вами свяжется менеджер "+e.name),b.innerText="Перезвоните мне",f.appendChild(b)}var w=document.createElement("div");if(w.className="object-side-info__controls",w.innerHTML='\n    <button class="manage-complex-btn-n-2 manage-complex-btn-n-2_theme_yellow"\n      data-tip="Добавить в избранное"\n      data-id="'.concat(e.id,'"\n      data-type="').concat(e.type,'"\n      data-favorite="">\n      ').concat(y,'\n    </button>\n    <button class="manage-complex-btn-n-2 manage-complex-btn-n-2_theme_yellow"\n      data-tip="Добавить в сравнение"\n      data-id="').concat(e.id,'"\n      data-type="').concat(e.type,'"\n      data-compare-n-2="">\n      ').concat(g,"\n    </button>\n  "),n.appendChild(w),n.appendChild(i),n.appendChild(r),n.appendChild(d),f.childElementCount&&n.appendChild(f),e.whereToBuy){var k=document.createElement("div");k.className="object-side-info__where-to-buy",k.innerHTML='\n      <span class="text-w-medium text-md">Где купить квартиру?</span>\n      <span>'.concat(e.whereToBuy,"</span>\n    "),n.appendChild(k)}return t.appendChild(n),t}(t.properties.data);this.infoContainer.innerHTML="",this.infoContainer.appendChild(n),c.a.init(n),u.a.init(n),d.a.init({container:n,triggersSelector:'[data-toggle="modal-n-2"]'}),h.a.init(n),f.a.init(n)}}},{key:"bindMapEvents",value:function(){var e=this,t=function(){e.ymaps=window.ymaps,e.ymaps.ready(function(){return e.initMap()})};window.ymaps?t():window.ymapsObserver.subscribe(function(){t()})}},{key:"bindEvents",value:function(){var e=this;o.a.subscribe(m.p,function(t,n){var i=n.id;e.nextObjectId=i,e.requestItems(i),e.regionsManager&&e.regionsManager.objects.getLength()||o.a.publish(m.q),e.modal.open(),e.objectsMap&&e.objectsMap.container.fitToViewport()});var t=function(t){e.renderMapPlacemarks(t),e.renderItem(e.nextObjectId),e.centerMap(e.nextObjectId),e.setPlacemarkIcon(e.nextObjectId),e.openBalloon(e.nextObjectId)};this.placemarksLoader=new Promise(function(n){o.a.subscribe(m.o,function(i,r){e.cache.requests[e.nextObjectId]=r.data,o.a.unsubscribe(m.o),o.a.subscribe(m.o,function(e,n){t(n.data)}),n(r.data)})}),this.regionsLoader=new Promise(function(e){o.a.subscribe(m.r,function(t,n){e(n.data)})}),this.ymapsLoader=new Promise(function(t){return e.ymapsObserver.subscribe(function(){return t()})}),Promise.all([this.placemarksLoader,this.ymapsLoader]).then(function(n){var i=A(n,1)[0];t(i),e.nextObjectId=null}),Promise.all([this.regionsLoader,this.ymapsLoader]).then(function(t){var n=A(t,1)[0];e.renderMapRegions(n)})}},{key:"requestItems",value:function(e){var t=this;return this.cache.requests[e]?new Promise(function(n){o.a.publish(m.o,{data:t.cache.requests[e]}),n()}):r.a.get(this.objectsUrl||"search-modal-map-list.json",{params:{id:e}}).then(function(e){var n=e.data;n&&n.items&&t.onRequest(n.items)})}},{key:"onRequest",value:function(e){o.a.publish(m.o,{data:Object(S.a)(e)})}},{key:"openBalloon",value:function(e){this.objectsManager.objects.getById(e)&&this.objectsManager.objects.balloon.open(e)}},{key:"closeBalloonIfNeeded",value:function(){this.mouseInsideBalloon||this.mouseInsidePlacemark||this.objectsManager.objects.balloon.close()}},{key:"setPlacemarkIcon",value:function(e){this.placemarkId&&this.resetPlacemarkIcon(this.placemarkId);var t=this.objectsManager.objects.getById(e);t&&(this.objectsManager.objects.setObjectOptions(e,{iconImageHref:t.properties.selectedIcon,iconImageSize:[26,26],iconImageOffset:[-13,-13]}),this.placemarkId=e)}},{key:"resetPlacemarkIcon",value:function(e){var t=this.objectsManager.objects.getById(e);t&&this.objectsManager.objects.setObjectOptions(e,{iconImageHref:t.properties.originalIcon,iconImageSize:[18,18],iconImageOffset:[-9,-9]})}},{key:"centerMap",value:function(e){var t=this.objectsManager.objects.getById(e);if(t)this.objectsMap.setCenter(t.geometry.coordinates);else{var n=this.objectsManager.getBounds();n&&this.objectsMap.setBounds(n)}}},{key:"createCloseButton",value:function(){var e=this,t=document.createElement("div");t.className="close-button-container";var n=document.createElement("button");return n.className="close-button",n.addEventListener("click",function(){return e.modal.close()}),n.innerHTML='\n      <svg width="14" height="14" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <path fill-rule="evenodd" clip-rule="evenodd" d="M4.574 6L.295 1.722A1.008 1.008 0 1 1 1.722.295L6 4.574 10.278.295a1.008 1.008 0 0 1 1.427 1.427L7.426 6l4.279 4.278a1.009 1.009 0 0 1-1.427 1.427L6 7.426l-4.278 4.279a1.008 1.008 0 1 1-1.427-1.427L4.574 6z" fill="#071321"/>\n      </svg>\n    ',t.appendChild(n),t}},{key:"createInfoContainer",value:function(){return this.infoContainer=document.createElement("div"),this.infoContainer.className="info-container",this.infoContainer}},{key:"hideSpinner",value:function(){var e=this;this.modal.modalBoxContent.classList.add("is-spinner-hidden"),setTimeout(function(){e.modal.modalBoxContent.classList.remove("spinner"),e.modal.modalBoxContent.classList.remove("is-spinner-hidden")},200)}},{key:"setMapControls",value:function(){"desktop"===this.deviceType?this.zoomControl.options.set("position",{top:"253px",right:"20px"}):this.zoomControl.options.set("position",{top:"25px",left:"20px"})}},{key:"handleMediaChange",value:function(e){var t=e.matches?"mobile":"desktop";t!==this.deviceType&&(this.deviceType=t,this.zoomControl&&this.setMapControls())}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return d});n(2),n(6),n(7),n(17),n(58),n(8),n(45),n(3),n(70),n(61),n(0),n(77),n(1),n(4),n(91),n(9),n(5);var i=n(13),r=n.n(i),a=n(120),o=n(23);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function u(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}var d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t.inited||(t.inited=!0,this.element=t,this.input=t.querySelector("input"),this.inputType=t.getAttribute("data-search-type"),this.tips=t.querySelector(".search-input__tips"),this.tipsDetailed=t.getAttribute("data-detailed-tips"),this.tipsRequestUrl=t.getAttribute("data-search-url")||"/ajax/text_search_new_buildings.php",this.tipsDisableUrls=t.hasAttribute("data-disabled-urls"),this.includeFormParams=t.hasAttribute("data-form-params"),this.inputPreventEvents=t.hasAttribute("data-prevent"),this.includeFormParams&&(this.form=this.element.closest("form")),this.bindEvents())}return u(e,null,[{key:"init",value:function(){return l((arguments.length>0&&void 0!==arguments[0]?arguments[0]:document).querySelectorAll(".js-search-input")).forEach(function(t){return new e(t)})}}]),u(e,[{key:"bindEvents",value:function(){var e=this;this.input&&(document.addEventListener("click",function(t){e.input.contains(t.target)||e.tips&&e.tips.contains(t.target)||e.closeTipsList()}),this.input.addEventListener("keypress",function(e){if(13===e.which||13===e.keyCode)return e.preventDefault(),!1}),this.input.addEventListener("change",function(t){e.inputPreventEvents&&(t.preventDefault(),t.stopPropagation()),t.isTrusted&&t.stopPropagation()}),this.input.addEventListener("input",function(t){if(""===t.target.value)return e.closeTipsList();e.openTipsList(),e.tips.scrollTop=0,"local"!==e.tipsRequestUrl?e.debouncedRequest():window.__SEARCH__&&window.__SEARCH__.searchInputTips&&e.renderTips(t.target.value,window.__SEARCH__.searchInputTips)}))}},{key:"closeTipsList",value:function(){var e=this;this.tips.classList.add("filter-popup-hide-n-2"),setTimeout(function(){e.tips.style.display="none"},50)}},{key:"openTipsList",value:function(){var e=this;this.tips.style.display="",setTimeout(function(){e.tips.classList.remove("filter-popup-hide-n-2")},10)}},{key:"handleTipClick",value:function(e){if(this.closeTipsList(),this.input.value=e.label,!this.inputPreventEvents){var t=document.createEvent("HTMLEvents");t.initEvent("change",!0,!1),this.input.dispatchEvent(t)}this.input.dispatchEvent(new CustomEvent("tipClick",{bubbles:!0,cancelable:!1,detail:{tip:e}}))}},{key:"debouncedRequest",value:function(){var e=this;this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){e.requestTips()},500)}},{key:"requestTips",value:function(){var e=this,t=this.input.value;if(""!==t){var n={q:t,t:this.inputType};return this.includeFormParams&&this.form&&(n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){s(e,t,n[t])})}return e}({},n,Object(o.b)(this.form,{hash:!0}))),r.a.get(this.tipsRequestUrl,{params:n}).then(function(n){var i=n.data;e.renderTips(t,i)})}}},{key:"renderTips",value:function(e,t){var n=this,i=[];0!==t.length&&t.forEach(function(t){i.push({substring:Object(a.b)(e,t.label)||"",label:t.label,type:t.type_name,url:t.url,id:t.id})}),i.sort(function(e,t){return e.substring.length<t.substring.length?1:-1}),this.tips.innerHTML="",i.forEach(function(e){return n.tips.appendChild(function(e){var t,i="";if(""!==e.substring){var r=e.label.search(new RegExp(Object(a.a)(e.substring),"i"));l(e.label).forEach(function(t,n){n===r?(i+="<strong>"+t,1===e.substring.length&&(i+="</strong>")):n===r+e.substring.length-1?i+=t+"</strong>":i+=t})}else i=e.label;e.url&&!n.tipsDisableUrls?((t=document.createElement("a")).className="tip tip_url",t.href=e.url):(t=document.createElement("div")).className="tip";var o=document.createElement("span");if(o.className="tip__name",o.innerHTML=i,t.appendChild(o),!["false",!1].includes(n.tipsDetailed)&&e.type){var s=document.createElement("span");s.className="tip__type",s.innerHTML='<span class="tip__type">, '.concat(e.type,"</span>"),t.appendChild(s)}return e.url&&!n.tipsDisableUrls||t.addEventListener("mousedown",function(){n.handleTipClick(e)}),t}(e))}),this.openTipsList()}}]),e}()},,,,function(e,t,n){"use strict";n.d(t,"a",function(){return l});n(2),n(6),n(7),n(8),n(3),n(0),n(1),n(4),n(9),n(5),n(252);var i=n(16),r=n.n(i);function a(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t.ThumbGallery=this,this.element=t,this.arrows={next:t.querySelector(".btn-slider_next"),prev:t.querySelector(".btn-slider_prev")},this.topContainer=t.querySelector(".thumb-gallery__top-slider"),this.thumbContainer=t.querySelector(".thumb-gallery__thumbs"),this.expandButton=t.querySelector("[data-show-gallery]"),this.counter={container:t.querySelector(".slide-count"),current:t.querySelector(".slide-count__value_current"),all:t.querySelector(".slide-count__value:not(.slide-count__value_current)")},this.initSliders()}return s(e,null,[{key:"init",value:function(){return a(document.querySelectorAll(".thumb-gallery")).forEach(function(t){return new e(t)})}}]),s(e,[{key:"initSliders",value:function(){var e=this;this.galleryTop=new r.a(this.topContainer,{navigation:{nextEl:this.arrows.next,prevEl:this.arrows.prev},speed:600,loop:!0,loopedSlides:6}),this.thumbContainer&&(this.galleryThumbs=new r.a(this.thumbContainer,{watchSlidesVisibility:!0,watchSlidesProgress:!0,slideToClickedSlide:!0,loop:!0,loopedSlides:6,slidesPerView:"auto",centeredSlides:!0}),this.galleryTop.controller.control=this.galleryThumbs,this.galleryThumbs.controller.control=this.galleryTop),this.initGallery(),this.galleryTop.on("slideChange",function(){e.counter.current.innerHTML=e.galleryTop.realIndex+1}),this.expandButton&&this.expandButton.addEventListener("click",function(t){var n=e.galleryTop.slides[e.galleryTop.activeIndex];n&&(t.preventDefault(),n.click())})}},{key:"initGallery",value:function(){lightGallery(this.topContainer,{thumbnail:!0,hash:!1,download:!1,loop:!0,exThumbImage:"data-src",selector:"a.swiper-slide:not(.swiper-slide-duplicate)"})}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});n(2),n(6),n(7),n(17),n(8),n(3),n(0),n(1),n(4),n(9),n(5);var i=n(16),r=n.n(i);function a(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function l(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}var c=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{lazy:!1,initDelay:0};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,this.initDelay=i.initDelay,this.lazy=i.lazy,this.container=t.querySelector(".main-slider-n-2__container"),this.closeButton=t.querySelector(".main-slider-n-2__close button"),this.lazy?(this.intersectionObserver=new IntersectionObserver(function(e){var t=o(e,1)[0];return n.handleIntersection(t)}),this.intersectionObserver.observe(this.element)):this.init()}return l(e,null,[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,n=(arguments.length>1&&arguments[1],t.querySelector(".main-slider-n-2"));n&&new e(n)}}]),l(e,[{key:"init",value:function(){var e=this,t=function(){e.swiper=new r.a(e.container,{slidesPerView:1,speed:500,longSwipes:!1,effect:"fade",simulateTouch:!1,autoplay:{delay:3e3},pagination:{el:".swiper-pagination",type:"fraction",renderFraction:function(e,t){return'<span class="'.concat(e,' main-slider-n-2__pagination-current"></span>\n                    <span class="').concat(t,' main-slider-n-2__pagination-total"></span>')},formatFractionCurrent:function(e){return e<10?"0".concat(e):e},formatFractionTotal:function(e){return e<10?"0".concat(e):e}},lazy:{loadPrevNext:!0}}),e.classNames=[".rounded-tag",".main-slide-n-2__developer",".main-slide-n-2__title",".main-slide-n-2__description",".main-slide-n-2__order-call-button"],e.animation(),e.bindHandlers()};this.initDelay?setTimeout(function(){return t()},this.initDelay):t()}},{key:"animationChange",value:function(){var e=this.swiper.slides[this.swiper.realIndex],t=[];this.classNames.forEach(function(n){a(e.querySelectorAll(n)).forEach(function(e){t.push(e)})}),t.forEach(function(e){e&&e.classList.add("main-slide-n-2--animation")}),this.previousSlide&&this.previousSlide.classList.add("main-slide-n-2--animation-bg")}},{key:"animation",value:function(){var e=this;this.swiper.on("touchStart",function(){e.swiper.isBeginning||e.swiper.isEnd||e.animationChange()}),this.swiper.on("slideChange",function(){e.swiper.$el[0].classList.add("is-loaded");var t=e.swiper.slides[e.swiper.realIndex],n=e.swiper.slides[e.swiper.previousIndex];e.previousSlide=n;var i=[],r=[];e.classNames.forEach(function(e){a(n.querySelectorAll(e)).forEach(function(e){i.push(e)}),a(t.querySelectorAll(e)).forEach(function(e){r.push(e)})}),i.forEach(function(e){e.classList.add("main-slide--animation")}),r.forEach(function(e){e&&e.classList.remove("main-slide-n-2--animation")}),t.classList.remove("main-slide-n-2--animation-bg"),n.classList.add("main-slide--animation-bg")})}},{key:"bindHandlers",value:function(){var e=this,t=document.querySelector(".main-slider-n-2__button-prev"),n=document.querySelector(".main-slider-n-2__button-next");t&&t.addEventListener("click",function(){e.handlePrevButtonClick()}),n&&n.addEventListener("click",function(){e.handleNextButtonClick()}),this.closeButton&&this.closeButton.addEventListener("click",function(){e.handleCloseButtonClick()}),this.swiper.on("beforeDestroy",function(){t&&t.removeEventListener("click",e.handlePrevButtonClick()),n&&n.removeEventListener("click",e.handleNextButtonClick()),e.closeButton&&e.closeButton.removeEventListener("click",e.handleCloseButtonClick())})}},{key:"handleNextButtonClick",value:function(){var e=this;this.animationChange();var t=this.swiper.slides.length-1,n=this.swiper.realIndex;setTimeout(function(){e.swiper.destroyed||e.swiper.slideTo(n===t?0:n+1)},500)}},{key:"handlePrevButtonClick",value:function(){var e=this;this.animationChange();var t=this.swiper.slides.length-1,n=this.swiper.realIndex;setTimeout(function(){e.swiper.destroyed||e.swiper.slideTo(0===n?t:n-1)},500)}},{key:"handleCloseButtonClick",value:function(){this.element.classList.add("main-slider-n-2_hidden")}},{key:"handleIntersection",value:function(e){e.isIntersecting&&(this.init(),this.intersectionObserver.disconnect())}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return r});n(17),n(38),n(12),n(25),n(74),n(9);var i=n(62),r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={arrow:'<svg width="13" height="22" viewBox="0 0 7 12" xmlns="http://www.w3.org/2000/svg"><path d="M5.9 10.9a.35.35 0 0 0 0-.5L1.47 6 5.9 1.6a.35.35 0 0 0 0-.5.36.36 0 0 0-.5 0L.71 5.75a.34.34 0 0 0-.1.25c0 .08.03.18.1.25l4.67 4.64c.14.15.37.15.5 0z" fill="currentColor" stroke="currentColor"/></svg>',recommended:'<svg xmlns="http://www.w3.org/2000/svg" width="12" height="13" viewBox="0 0 12 13"><path fill="" d="M.01 3.41c0-.72.26-1.3.78-1.74A3 3 0 0 1 2.82 1c.85 0 1.53.22 2.04.66.52.44.78 1.04.78 1.79v.58c0 .72-.26 1.3-.78 1.73-.51.44-1.19.66-2.02.66-.85 0-1.53-.22-2.05-.66a2.22 2.22 0 0 1-.78-1.78zm1.71.63c0 .32.1.58.3.77.21.2.48.3.82.3.33 0 .6-.1.79-.3.2-.2.3-.47.3-.8v-.6c0-.32-.1-.58-.3-.78-.2-.2-.47-.3-.81-.3-.33 0-.6.1-.8.3-.2.2-.3.47-.3.82zm4.63 6.93c0-.72.26-2.3.79-2.74.52-.44 1.2-.66 2.02-.66.85 0 1.53.21 2.05.65.52.43.78 1.03.78 1.8v.57c0 .72-.26 1.3-.77 1.74a3 3 0 0 1-2.04.66c-.85 0-1.54-.22-2.05-.67-.52-.44-.78-.03-.78-.76zm1.71-.37c0 .3.1.55.32.76.22.21.48.31.8.31.73 0 1.09-.36 1.09-1.08v-.61c0-.33-.1-.59-.3-.78-.2-.2-.47-.3-.8-.3-.34 0-.6.1-.8.3-.2.2-.3.46-.3.8zm2.68-8.76l-1.25-.6-8.33 11.1 1.25.62z"/></svg>',mortgage:'<svg width="16" height="18" viewBox="0 0 16 18" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14 9.1L8 3.1L2 9.1V15C2 15.6 2.4 16 3 16H8.1C8.5 17.1 10.1 17.9 12 17.9C14.2 17.9 16 16.8 16 15.4C16 15 15.9 14.7 15.7 14.4C15.9 14.1 16 13.8 16 13.4C16 13 15.9 12.7 15.7 12.4C15.9 12.1 16 11.8 16 11.4C16 10.5 15.2 9.7 13.9 9.2V9.1H14ZM12.1 16.9C10.8 16.9 9.8 16.5 9.4 15.9C9.3 15.8 9.2 15.6 9.2 15.4C9.2 15.3 9.2 15.2 9.3 15.1C10 15.6 11.1 15.9 12.2 15.9C12.8 15.9 13.3 15.8 13.8 15.7C14.3 15.6 14.8 15.3 15.1 15.1C15.2 15.2 15.2 15.3 15.2 15.4C15 16.1 13.8 16.9 12.1 16.9ZM15 13.7C14.9 13.9 14.6 14.2 14.2 14.4L14 14.5C13.5 14.7 12.8 14.9 12.1 14.9C11.2 14.9 10.5 14.7 10 14.4C9.6 14.2 9.4 14 9.2 13.7C9.2 13.6 9.1 13.5 9.1 13.4C9.1 13.3 9.1 13.2 9.2 13.1C10.1 13.6 11.1 13.9 12.1 13.9C13.1 13.9 14.1 13.6 15 13.1C15 13.2 15.1 13.3 15.1 13.4C15.1 13.5 15 13.6 15 13.7ZM15 11.8C14.9 12 14.6 12.3 14.2 12.5H14C13.5 12.7 12.8 12.9 12.1 12.9C11.2 12.9 10.5 12.7 10 12.4C9.6 12.2 9.4 12 9.2 11.7C9.2 11.6 9.1 11.5 9.1 11.4C9.1 10.7 10.4 9.9 12.1 9.9C12.8 9.9 13.5 10.1 14 10.3C14.6 10.6 15.1 11 15.1 11.4C15 11.6 15 11.7 15 11.8ZM15.7 7.3L8.7 0.3C8.3 -0.1 7.7 -0.1 7.3 0.3L0.3 7.3C0.1 7.5 0 7.8 0 8L1.1 9L8 2L15 9L16 8C16 7.8 15.9 7.5 15.7 7.3Z" fill="white"></path></svg>',installment:'<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9.99518 1.66672C5.39102 1.66672 1.66602 5.39588 1.66602 10.0001C1.66602 14.6042 5.39102 18.3334 9.99518 18.3334C14.5993 18.3334 18.3327 14.6042 18.3327 10.0001C18.3327 5.39588 14.5993 1.66672 9.99518 1.66672ZM9.99935 16.6667C6.31602 16.6667 3.33268 13.6834 3.33268 10.0001C3.33268 6.31672 6.31602 3.33338 9.99935 3.33338C13.6827 3.33338 16.666 6.31672 16.666 10.0001C16.666 13.6834 13.6827 16.6667 9.99935 16.6667Z" fill="white"></path><path d="M10.416 5.83328H9.16602V10.8333L13.5368 13.4583L14.166 12.4333L10.416 10.2083V5.83328Z" fill="white"></path></svg>',favorite:'<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 21 19" fill="none"><path d="M9.64174 3.63033C9.8224 3.93176 10.148 4.11624 10.4994 4.11625C10.8509 4.11626 11.1765 3.93181 11.3572 3.63039C12.6037 1.55098 14.2477 0.889229 15.6855 1.01486C17.1737 1.14489 18.6267 2.1317 19.4119 3.71787C20.184 5.27743 20.323 7.46301 19.0482 9.96824C17.8062 12.409 15.2046 15.174 10.4995 17.8537C5.79482 15.1741 3.19353 12.409 1.95168 9.96828C0.67701 7.46304 0.816073 5.27744 1.58806 3.71785C2.37321 2.13166 3.82614 1.14488 5.31414 1.01485C6.7517 0.889237 8.39547 1.55093 9.64174 3.63033Z" stroke="#BFC9D5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg>',compare:'<svg width="17" height="17" viewBox="0 0 17 17" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M5.17358 0C4.06909 0 3.17358 0.895416 3.17358 2V3.78262H2C0.895508 3.78262 0 4.67807 0 5.78262V15C0 16.1046 0.895508 17 2 17H11.2173C12.322 17 13.2173 16.1046 13.2173 15V13.8261H14.9998C16.1042 13.8261 16.9998 12.9307 16.9998 11.8261V2C16.9998 0.895416 16.1042 0 14.9998 0H5.17358ZM13.2173 11.8261H14.9998V2H5.17358V3.78262H11.2173C12.322 3.78262 13.2173 4.67804 13.2173 5.78262V11.8261ZM2 5.78262H11.2173V15H2V5.78262Z" fill="#071321"></path></svg>',phone:'<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.6413 12.6552L13.1704 10.1784C12.6782 9.6871 11.8632 9.70203 11.3538 10.2127L10.109 11.4601C10.0303 11.4167 9.94891 11.3713 9.86332 11.3231C9.07719 10.8866 8.00124 10.2882 6.86903 9.15259C5.73347 8.01459 5.1359 6.93454 4.69898 6.14613C4.65288 6.0626 4.6087 5.98207 4.56508 5.90559L5.40057 5.06945L5.81134 4.65725C6.32143 4.14586 6.33549 3.32921 5.84448 2.83648L3.37353 0.359373C2.88251 -0.132666 2.0671 -0.117739 1.55701 0.39365L0.860608 1.09563L0.879638 1.11457C0.646127 1.4132 0.450997 1.75763 0.305788 2.12905C0.171932 2.4826 0.0885942 2.81998 0.0504876 3.15805C-0.275785 5.86906 0.960265 8.34671 4.31474 11.7088C8.95165 16.3559 12.6884 16.0049 12.8496 15.9877C13.2007 15.9457 13.5372 15.8616 13.8791 15.7285C14.2465 15.5847 14.5899 15.3894 14.8877 15.1558L14.9029 15.1694L15.6084 14.477C16.1174 13.9657 16.1321 13.1487 15.6413 12.6552Z" fill="#071321"></path></svg>'},r=document.createElement("div");if(r.className="flats-item",r.setAttribute("data-id",e.id),t.minimalistic){r.classList.add("flats-item_minimalistic");var a=document.createElement("a");a.className="flats-item__image-container",a.setAttribute("href",e.link);var o=document.createElement("img");o.className="flats-item__image",o.src=Array.isArray(e.image)?e.image[0]:e.image,a.appendChild(o),r.appendChild(a)}else{var s=document.createElement("div");s.className="flats-item__preview";var l=document.createElement("div");l.className="complex-item-slider swiper-container";var c=document.createElement("a");if(c.className="complex-item-slider__link",c.href=e.link,l.appendChild(c),e.image&&Array.isArray(e.image)){var u=document.createElement("div");u.className="swiper-wrapper",e.image.forEach(function(e){var t=document.createElement("div");t.className="complex-item-slider__slide swiper-slide";var n=document.createElement("img");n.src=e,t.appendChild(n),u.appendChild(t)}),l.appendChild(u),l.innerHTML+='\n      <div class="complex-item-slider__arrow complex-item-slider__arrow_prev">\n        '.concat(n.arrow,'\n      </div>\n      <div class="complex-item-slider__arrow complex-item-slider__arrow_next">\n        ').concat(n.arrow,"\n      </div>\n    ")}if(s.appendChild(l),e.recommended||e.mortgage||e.installment||e.action){var d=document.createElement("div");d.className="flats-item__info-labels";var h=[];e.recommended&&h.push("recommended"),e.mortgage&&h.push("mortgage"),e.action&&h.push("action"),e.installment&&h.push("installment"),[].concat(h).forEach(function(t){var i=document.createElement("div");i.className="info-label-n-2 info-label-n-2_".concat(t),i.setAttribute("data-tip",e[t]),i.setAttribute("data-style",t),i.innerHTML=n[t],d.appendChild(i)}),s.appendChild(d)}r.appendChild(s);var f=document.createElement("div");f.className="flats-item__controls",f.innerHTML='\n    <div class="flats-item__control">\n      <div class="manage-complex-btn-n-2 manage-complex-btn-n-2_theme_yellow"\n        data-tip="Добавить в избранное"\n        data-id="'.concat(e.id,'"\n        data-type="').concat(e.type,'"\n        data-favorite="">\n        ').concat(n.favorite,'\n      </div>\n    </div>\n    <div class="flats-item__control">\n      <div class="manage-complex-btn-n-2 manage-complex-btn-n-2_theme_yellow"\n        data-tip="Добавить в сравнение"\n        data-id="').concat(e.id,'"\n        data-type="').concat(e.type,'"\n        data-compare-n-2="">\n        ').concat(n.compare,"\n      </div>\n    </div>\n  "),r.appendChild(f)}var m=document.createElement("div");return m.className="flats-item__body",m.innerHTML='\n    <a class="flats-item__name link-n-2 text-w-semibold" href="'.concat(e.link,'" target="_blank" rel="nofollow noopener">').concat(e.name,'</a>\n    <div class="flats-item__info">\n      <div class="flats-item__price-block">\n        ').concat(e.price?'<div class="flats-item__total-price">'.concat(e.price,"</div>"):"","\n        ").concat(e.priceM?'<div class="flats-item__price-per-square">'.concat(e.priceM,"</div>"):"",'\n      </div>\n      <div class="flats-item__data">\n        ').concat(e.zhk?'<a class="flats-item__complex-link link-n-2" href="'.concat(e.zhk.link,'">').concat(e.zhk.name,"</a>"):"","\n        ").concat(!t.minimalistic&&e.locationCity?e.locationCity:"","\n        ").concat(!t.minimalistic&&e.metroString?e.metroString:"","\n        ").concat(!t.minimalistic&&e.developers&&e.developers.length?'\n          <div class="flats-item__provider">\n            <span>Застройщик: </span> \n              '.concat(e.developers.map(function(e){return'<a class="flats-item__provider-link link-n-2 link-n-2_dark-blue" href="'.concat(e.link,'" target="_blank" rel="nofollow noopener">').concat(e.name,"</a>")}).join(", "),"\n          </div>\n        "):"","\n        ").concat(!t.minimalistic&&e.dedline?'<div class="flats-item__time"><span>Срок сдачи: </span><span>'.concat(e.dedline,"</span></div>"):"","\n      </div>\n    </div>\n    ").concat(e.flats_count&&e.flats_href||e.telNumber?t.minimalistic?e.telNumber?'\n        <a class="button-n-2 button-n-2_theme_pale-yellow button-n-2_text_sm c-h-small rounded-md" href="tel: '.concat(e.telNumber,'">Позвонить</a>\n      '):"":'\n      <div class="flats-item__buttons">\n        '.concat(e.flats_count&&e.flats_href?'\n          <a class="button-n-2 button-n-2_type_medium button-n-2_theme_grey-blue button-n-2_text_sm" href="'.concat(e.flats_href,'">\n            ').concat(Object(i.a)(e.flats_count,"",["Все ".concat(e.flats_count," квартир"),"Все ".concat(e.flats_count," квартиры"),"Все квартиры (".concat(e.flats_count,")")]),"\n          </a>\n        "):"","\n        ").concat(e.telNumber?'\n          <a class="phone-number-n-2 phone-number-n-2_theme_yellow phone-number-n-2_type_40" href="#" data-tel="'.concat(e.telNumber,'">\n            <span class="phone-number-n-2__icon">').concat(n.phone,'</span>\n            <span class="phone-number-n-2__number">+7<span> Показать телефон</span></span>\n          </a>\n        '):"","\n      </div>\n    "):"","\n  "),r.appendChild(m),r}},function(e,t,n){"use strict";n(2),n(6),n(7),n(8),n(3),n(25),n(0),n(1),n(4),n(9),n(5);var i=n(13),r=n.n(i),a=n(176),o=n(34),s=n(27),l=(n(74),function(e,t,n){var i=t;t||((i=document.createElement("div")).className="col col_xs-4 col_sm-6 col_lg-3");var r=document.createElement("div");r.className="adv-complex-n-2",r.setAttribute("data-id",e.id);var a=document.createElement("div");a.className="adv-complex-n-2__image-wrapper";var o=document.createElement("img");o.className="adv-complex-n-2__image lazy";var s=e.image instanceof Array?e.image[0]:e.image;o.setAttribute("data-src",s);var l=document.createElement("a");l.className="adv-complex-n-2__content",l.href=e.link,l.target="_blank",l.rel="noopener noreferrer",n&&l.setAttribute("onclick",n);var c=document.createElement("div");c.className="adv-complex-n-2__link",c.innerHTML='\n    Реклама\n    <svg width="11" height="11" viewBox="0 0 11 11" fill="none" xmlns="http://www.w3.org/2000/svg">\n      <path fill-rule="evenodd" clip-rule="evenodd" d="M6.49997 0H10.5C10.7761 0 11 0.223877 11 0.5V4.5C11 4.77612 10.7761 5 10.5 5C10.2238 5 10 4.77612 10 4.5V1.70709L4.85355 6.85352C4.75592 6.95123 4.62793 7 4.49997 7C4.37201 7 4.24405 6.95117 4.14645 6.85358C3.95117 6.65826 3.95117 6.34174 4.14645 6.14648L9.29288 1H6.49997C6.22385 1 5.99997 0.776123 5.99997 0.5C5.99997 0.223877 6.22385 0 6.49997 0ZM7.99997 5.5C7.99997 5.22388 8.22385 5 8.49997 5C8.77612 5 8.99997 5.22388 9 5.5V10.5C9 10.7761 8.77612 11 8.5 11H0.5C0.223877 11 0 10.7761 0 10.5V2.5C0 2.22388 0.223877 2 0.5 2H5.5C5.77612 2 6 2.22382 6 2.5C6 2.77612 5.77612 3 5.5 3H1V10H7.99997V5.5Z" fill="#A9B7C7"></path>\n    </svg>\n  ';var u,d,h=document.createElement("div");h.className="adv-complex-n-2__title",h.textContent=(u=e.name,(d=document.createElement("textarea")).innerHTML=u,d.value);var f,m=document.createElement("div");if(m.className="adv-complex-n-2__description",m.innerText=e.text,e.phone){var p=document.createElement("button");p.className="adv-complex-n-2__order-call",p.setAttribute("type","button"),p.setAttribute("data-target","#modal-callback-right"),p.setAttribute("data-toggle","modal-n-2"),p.setAttribute("data-form","data-form"),p.setAttribute("data-form-adv",e.id),p.setAttribute("data-form-title","С Вами свяжется менеджер ЖК ".concat(e.building_name)),p.innerHTML='\n      <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <path d="M15.6413 12.6552L13.1704 10.1784C12.6782 9.6871 11.8632 9.70203 11.3538 10.2127L10.109 11.4601C10.0303 11.4167 9.94891 11.3713 9.86332 11.3231C9.07719 10.8866 8.00124 10.2882 6.86903 9.15259C5.73347 8.01459 5.1359 6.93454 4.69898 6.14613C4.65288 6.0626 4.6087 5.98207 4.56508 5.90559L5.40057 5.06945L5.81134 4.65725C6.32143 4.14586 6.33549 3.32921 5.84448 2.83648L3.37353 0.359373C2.88251 -0.132666 2.0671 -0.117739 1.55701 0.39365L0.860608 1.09563L0.879638 1.11457C0.646127 1.4132 0.450997 1.75763 0.305788 2.12905C0.171932 2.4826 0.0885942 2.81998 0.0504876 3.15805C-0.275785 5.86906 0.960265 8.34671 4.31474 11.7088C8.95165 16.3559 12.6884 16.0049 12.8496 15.9877C13.2007 15.9457 13.5372 15.8616 13.8791 15.7285C14.2465 15.5847 14.5899 15.3894 14.8877 15.1558L14.9029 15.1694L15.6084 14.477C16.1174 13.9657 16.1321 13.1487 15.6413 12.6552Z" fill="#071321"></path>\n      </svg>\n      <span class="adv-complex-n-2__order-call-text">Заказать звонок</span>\n    ',a.appendChild(p),(f=document.createElement("div")).className="adv-complex-n-2__phone";var v=document.createElement("a");v.className="phone-number-n-2 phone-number-n-2_theme_yellow",v.setAttribute("data-tel",e.phone),v.innerHTML='\n    <span class="phone-number-n-2__icon">\n      <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <path d="M15.6413 12.6552L13.1704 10.1784C12.6782 9.6871 11.8632 9.70203 11.3538 10.2127L10.109 11.4601C10.0303 11.4167 9.94891 11.3713 9.86332 11.3231C9.07719 10.8866 8.00124 10.2882 6.86903 9.15259C5.73347 8.01459 5.1359 6.93454 4.69898 6.14613C4.65288 6.0626 4.6087 5.98207 4.56508 5.90559L5.40057 5.06945L5.81134 4.65725C6.32143 4.14586 6.33549 3.32921 5.84448 2.83648L3.37353 0.359373C2.88251 -0.132666 2.0671 -0.117739 1.55701 0.39365L0.860608 1.09563L0.879638 1.11457C0.646127 1.4132 0.450997 1.75763 0.305788 2.12905C0.171932 2.4826 0.0885942 2.81998 0.0504876 3.15805C-0.275785 5.86906 0.960265 8.34671 4.31474 11.7088C8.95165 16.3559 12.6884 16.0049 12.8496 15.9877C13.2007 15.9457 13.5372 15.8616 13.8791 15.7285C14.2465 15.5847 14.5899 15.3894 14.8877 15.1558L14.9029 15.1694L15.6084 14.477C16.1174 13.9657 16.1321 13.1487 15.6413 12.6552Z" fill="#071321"></path>\n      </svg>\n    </span>\n    <span class="phone-number-n-2__number">+7<span> Показать телефон</span></span>\n  ',f.appendChild(v)}return a.appendChild(o),l.appendChild(c),l.appendChild(h),l.appendChild(m),r.appendChild(a),r.appendChild(l),e.phone&&r.appendChild(f),i.appendChild(r),i}),c=n(51);function u(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function d(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function h(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),e}n.d(t,"a",function(){return f});var f=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.elements=t;var i=n.callback;this.callback=i,window.tgb||(window.tgb={}),window.tgb.showed||(window.tgb.showed=[]),window.tgb.showedElements||(window.tgb.showedElements=[]),this.initTgb(0,this.elements.length)}return h(e,null,[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=function(){var i=n.customClass,r=u(t.querySelectorAll(i||".adv-slider-wrapper-n-2:not([data-manual-init])"));if(r.length)return new e(r,n)};Object(c.g)(i)}}]),h(e,[{key:"initTgb",value:function(e,t){var n=this,i=this.elements[e];if(i&&i.tgb&&e<t-1)this.initTgb(++e,t);else{var c={type:i.getAttribute("data-type"),promo:i.getAttribute("data-promo"),geocode:i.getAttribute("data-geocode"),sort:i.getAttribute("data-sort"),limit:i.getAttribute("data-limit"),orientation:i.getAttribute("data-orientation"),finder:i.getAttribute("data-finder"),metrika_goal:i.getAttribute("data-metrika-goal"),showed:window.tgb.showed,showed_element:window.tgb.showedElements,tgb_promo:i.getAttribute("data-tgb-promo"),exclude:i.getAttribute("data-exclude")};r.a.get("/ajax/tgb.php",{params:c,headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(r){var o=r.data;e++;var s=Math.ceil(1e4*Math.random());if(o.tgb){var d=n.fetchedOnce?o.tgb:o.tgb.sort(function(e,t){return e.promo&&t.promo?0:e.promo?-1:1});if(e<t){var h,f;if(o.showed)(h=window.tgb.showed).push.apply(h,u(o.showed));if(o.showed_element)(f=window.tgb.showedElements).push.apply(f,u(o.showed_element));n.initTgb(e,t)}if(s.toString(),n.tgbSlider=document.createElement("div"),n.tgbSlider.className="adv-slider-n-2",i.appendChild(n.tgbSlider),"vertical"!==c.orientation&&(n.tgbSlider.classList.add("swiper-container"),n.tgbSlider.classList.add("swiper-container-horizontal"),n.tgbSlider.classList.add("adv-slider-n-2-tgb-".concat(s)),n.tgbSliderWrapper=document.createElement("div"),n.tgbSliderWrapper.className="swiper-wrapper",n.tgbSlider.appendChild(n.tgbSliderWrapper)),d.forEach(function(e,t){n.metrikaAction="",c.metrika_goal&&(n.metrikaAction='ym(39897405, "reachGoal", "tgb_goal", { "tgb_name": "'.concat(e.name,'" });'));var i=document.createElement("div");if(i.className="adv-slider-n-2__item",i.id=e.id,"vertical"!==c.orientation)i.classList.add("swiper-slide");else if(t+1>c.limit)return;var r=l(e,i,n.metrikaAction);"vertical"===c.orientation?n.tgbSlider.appendChild(r):n.tgbSliderWrapper.appendChild(r)}),"vertical"!==c.orientation){var m=document.createElement("div");m.className="swiper-button_white-scale swiper-button-prev",m.innerHTML='\n              <svg width="7" height="12" viewBox="0 0 7 12" fill="none" xmlns="http://www.w3.org/2000/svg">\n                <path d="M5.89595 10.8977C6.03468 10.7599 6.03468 10.5359 5.89595 10.3981L1.46513 6.00483L5.89595 1.60299C6.03468 1.46517 6.03468 1.2412 5.89595 1.10337C5.75722 0.965543 5.53177 0.965543 5.39304 1.10337L0.719435 5.74641C0.650068 5.81532 0.615385 5.90146 0.615385 5.99622C0.615385 6.08236 0.650068 6.17712 0.719435 6.24603L5.39304 10.8891C5.53177 11.0355 5.75722 11.0355 5.89595 10.8977Z" fill="#071321" stroke="#071321"></path>\n              </svg>\n            ';var p=document.createElement("div");p.className="swiper-button_white-scale swiper-button-next",p.innerHTML='\n              <svg width="7" height="12" viewBox="0 0 7 12" fill="none" xmlns="http://www.w3.org/2000/svg">\n                <path d="M5.89595 10.8977C6.03468 10.7599 6.03468 10.5359 5.89595 10.3981L1.46513 6.00483L5.89595 1.60299C6.03468 1.46517 6.03468 1.2412 5.89595 1.10337C5.75722 0.965543 5.53177 0.965543 5.39304 1.10337L0.719435 5.74641C0.650068 5.81532 0.615385 5.90146 0.615385 5.99622C0.615385 6.08236 0.650068 6.17712 0.719435 6.24603L5.39304 10.8891C5.53177 11.0355 5.75722 11.0355 5.89595 10.8977Z" fill="#071321" stroke="#071321"></path>\n              </svg>\n            ',i.appendChild(m),i.appendChild(p),new a.a(n.tgbSlider)}i.tgb="init"}n.fetchedOnce=!0}).then(function(){o.a.init({container:n.tgbSlider,triggersSelector:'[data-toggle="modal-n-2"]'}),s.a.init(n.tgbSlider),window.lazyloadInstance&&window.lazyloadInstance.update(),n.callback instanceof Function&&n.callback()})}}}]),e}()},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(16),r=n.n(i);var a=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,this.swiper=new r.a(t,{slidesPerView:4,spaceBetween:24,initialSlide:0,loop:!0,navigation:{nextEl:t.nextElementSibling.nextElementSibling,prevEl:t.nextElementSibling},breakpoints:{1280:{slidesPerView:4,spaceBetween:24},1170:{centeredSlides:!1,slidesPerView:"auto",spaceBetween:0}}})}},function(e,t,n){"use strict";n.d(t,"a",function(){return d});n(2),n(6),n(7),n(17),n(58),n(24),n(8),n(45),n(3),n(38),n(12),n(250),n(0),n(1),n(4),n(35),n(46),n(9),n(5);var i=n(197),r=n.n(i),a=n(57);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function s(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}var u=["#00D1FF","#1DECFA","#63E742","#BEED3A","#FFCB00","#FF7A00","#FF3D00","#FF003D","#FF00C7","#AD00FF","#4200FF","#2B098D"],d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.state={reseted:!1},this.element=t,this.rangeSliderElement=t.querySelector(".range-block-n-2__slider"),this.rangeSliderElement&&(this.rangeSliderTheme=this.rangeSliderElement.getAttribute("data-slider-theme")||"gradient"),this.elements={inputBefore:this.element.querySelector(".range-block-n-2__input-before"),inputAfter:this.element.querySelector(".range-block-n-2__input-after")},this.elementsTrueValues={inputBefore:0,inputAfter:0},this.resetButtons={resetAfter:this.element.querySelector(".range-block-n-2__reset_after"),resetBefore:this.element.querySelector(".range-block-n-2__reset_before")},this.limited=this.element.getAttribute("data-limited"),this.numericFormat=this.element.hasAttribute("data-numeric-format"),this.numericThousands=this.element.hasAttribute("data-number-thousands"),this.rangeCheckboxes=s(t.parentNode.querySelectorAll('[type="radio"]')),this.init(),this.bindEvents()}return c(e,null,[{key:"init",value:function(){s((arguments.length>0&&void 0!==arguments[0]?arguments[0]:document).querySelectorAll(".range-block-n-2")).forEach(function(t){t.RangeSelect||(t.RangeSelect=new e(t))})}}]),c(e,[{key:"init",value:function(){this.rangeSliderElement&&this.initRangeSlider()}},{key:"setResetButtonState",value:function(e,t){t&&(t.style.display=e?"":"none")}},{key:"resetAfterFunc",value:function(){this.elementsTrueValues.inputAfter="",this.elements.inputAfter.value="",this.elements.inputAfter.dispatchEvent(new CustomEvent("input")),this.elements.inputAfter.dispatchEvent(new CustomEvent("change")),this.setResetButtonState(!1,this.resetButtons.resetAfter)}},{key:"resetBeforeFunc",value:function(){this.elementsTrueValues.inputBefore="",this.elements.inputBefore.value="",this.elements.inputBefore.dispatchEvent(new CustomEvent("input")),this.elements.inputBefore.dispatchEvent(new CustomEvent("change")),this.setResetButtonState(!1,this.resetButtons.resetBefore)}},{key:"bindEvents",value:function(){var e=this,t=this.elements,n=t.inputBefore,i=t.inputAfter,r=this.resetButtons,o=r.resetBefore,s=r.resetAfter;s&&s.addEventListener("click",function(t){return e.resetAfterFunc()}),o&&o.addEventListener("click",function(t){return e.resetBeforeFunc()}),[n,i].forEach(function(t){t&&t.addEventListener("keypress",function(n){if(e.numericFormat||e.numericThousands){var i=parseInt(n.key,10)>=0||[",","."].includes(n.key),r=+(t.value+n.key).replace(",",".").split(" ").join("");if(!i||!r)return n.preventDefault(),!1}})}),n&&(n.addEventListener("input",function(t){e.state={reseted:!1};var n=t.target.value;e.setResetButtonState(n||0===n,o)}),n.addEventListener("focus",function(){e.elementsTrueValues.inputBefore?n.value=e.elementsTrueValues.inputBefore:0===e.elementsTrueValues.inputBefore&&(n.value="")}),n.addEventListener("blur",function(){e.numericThousands?n.value=Object(a.b)(n.value):e.numericFormat&&(n.value=Object(a.a)(n.value)),e.rangeSliderElement&&e.updateRangeSliderValues(e.elementsTrueValues.inputBefore,0)}),n.addEventListener("change",function(t){t.detail&&+t.detail.nextValue>-1?e.elementsTrueValues.inputBefore=+t.detail.nextValue:e.elementsTrueValues.inputBefore=n.value})),i&&(i.addEventListener("input",function(t){e.state={reseted:!1};var n=t.target.value;e.setResetButtonState(n||0===n,s)}),i.addEventListener("focus",function(){e.elementsTrueValues.inputAfter?i.value=e.elementsTrueValues.inputAfter:0===e.elementsTrueValues.inputAfter&&(i.value="")}),i.addEventListener("blur",function(){e.numericThousands?i.value=Object(a.b)(i.value):e.numericFormat&&(i.value=Object(a.a)(i.value)),e.rangeSliderElement&&e.updateRangeSliderValues(e.elementsTrueValues.inputAfter,1)}),i.addEventListener("change",function(t){t.detail&&+t.detail.nextValue>-1?e.elementsTrueValues.inputAfter=+t.detail.nextValue:e.elementsTrueValues.inputAfter=i.value})),this.rangeCheckboxes.forEach(function(t){t.addEventListener("change",function(t){e.state={reseted:!1},e.updateRangeSliderOptions(t.target.id)})})}},{key:"initRangeSlider",value:function(){var e=this;this.pips=this.element.hasAttribute("data-pips"),this.rangeAll=JSON.parse(this.element.getAttribute("data-all")),this.rangeArea=JSON.parse(this.element.getAttribute("data-area")),this.currentRangeData=this.rangeAll,this.rangeSlider=r.a.create(this.rangeSliderElement,this.getRangeSliderConfig("all")),this.rangeSliderConnects=this.rangeSliderElement.querySelector(".range-block-n-2__slider-connects");var t=document.createElement("div"),n=document.createElement("div");t.classList.add("range-block-n-2__slider-connect-left"),n.classList.add("range-block-n-2__slider-connect-right"),this.rangeSliderConnects.appendChild(t),this.rangeSliderConnects.appendChild(n),this.setConnectsGradient();var i=this.rangeSliderElement.querySelector(".range-block-n-2__slider-handle-lower"),s=this.rangeSliderElement.querySelector(".range-block-n-2__slider-handle-upper");this.rangeSlider.on("update",function(r,l,c,d,h){var f=o(r,2),m=f[0],p=f[1],v=e.currentRangeData.find(function(e){return+m<e[1]}),y=e.currentRangeData.find(function(e){return+p<=e[1]});i.style.backgroundColor=u[e.currentRangeData.indexOf(v)-1],s.style.backgroundColor=u[e.currentRangeData.indexOf(y)-1],t.style.transform="scale3d(".concat(1-(100-h[0])/100,", 1, 1)"),n.style.transform="scale3d(".concat(1-h[1]/100,", 1, 1)"),0===l?(e.elements.inputBefore.value=e.numericFormat?Object(a.a)(r[0]):Math.trunc(r[0]),e.elementsTrueValues.inputBefore=Math.trunc(r[0])):(e.elements.inputAfter.value=e.numericFormat?Object(a.a)(r[1]):Math.trunc(r[1]),e.elementsTrueValues.inputAfter=Math.trunc(r[1]))}),this.rangeSlider.on("change",function(t,n){var i=n?"inputAfter":"inputBefore";e.elementsTrueValues[i]=Math.trunc(t[n]),e.elements[i].value=e.numericFormat?Object(a.a)(t[n]):Math.trunc(t[n]),e.elements[i].dispatchEvent(new CustomEvent("change",{bubbles:!0,cancelable:!1,detail:{nextValue:Math.trunc(t[n])}})),e.state={reseted:!1}})}},{key:"getRangeSliderConfig",value:function(e){var t=this,n={cssPrefix:"range-block-n-2__slider-",connect:!0,range:{},start:[this.currentRangeData[0][1]||0,this.currentRangeData[this.currentRangeData.length-1][1]||1e8]};return this.currentRangeData.forEach(function(e,i){var r,a=o(e,2),s=a[0],l=a[1];r=0===i?"min":i===t.currentRangeData.length-1?"max":s,n.range[r]=l}),this.pips&&(n.pips={mode:"values",values:this.currentRangeData.map(function(e){return e[1]}),stepped:!0,filter:function(e,n){return!n&&0!==e||e===t.currentRangeData[t.currentRangeData.length-1][1]?-1:1},format:{to:function(n){var i,r;return n===t.currentRangeData[t.currentRangeData.length-2][1]?(i=t.currentRangeData[t.currentRangeData.length-2][1]/t.currentRangeData[1][1],r=!0):i=n/t.currentRangeData[1][1],"toggle-area"===e&&(i*=10),i+(r?"+":"")}}}),n}},{key:"setConnectsGradient",value:function(){var e=this,t=this.currentRangeData.map(function(t,n){if(!(n>e.currentRangeData.length-2)){var i=o(t,1)[0],r=o(e.currentRangeData[n+1],1)[0];return"".concat(u[n]," ").concat(i,"%, ").concat(u[n]," ").concat(r,"%")}}).filter(function(e){return e}).join(", ");this.rangeSliderConnects.style.background="\n      linear-gradient(to right, ".concat(t,")\n    ")}},{key:"updateRangeSliderOptions",value:function(e){if(this.rangeSlider){switch(e){case"toggle-all":this.currentRangeData=this.rangeAll;break;case"toggle-area":this.currentRangeData=this.rangeArea;break;default:this.currentRangeData=this.rangeAll}var t=this.getRangeSliderConfig(e);this.rangeSlider.updateOptions(t),this.setConnectsGradient()}}},{key:"updateRangeSliderValues",value:function(e,t){this.rangeSlider.setHandle(t,e,!1)}},{key:"closePopup",value:function(){this.elements.pricePopup.classList.add("filter-popup-hide"),this.elements.output.classList.remove("open-dropdown")}},{key:"clearingInputs",value:function(){this.elementsTrueValues={inputBefore:0,inputAfter:0},this.elements.inputAfter&&(this.elements.inputAfter.value="",this.elements.inputAfter.setAttribute("value","")),this.elements.inputBefore&&(this.elements.inputBefore.value="",this.elements.inputBefore.setAttribute("value","")),this.setResetButtonState(!1,this.resetButtons.resetAfter),this.setResetButtonState(!1,this.resetButtons.resetBefore),this.rangeSlider&&(this.state={reseted:!0},this.rangeSlider.reset())}},{key:"isReseted",get:function(){return this.state.reseted}},{key:"trueValues",get:function(){return this.elementsTrueValues}}]),e}()},,,function(e,t,n){"use strict";n.d(t,"a",function(){return s});n(2),n(6),n(7),n(8),n(3),n(12),n(75),n(0),n(1),n(4),n(5);var i=n(87),r=n.n(i);function a(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var s=function(){var e,t,n;function i(e){switch(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.element=e,this.type=e.getAttribute("data-mask"),this.type){case"number":this.mask=new r.a(this.element,{mask:Number,scale:0,signed:!1,thousandsSeparator:" "});break;case"decimal":var t={mask:Number,scale:2,signed:!1,thousandsSeparator:" "};this.element.hasAttribute("data-mask-limited")&&(t.max=this.element.getAttribute("data-mask-limited")),this.mask=new r.a(this.element,t);break;case"phone":this.mask=new r.a(this.element,{mask:"+7(000)000-00-00",lazy:!1});break;case"ru":this.mask=new r.a(this.element,{mask:/^[А-яЁё ]{0,}$/})}this.mask&&(this.element.mask=this.mask)}return e=i,n=[{key:"init",value:function(){return a((arguments.length>0&&void 0!==arguments[0]?arguments[0]:document).querySelectorAll("input[data-mask]")).map(function(e){return new i(e)})}}],(t=null)&&o(e.prototype,t),n&&o(e,n),i}()},function(e,t,n){"use strict";n.d(t,"a",function(){return l});n(2),n(6),n(7),n(8),n(3),n(12),n(0),n(1),n(4),n(5);var i=n(100);function r(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}var s=24,l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t.StickyContainer=this,this.element=t,this.parent=t.parentNode,this.topOffset=+t.getAttribute("data-sticky-offset")||s,this.mobileState=t.hasAttribute("data-sticky-mobile"),this.stickedBottom=t.hasAttribute("data-sticky-bottom"),this.element.classList.contains("sticky-container")||this.element.classList.add("sticky-container"),this.parent.classList.contains("sticky-parent")||this.parent.classList.add("sticky-parent"),this.state={disabled:!1,eventsCount:0,inited:!1,sticked:!1,stickedBottom:!1,lastTransform:0},this.onScroll=this.onScroll.bind(this),this.bindHandlers()}return o(e,null,[{key:"init",value:function(){return r((arguments.length>0&&void 0!==arguments[0]?arguments[0]:document).querySelectorAll("[data-sticky-container]")).map(function(t){return new e(t)})}}]),o(e,[{key:"bindHandlers",value:function(){var e=this;window.addEventListener("resize",Object(i.a)(function(){return e.init()},25)),this.init()}},{key:"init",value:function(){this.state.disabled||(document.documentElement.clientWidth>=1024||this.mobileState?this.state.inited||(this.onScroll(),document.addEventListener("scroll",this.onScroll),this.state.inited=!0):this.state.inited&&(document.removeEventListener("scroll",this.onScroll),this.unstick(),this.unstickBottom(),this.state.inited=!1),this.state.inited&&this.state.sticked&&this.stickRight())}},{key:"onScroll",value:function(){if(this.state.eventsCount<2)return this.state.eventsCount++,!1;if(document.documentElement.clientWidth<1024&&!this.mobileState)return this.unstick(),this.unstickBottom(),!1;var e=this.height,t=this.parent.getBoundingClientRect(),n=t.top,i=t.bottom,r=this.parent.clientHeight-e;r>0?n-this.topOffset<0&&i-e-this.topOffset>0?this.state.sticked||(this.stick(),this.unstickBottom()):(this.state.sticked&&this.unstick(),i-e-this.topOffset<0&&i>0?this.state.stickedBottom||this.stickBottom():this.state.stickedBottom&&this.unstickBottom()):n<0&&i<=document.documentElement.clientHeight?this.element.style.transform="translateY(".concat(r,"px)"):this.element.style.transform=""}},{key:"stick",value:function(){var e=this.parentPaddings,t=this.parent.clientWidth-e.left-e.right;this.element.style.width="".concat(t,"px"),this.stickRight(e),this.stickedBottom?this.element.classList.add("sticky-container_sticked-screen-bottom"):this.element.classList.add("sticky-container_sticked"),this.state.sticked=!0}},{key:"stickRight",value:function(e){e||(e=this.parentPaddings);var t=this.parentOffsetRight+e.right;this.element.style.right="".concat(t,"px")}},{key:"unstick",value:function(){this.stickedBottom?this.element.classList.remove("sticky-container_sticked-screen-bottom"):this.element.classList.remove("sticky-container_sticked"),this.element.style.width="",this.element.style.right="",this.state.sticked=!1}},{key:"stickBottom",value:function(){var e=this.parentPaddings,t=this.parent.clientWidth-e.left-e.right;this.element.style.width="".concat(t,"px"),this.element.style.right="".concat(e.right,"px"),this.element.classList.add("sticky-container_sticked-bottom"),this.state.stickedBottom=!0,this.element.style.right=""}},{key:"unstickBottom",value:function(){this.element.classList.remove("sticky-container_sticked-bottom"),this.state.stickedBottom=!1}},{key:"disable",value:function(){this.state.disabled=!0,this.element.classList.add("disabled"),this.unstick(),this.unstickBottom(),document.removeEventListener("scroll",this.onScroll)}},{key:"enable",value:function(){this.state.inited=!1,this.state.disabled=!1,this.element.classList.remove("disabled"),this.init()}},{key:"height",get:function(){return this.element.clientHeight}},{key:"parentOffsetRight",get:function(){var e=this.parent.getBoundingClientRect();return document.documentElement.clientWidth-(e.left+this.parent.clientWidth)}},{key:"parentPaddings",get:function(){var e=window.getComputedStyle?window.getComputedStyle(this.parent,null):this.parent.currentStyle;return{left:parseInt(e.paddingLeft,10)||0,right:parseInt(e.paddingRight,10)||0}}}]),e}()},,function(e,t,n){"use strict";n.d(t,"a",function(){return l});n(2),n(6),n(7),n(8),n(3),n(12),n(0),n(1),n(4),n(9),n(5);function i(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}var o="STATE_CLOSE",s="STATE_OPEN",l=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,this.options={closeOnItemClick:n.closeOnItemClick||!0,closeOnOutsideClick:n.closeOnOutsideClick||!0,preventEvents:n.preventEvents||this.element.hasAttribute("data-prevent-events")||!1},this.trigger=this.element.querySelector(".js-dropdown-trigger"),this.placeholder=this.element.querySelector(".js-dropdown-placeholder"),this.list=this.element.querySelector(".js-dropdown-list"),this.listItems=i(this.list.querySelectorAll(".js-dropdown-list-item")),this.listItems=this.listItems.map(function(e){return{text:e.getAttribute("data-value"),input:e.querySelector("input"),label:e.querySelector("label")}}),this.state=this.element.classList.contains("is-open")?s:o,this.bindEvents()}return a(e,null,[{key:"init",value:function(){i((arguments.length>0&&void 0!==arguments[0]?arguments[0]:document).querySelectorAll(".js-dropdown:not([data-manual-init])")).forEach(function(t){t.Dropdown=new e(t)})}}]),a(e,[{key:"bindEvents",value:function(){var e=this;this.trigger&&this.trigger.addEventListener("click",function(t){e.state===o?e.open():e.close()}),this.listItems.forEach(function(t){var n=t.input,i=t.text;n.addEventListener("change",function(n){e.options.preventEvents&&n.preventDefault(),e.element.dispatchEvent(new CustomEvent("dropdown-change",{detail:{item:t}})),i&&(e.placeholder.innerText=i),e.options.closeOnItemClick&&e.close()})}),this.options.closeOnOutsideClick&&document.addEventListener("click",function(t){t.target.closest(".js-dropdown")||e.close()})}},{key:"open",value:function(){this.element.classList.add("is-open"),this.element.dispatchEvent(new CustomEvent("dropdown-open")),this.state=s}},{key:"close",value:function(){this.element.classList.remove("is-open"),this.element.dispatchEvent(new CustomEvent("dropdown-close")),this.state=o}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return d});n(2),n(6),n(7),n(24),n(8),n(3),n(0),n(1),n(4),n(35),n(5);var i=n(15),r=n.n(i),a=n(50),o=n(185),s=n(11);function l(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function u(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}var d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,this.tabs={links:l(t.querySelectorAll(".apartment-price__tab"))},this.placementMapNode=this.element.querySelector(".js-placement-map"),this.init()}return u(e,null,[{key:"init",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:document).querySelector(".apartment-price");if(t)return new e(t)}}]),u(e,[{key:"init",value:function(){var e=this;this.placementMapNode&&window.map_items&&(this.placementMap=new o.a(this.placementMapNode)),this.tabsController=new a.a(this.tabs.links,{line:this.tabs.line,linkClass:"apartment-price__tab",tabsClass:"corps-tabs__tab",beforeChange:function(t){e.placementMap&&e.placementMap.setPlacementItemById(t.getAttribute("data-placement-id"))}}),r.a.subscribe(s.k,function(t,n){var i=n.data,r=e.tabs.links.find(function(e){return e.getAttribute("data-placement-id")===i.toString()});if(r){var a=e.tabsController.tabs.find(function(e){return e.id===r.getAttribute("href").replace("#","")});a&&(e.tabsController.activeLink=r,e.tabsController.activeTab=a)}}),this.tabsController.init()}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return m});n(2),n(17),n(58),n(25),n(70),n(61),n(0),n(1),n(9);var i=n(15),r=n.n(i),a=n(55),o=n(66),s=n(60),l=n(11),c=n(44);function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){d(e,t,n[t])})}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function f(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),e}var m=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,this.objectsMapItems=window.map_items,this.placementName=this.objectsMapItems.name,this.placementImage=this.objectsMapItems.image,this.placementItems=this.objectsMapItems.items,Object(c.a)({elements:[this.element],observerMargin:100,onLoad:function(){return n.bindMapEvents()},scriptSrc:"https://api-maps.yandex.ru/2.1/?lang=ru_RU&onload=ymapsBroadcast&apikey=81fd4d74-8f99-4223-b3a9-ced2137399e7",scriptUniqueSelector:"api-maps.yandex"})}return f(e,null,[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;if(window.mapItems&&window.mapItems.length){var n=t.querySelector(".js-placement-map:not([data-manual-init])");if(n)return new e(n)}}}]),f(e,[{key:"bindMapEvents",value:function(){var e=this,t=function(){e.ymaps=window.ymaps,e.initMap()};window.ymaps?t():window.ymapsObserver.subscribe(function(){t()})}},{key:"initMap",value:function(){var e=this,t=Object(o.a)({ymaps:this.ymaps,position:{top:"112px",right:"20px"}}),n=Object(a.a)(this.ymaps,{top:"20px",right:"20px"});this.objectsMap=new this.ymaps.Map(this.element,{center:[55.75,37.7],zoom:15,controls:[]},{suppressMapOpenBlock:!0,minZoom:12,maxZoom:16}),t.events.add("fullscreenexit",function(){e.objectsMap.container.fitToViewport()}),this.objectsMap.controls.add(t),this.objectsMap.controls.add(n),this.objectsMap.behaviors.disable("scrollZoom"),document.body.clientWidth<1024&&this.objectsMap.behaviors.disable("drag"),this.objectsManager=new this.ymaps.ObjectManager({clusterize:!1});var i=[],c=[];this.placementItems.forEach(function(t){if(t.polygon){var n=JSON.parse(t.polygon);c.push(n),i.push({type:"Feature",id:t.id,geometry:{type:"Polygon",coordinates:n},properties:{data:u({},t,{image:e.placementImage})}})}if(t.point){var r=JSON.parse(t.point);c.push(r),i.push({type:"Feature",id:t.id,geometry:{type:"Point",coordinates:JSON.parse(t.point)},properties:{data:u({},t,{image:e.placementImage})}})}}),i.length&&this.objectsManager.add({type:"FeatureCollection",features:i}),this.objectsManager.objects.options.set({balloonLayout:this.getBalloonLayout(this.ymaps),balloonPanelMaxMapArea:0,balloonShadow:!1,hideIconOnBalloonOpen:!1,iconLayout:"default#image",iconImageHref:"".concat(window.VECTOR_IMAGES_LINK,"ico-complex-on-map.svg"),iconImageSize:[50,50],iconImageOffset:[-15,-45]}),Object(s.a)()||(this.objectsManager.objects.events.add("click",function(e){var t=e.get("objectId");r.a.publish(l.k,{data:t})}),this.objectsManager.objects.events.add("mouseenter",function(t){var n=t.get("objectId");e.mouseInsidePlacemark=!0,e.openBalloon(n)}),this.objectsManager.objects.events.add("mouseleave",function(t){e.mouseInsidePlacemark=!1,setTimeout(function(){e.closeBalloonIfNeeded()},100)}),this.objectsManager.objects.balloon.events.add("mouseenter",function(t){e.mouseInsideBalloon=!0}),this.objectsManager.objects.balloon.events.add("mouseleave",function(t){e.mouseInsideBalloon=!1,setTimeout(function(){e.closeBalloonIfNeeded()},100)}),this.objectsMap.events.add("balloonopen",function(){e.isBalloonIsOpen=!0}),this.objectsMap.events.add("balloonclose",function(){e.isBalloonIsOpen=!1})),this.objectsMap.geoObjects.add(this.objectsManager),this.initPlacement("general")}},{key:"openBalloon",value:function(e){this.objectsManager.objects.getById(e)&&!this.isBalloonIsOpen&&this.objectsManager.objects.balloon.open(e)}},{key:"closeBalloonIfNeeded",value:function(){this.mouseInsideBalloon||this.mouseInsidePlacemark||this.objectsManager.objects.balloon.close()}},{key:"initPlacement",value:function(e){var t,n=this;this.objectsManager.objects.balloon.close(),"general"===e?this.objectsManager.setFilter(function(){return!0}):this.objectsManager.setFilter(function(n){return n.id.toString()===e&&(t=n,!0)}),(t||"general"===e)&&setTimeout(function(){n.objectsMap.setBounds(n.objectsManager.getBounds());var e=n.objectsMap.getCenter(),t=new n.ymaps.Placemark(e,{},{iconLayout:"default#image",iconImageHref:"/local/templates/main/assets/images/maps-baloon.png",iconImageSize:[32,43],iconImageOffset:[-10,-45],zIndex:9e3,id:"zoomMark",visible:!1});n.objectsMap.geoObjects.add(t)},100)}},{key:"setPlacementItemById",value:function(e){this.objectsMap&&this.initPlacement(e)}},{key:"getBalloonLayout",value:function(e){return e.templateLayoutFactory.createClass('\n      <div class="search-map-balloon no-arrow shadow-md rounded-xl">\n        <div class="search-map-balloon__preview overflow-hidden rounded-xl">\n          <img src="{{ properties.data.image }}" alt="Фото {{ properties.data.name }}">\n        </div>\n        <div class="search-map-balloon__body">\n          <a href="{{ properties.data.link }}" class="search-map-balloon__title link-n-2 text-w-medium text-nowrap">{{ properties.data.name }}</a>\n          <div class="search-map-balloon__info text-sm text-nowrap">{{ properties.data.info }}</div>\n          <div class="search-map-balloon__price-square text-sm text-nowrap">{{ properties.data.priceM|raw }}</div>\n          <div class="search-map-balloon__price-total text-sm text-nowrap">{{ properties.data.price }}</div>\n        </div>\n      </div>',{getShape:function(){var e,t=this.getElement();if(t){var n=t.firstElementChild;e=new self.ymaps.shape.Rectangle(new self.ymaps.geometry.pixel.Rectangle([[0,-n.offsetHeight/2],[n.offsetWidth+30,n.offsetHeight/2]]))}return e}})}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return r});n(2),n(6),n(7),n(8),n(3),n(12),n(0),n(1),n(4),n(5);function i(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var r=function(e){for(var t,n=0,i=0,r=0,a=0;a<e.length-1;a++)t=e[a][0]*e[a+1][1]-e[a+1][0]*e[a][1],n+=(e[a][0]+e[a+1][0])*t,i+=(e[a][1]+e[a+1][1])*t,r+=t;return[n/=3*r,i/=3*r]};window.getpolygon=function(e){var t=e.map(function(e){return e[0]}),n=e.map(function(e){return e[1]});return[(Math.min.apply(Math,i(t))+Math.max.apply(Math,i(t)))/2,(Math.min.apply(Math,i(n))+Math.max.apply(Math,i(n)))/2]}},function(e,t,n){"use strict";n.d(t,"a",function(){return l});n(2),n(6),n(7),n(24),n(8),n(3),n(38),n(12),n(98),n(0),n(1),n(4),n(9),n(5);var i=n(13),r=n.n(i);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t.container,this.map=t.map,this.polygon=t.polygon,this.infrastructureCheckboxes=o(this.container.querySelectorAll('#infrastructure input[type="checkbox"]')),this.ecologyCheckboxes=o(this.container.querySelectorAll('#ecology input[type="checkbox"]')),this.urls={ecology:this.container.getAttribute("data-eco-url"),infrastructure:this.container.getAttribute("data-infrastructure-url")},this.infrastructureIcon={banks:"".concat(window.VECTOR_IMAGES_LINK,"map-icon_banks-n-2.svg"),school:"".concat(window.VECTOR_IMAGES_LINK,"map-icon_edu-n-2.svg"),kindergarten:"".concat(window.VECTOR_IMAGES_LINK,"map-icon_garden-n-2.svg"),shopping:"".concat(window.VECTOR_IMAGES_LINK,"map-icon_shop-n-2.svg"),pharmacy:"".concat(window.VECTOR_IMAGES_LINK,"map-icon_pharmacy-n-2.svg"),park:"".concat(window.VECTOR_IMAGES_LINK,"map-icon_park-n-2.svg"),medicine:"".concat(window.VECTOR_IMAGES_LINK,"map-icon_medicine-n-2.svg")},this.cache={ecology:{},infrastructure:{school:[],kindergarten:[],medicine:[],shopping:[],pharmacy:[],park:[],banks:[],industzones:[],thermalstations:[],industenterprises:[],incinerations:[],treatmentfacil:[],dump:[]}},this.initHandlers()}var t,n,i;return t=e,(n=[{key:"initHandlers",value:function(){var e=this;this.infrastructureCheckboxes.forEach(function(t){t.addEventListener("change",function(t){return e.handleInfrastructureChange(t)})}),this.ecologyCheckboxes.forEach(function(t){t.addEventListener("change",function(t){return e.handleEcologyChange(t)})})}},{key:"infrastructureRequest",value:function(e){if(this.polygon){var t=this.polygon[0]&&this.polygon[0][0]?this.polygon[0][0]:[];return r.a.get(this.urls.infrastructure,{params:{apikey:this.yandexFirmsKey,lang:"ru_RU",ll:t.reverse().join(","),results:2,rspn:1,text:this.translateInfrastructureValue(e),type:"biz"},headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(e){return e.data})}}},{key:"ecologyRequest",value:function(){return r.a.get(this.urls.ecology,{params:{coords:this.getMapBounds()},headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(e){return e.data})}},{key:"onEcologyRequest",value:function(e){var t=e.features;for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];this.cache.ecology[n]||(this.cache.ecology[n]=[]),this.appendArray(this.cache.ecology[n],i)}}},{key:"updateEcologyPolygons",value:function(){var e=this;this.removeEcologyPolygons(),this.ecologyCheckboxes.forEach(function(t){t.checked&&e.addEcologyPolygon(t.value)})}},{key:"appendArray",value:function(e,t){t.length&&"object"===a(t)&&t.map(function(t){e.find(function(e){return t.id===e.id})||(t.options&&t.options.hintLayout&&delete t.options.hintLayout,e.push(t))})}},{key:"removeArray",value:function(e,t){t.map(function(t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)})}},{key:"translateInfrastructureValue",value:function(e){switch(e){case"kindergarten":return"Детский сад";case"school":return"Школа";case"medicine":return"Больница";case"shopping":return"Магазин";case"banks":return"Банк";case"pharmacy":return"Аптека";case"park":return"Сквер"}}},{key:"handleInfrastructureChange",value:function(e){throw new Error("Must be implemented in an inherited class")}},{key:"handleEcologyChange",value:function(e){throw new Error("Must be implemented in an inherited class")}},{key:"addEcologyPolygon",value:function(e){throw new Error("Must be implemented in an inherited class")}},{key:"removeEcologyPolygons",value:function(){throw new Error("Must be implemented in an inherited class")}},{key:"getMapBounds",value:function(){throw new Error("Must be implemented in an inherited class")}}])&&s(t.prototype,n),i&&s(t,i),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n(13),r=n.n(i);function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,this.layoutsList=this.element.querySelector(".js-apartment-layouts-list"),this.url=this.layoutsList.getAttribute("data-url"),this.moreLayoutsButton=this.element.querySelector(".js-apartment-layouts-more"),this.init(),this.bindEvents()}return o(e,null,[{key:"init",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:document).querySelector(".js-apartment-layouts");if(t)return new e(t)}}]),o(e,[{key:"init",value:function(){this.lg=lightGallery(this.layoutsList,{addClass:"lg_white",backdropClass:"lg-backdrop_white",thumbnail:!0,hash:!1,download:!1,loop:!0,exThumbImage:"data-src",selector:".layout__preview"})}},{key:"bindEvents",value:function(){var e=this;this.moreLayoutsButton&&this.moreLayoutsButton.addEventListener("click",function(t){return r.a.get(e.url).then(function(t){var n=t.data;n&&e.onRequest(n)})})}},{key:"onRequest",value:function(e){var t=e.html;this.moreLayoutsButton.parentNode.removeChild(this.moreLayoutsButton),this.layoutsList.insertAdjacentHTML("beforeend",t),window.lazyloadInstance&&window.lazyloadInstance.update();var n=this.layoutsList.getAttribute("lg-uid");window.lgData&&window.lgData[n]&&window.lgData[n].destroy(!0),this.init()}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return h});n(2),n(6),n(7),n(8),n(3),n(75),n(211),n(0),n(1),n(4),n(9),n(5);var i,r,a,o=n(33),s=n.n(o),l=n(10);function c(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function d(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}var h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,this.moveTo=new s.a,this.articleAnchors=c(t.querySelectorAll('a[href*="#"]'));var n=this.element.getAttribute("data-article-height-xs"),o=this.element.getAttribute("data-article-height-sm"),l=this.element.getAttribute("data-article-height-md");r=+n||1500,i=+o||2e3,a="none"===l?Number.MAX_SAFE_INTEGER:+l||4e3,this.containers={article:t.querySelector(".js-object-article-content"),author:t.querySelector(".object-article__author")},this.articleButton=t.querySelector("[data-accordion-article]"),this.articleButton&&(this.state={minimized:!1},this.textElement=this.articleButton.querySelector("[data-accordion-text]"),this.textElement&&(this.text={default:this.textElement.innerText,alt:"Свернуть"}),this.init())}return d(e,null,[{key:"init",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:document).querySelector(".js-object-article");if(t)return new e(t)}}]),d(e,[{key:"init",value:function(){if(this.containers.article)if(this.articleHeight<=this.heightLimit)this.articleButton&&(this.articleButton.style.display="none");else{if(this.containers.article&&this.articleButton)this.articleButton.style.display="",window.innerWidth<1024||a<this.authorHeight+this.articleHeight?this.minimize():this.toggleButton(),this.bindHandlers();this.bindAnchorEvents()}}},{key:"bindAnchorEvents",value:function(){var e=this;this.articleAnchors.forEach(function(t){t.addEventListener("click",function(){e.expand(!0),e.toggleButton()})})}},{key:"expand",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.containers.article.clientHeight;this.containers.article.style.height="auto",l.c.from(this.containers.article,e?0:.5,{height:t}),this.state.minimized=!1}},{key:"minimize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.maxHeight;l.c.to(this.containers.article,.5,{height:t}),this.state.minimized=!0,e&&this.moveTo.move(this.element,{tolerance:62,duration:500})}},{key:"bindHandlers",value:function(){var e=this;this.articleButton.addEventListener("click",function(t){t.preventDefault(),e.state.minimized?e.expand():e.minimize(!0),e.toggleButton()})}},{key:"setHeight",value:function(){this.state.minimized&&(this.containers.article.style.height=this.maxHeight+"px")}},{key:"toggleButton",value:function(){this.state.minimized?(this.articleButton.removeAttribute("data-accordion-shown"),this.textElement.innerText=this.text.default):(this.articleButton.setAttribute("data-accordion-shown",""),this.textElement.innerText=this.text.alt)}},{key:"articleHeight",get:function(){return this.containers.article.clientHeight}},{key:"authorHeight",get:function(){return this.containers.author?this.containers.author.clientHeight+40:0}},{key:"heightLimit",get:function(){var e=window.innerWidth;return e<1024&&e>=768?i:e<768?r:a}},{key:"maxHeight",get:function(){for(var e=c(this.element.querySelectorAll(".article > *")),t=this.heightLimit,n=0,i=0,r=0;n<t&&i<=e.length-1;){var a=e[i],o=a.currentStyle||window.getComputedStyle(a);r=a.clientHeight>0?parseInt(o.marginBottom,10):0,n+=a.clientHeight+r,i++}return n-=r}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return h});n(2),n(6),n(7),n(8),n(3),n(0),n(1),n(4),n(9),n(5);var i=n(13),r=n.n(i),a=n(48),o=n.n(a),s=n(23),l=n(51);function c(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function d(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}var h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,this.form=this.element.querySelector(".js-develop-timeline-form"),this.url=this.form.getAttribute("action"),this.monthSelect=this.form.querySelector("#timeline-month"),this.yearSelect=this.form.querySelector("#timeline-year"),this.yearSelect&&(this.monthData=JSON.parse(this.yearSelect.getAttribute("data-month"))),this.contentTarget=this.element.querySelector(".js-develop-timeline-target"),this.initialLightGalleryData=this.contentTarget.getAttribute("data-lg"),this.initialLightGalleryData&&(this.initialLightGalleryData=JSON.parse(this.initialLightGalleryData)),this.initLightGallery(this.initialLightGalleryData),this.bindEvents()}return d(e,null,[{key:"init",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:document).querySelector(".js-develop-timeline");if(t)return new e(t)}}]),d(e,[{key:"initLightGallery",value:function(e){var t=this;c(this.contentTarget.querySelectorAll(".develop-timeline__item")).forEach(function(n){return n.addEventListener("click",function(n){lightGallery(t.contentTarget,{thumbnail:!0,hash:!1,download:!1,loop:!0,dynamic:!0,dynamicEl:e})})})}},{key:"bindEvents",value:function(){var e=this;this.form.addEventListener("change",function(t){t.preventDefault(),e.request()}),this.yearSelect&&this.monthSelect&&this.monthData&&this.yearSelect.addEventListener("change",function(t){var n=e.yearSelect.Select.selected();if(n){var i=e.monthData[n];if(i){var r=[];i.forEach(function(e,t){r.push({text:e.text||l.f[e],value:e.value||e,selected:0===t})}),e.monthSelect.Select.setData(r)}}})}},{key:"request",value:function(){var e=this;return r.a.get(this.url,{params:Object(s.b)(this.form,{hash:!0}),paramsSerializer:function(e){return o.a.stringify(e)}}).then(function(t){var n=t.data;n&&e.onRequest(n)})}},{key:"onRequest",value:function(e){var t=e.lgData,n=e.html;this.contentTarget.innerHTML=n;var i=this.contentTarget.getAttribute("lg-uid");window.lgData&&window.lgData[i]&&window.lgData[i].destroy(!0),window.lazyloadInstance&&window.lazyloadInstance.update(),this.initLightGallery(t)}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(101);function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var a=function(){var e,t,n;function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),this.element=e,this.ratingAnimation=new i.a({wrapper:".rating-badge__background",data:"ranking",colorRange:["#d32a01","#ffcb00","#43b05c"],maxValue:5,circle:{background:"#e8e8e8",thickness:6,backwards:!0,ease:"Bounce.easeOut",speed:2}}),this.ratingAnimation.init()}return e=a,n=[{key:"init",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:document).querySelector(".ratings-container");if(e)return new a(e)}}],(t=null)&&r(e.prototype,t),n&&r(e,n),a}()},function(e,t,n){"use strict";n.d(t,"a",function(){return k});n(2),n(6),n(7),n(17),n(24),n(8),n(45),n(3),n(0),n(1),n(88),n(4),n(9),n(5);var i=n(13),r=n.n(i),a=n(56),o=n(53),s=n(54),l=n(52),c=n(27),u=n(114),d=n(50),h=n(43),f=n(145),m=n(62),p=n(51),v=n(138);function y(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function g(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function b(e,t,n){return t&&g(e.prototype,t),n&&g(e,n),e}var w={cottages:{root:"коттедж",endings:["ей","а",""],similarWordEndings:["их","их","ий"],placeholder:"коттеджей"},buildings:{root:"новостро",endings:["ек","йки","йку"],similarWordEndings:["их","иe","ую"],placeholder:"новостроек"},flats:{root:"квартир",endings:["","ы","у"],renderFunc:f.a},default:{root:"объект",endings:["ов","а",""],similarWordEndings:["их","их","ий"],placeholder:"объектов"}},k=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,this.searchForm=this.element,this.isSectionLoaded=this.element.hasAttribute("data-loaded"),this.type=this.element.getAttribute("data-type")||"tabs",this.itemType=w[this.element.getAttribute("data-item-type")||"default"],"list"===this.type?(this.listTarget=this.element.querySelector(".js-similars-target"),this.hiddenListTarget=this.element.querySelector("#similar-objects-list"),this.isSectionLoaded||this.initList()):"tabs"===this.type&&this.initTabs(),v.a.init(this)}return b(e,null,[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;Object(p.g)(function(){var n=t.querySelector(".object-similar");if(n)return new e(n)})}}]),b(e,[{key:"initList",value:function(){this.listUrl=this.element.getAttribute("data-url"),this.renderFunc=function(){},this.listUrl&&this.listTarget&&this.requestList()}},{key:"requestList",value:function(){var e=this;return r.a.get(this.listUrl).then(function(t){var n=t.data;if(n){var i=n.items;e.createListItems(i,4)}})}},{key:"createListItems",value:function(e,t){var n=this,i=[];this.listRestItemsCount=0,e.forEach(function(e){i.push(n.itemType.renderFunc(e))}),i.forEach(function(e,i){i>t-1?(n.hiddenListTarget.appendChild(e),n.listRestItemsCount++):n.hiddenListTarget.insertAdjacentElement("beforebegin",e)}),this.listRestItemsCount&&this.createListAccordion(),a.a.init(this.element),o.a.init(this.element),s.a.init(this.element),l.a.init(this.element),c.a.init(this.element),h.a.init(this.element)}},{key:"createListAccordion",value:function(){var e=document.createElement("button");e.className="button-n-2 button-n-2_theme_yellow button-n-2_type_full-width button-n-2_text_sm text-w-medium js-similars-more",e.setAttribute("data-accordion","similar-objects-list"),e.setAttribute("data-accordion-text",""),e.innerText="Показать еще ".concat(this.listRestItemsCount," ").concat(Object(m.a)(this.listRestItemsCount,this.itemType.root,this.itemType.endings)),this.listTarget.appendChild(e)}},{key:"initTabs",value:function(){var e=this;this.header=this.element.querySelector("[data-similar-header]"),this.headerDefaultText=this.header.innerText,this.headerType=this.header.getAttribute("data-similar-header")||"default",this.objectType=w[this.headerType],this.initedTabs=[],this.initedTabTotals=[],this.tabLinksSelector=this.element.getAttribute("data-tab-link")||"tabs-links__link",this.tabs={links:y(this.element.querySelectorAll("."+this.tabLinksSelector)),line:this.element.querySelector(".tabs-links__line")},this.tabsController=new d.a(this.tabs.links,{line:this.tabs.line,linkClass:this.tabLinksSelector,tabsClass:"object-similar__tab",beforeChange:function(t,n){return e.requestTabData(t,n)},afterChange:function(t){return e.initTabContent(t)}}),this.tabsController.init(),this.requestTabData(this.tabsController.activeLink,this.tabsController.activeTab).then(function(){return e.initTabContent(e.tabsController.activeTab)})}},{key:"requestTabData",value:function(e,t){var n=this;if(this.initedTabs.includes(t)){var i=this.initedTabTotals.find(function(e){return e.key===t});this.updateHeader(i.total)}else{var a=e.getAttribute("data-url");if(a)return r.a.get(a).then(function(e){var i=e.data;return i&&(i.html?n.renderTabContent(t,i.html):n.renderTabContent(t,'\n                <div class="object-similar__no-similars">К сожалению, нам не удалось найти похожих '.concat(n.objectType.placeholder,"</div>\n              ")),i.total&&(n.initedTabTotals.push({key:t,total:i.total}),n.updateHeader(i.total))),window.lazyloadInstance&&window.lazyloadInstance.update(),i.total||0})}}},{key:"initTabContent",value:function(e,t){u.a.init(e),c.a.init(e),this.initedTabs.push(e),this.initedTabTotals.push({key:e,total:t})}},{key:"updateHeader",value:function(e){this.header.innerText=e>0?'Мы нашли еще "'.concat(e,'" ').concat(Object(m.a)(e,"похож",this.objectType.similarWordEndings))+" ".concat(Object(m.a)(e,this.objectType.root,this.objectType.endings)):this.headerDefaultText}},{key:"renderTabContent",value:function(e,t){e.innerHTML=t}}]),e}()},,function(e,t,n){"use strict";n.d(t,"a",function(){return i});n(17),n(9);var i=function(e){var t=[];return e.forEach(function(e){var n=e.id,i=e.location,r=e.priceCategory;i instanceof Array||(i=JSON.parse(i)),n||(n=Math.floor(1e5*Math.random()));var a="".concat(window.VECTOR_IMAGES_LINK,"maps-baloon-").concat(r||"green",".svg"),o="".concat(window.VECTOR_IMAGES_LINK,"maps-baloon-adv-legend.svg");t.push({type:"Feature",id:n,options:{iconImageHref:a,iconLayout:"default#image",iconImageSize:[18,18],iconImageOffset:[-9,-9],openEmptyBalloon:!1},properties:{id:n,selectedIcon:o,originalIcon:a,data:e},geometry:{type:"Point",coordinates:i}})}),t}},function(e,t,n){"use strict";n.d(t,"a",function(){return d});n(2),n(6),n(7),n(8),n(3),n(12),n(25),n(0),n(37),n(90),n(1),n(4),n(76),n(116),n(9),n(5);var i=n(13),r=n.n(i),a=n(34),o=n(65),s=n(27);function l(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function u(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}var d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,this.showFormButton=this.element.querySelector(".js-flats-prices-form-trigger"),this.form=t.querySelector(".js-flats-prices-form"),this.listContainer=t.querySelector(".flats-prices__list"),this.selects=l(t.querySelectorAll("select")),this.inputs=l(t.querySelectorAll('input[type="text"]')),this.links=l(document.querySelectorAll(".object-price-n-2 [data-rooms]")),this.roomInputs=l(t.querySelectorAll('[name="rooms[]"]')),this.classes={item:"flat-item",itemActive:"flat-item_is_active",content:"flat-item__content",detailed:"flat-item__detailed",listLoading:"flats-prices__list_loading"},this.state={activeItem:null,scrollInited:!1,fixed:!1,boundBottom:!1},this.url=this.form.getAttribute("action"),this.timeout=null,this.items=[],this.getList=this.getList.bind(this),this.onInputChange=this.onInputChange.bind(this),this.init(),this.bindHandlers()}return u(e,null,[{key:"init",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:document).querySelector(".flats-prices");if(t)return new e(t)}}]),u(e,[{key:"init",value:function(){this.initInteractives(),this.initItems(),this.initButton(),a.a.init({container:this.element,triggersSelector:'[data-toggle="modal-n-2"]'})}},{key:"getList",value:function(){var e=this,t=this.formData;return this.setMinHeight(this.listContainer.clientHeight),this.listContainer.classList.add(this.classes.listLoading),r.a.post(this.url,t).then(function(t){var n=t.data;if(n){for(;e.listContainer.firstChild;)e.listContainer.firstChild.remove();e.items=[],e.listContainer.innerHTML=n,e.setMinHeight(),e.initInteractives(),e.initItems(),e.initButton()}else e.showPlaceholder("Нет результатов");a.a.init({container:e.listContainer,triggersSelector:'[data-toggle="modal-n-2"]'})}).catch(function(t){e.showPlaceholder("Произошла ошибка")}).finally(function(){e.listContainer.classList.remove(e.classes.listLoading)})}},{key:"getMoreItems",value:function(e){var t=this,n=this.formData,i=this.element.querySelector(".flats-list__content");return this.listContainer.classList.add(this.classes.listLoading),r.a.post(e,n).then(function(e){var n=e.data;if(n){var r=t.compileHTML(n),a=t.element.querySelector(".flats-list__control");a&&a.remove(),r.map(function(e){var n=e.querySelector(".flat-item");i.appendChild(e),n&&t.initItem(n)}),t.initInteractives(),t.initButton()}}).finally(function(){t.listContainer.classList.remove(t.classes.listLoading),a.a.init({container:i,triggersSelector:'[data-toggle="modal-n-2"]'})})}},{key:"initItems",value:function(){var e=this;if(this.state.activeItem=document.querySelector(".".concat(this.classes.itemActive)),l(this.element.querySelectorAll(".".concat(this.classes.item,":not([data-item-inited])"))).map(function(t){return e.initItem(t)}),this.state.activeItem){var t=this.state.activeItem.querySelector(".".concat(this.classes.detailed));this.setMinHeight(t.clientHeight)}}},{key:"initItem",value:function(e){var t=this,n=e.querySelector(".".concat(this.classes.content)),i=e.querySelector(".".concat(this.classes.detailed));n&&(n.addEventListener("click",function(){t.state.activeItem===e?(t.state.activeItem.classList.remove(t.classes.itemActive),t.setMinHeight(null),t.state.activeItem=null):(t.state.activeItem&&t.state.activeItem.classList.remove(t.classes.itemActive),e.classList.add(t.classes.itemActive),t.state.activeItem=e,t.setMinHeight(i.clientHeight))}),e.setAttribute("data-item-inited",""),this.items.push(e))}},{key:"setMinHeight",value:function(e){this.listContainer.style.minHeight=e?"".concat(e,"px"):""}},{key:"initInteractives",value:function(){o.a.init(this.listContainer),s.a.init(this.listContainer)}},{key:"onInputChange",value:function(e){var t=this;e.key.match(/\d/)&&(clearTimeout(this.timeout),this.timeout=setTimeout(function(){t.getList()},750))}},{key:"showPlaceholder",value:function(e){for(;this.listContainer.firstChild;)this.listContainer.firstChild.remove();this.listContainer.innerHTML='<div class="flats-prices__placeholder">'.concat(e,"</div >")}},{key:"bindHandlers",value:function(){var e=this;this.selects.map(function(t){t.addEventListener("change",e.getList)}),this.inputs.map(function(t){t.addEventListener("keydown",e.onInputChange)}),this.links.map(function(t){t.addEventListener("click",function(n){n.preventDefault();var i=t.getAttribute("data-rooms");i&&(e.roomInputs.forEach(function(e){e.checked=e.value===i}),e.form.dispatchEvent(new CustomEvent("change")))})}),this.form.addEventListener("change",function(t){t.preventDefault(),e.getList()}),this.form.addEventListener("submit",function(t){t.preventDefault(),e.getList()}),this.showFormButton.addEventListener("click",function(t){e.form.classList.toggle("is-active")})}},{key:"initButton",value:function(){var e=this,t=this.element.querySelector(".flats-list__control .button-n-2");t&&t.addEventListener("click",function(n){n.preventDefault();var i=t.getAttribute("data-request");e.getMoreItems(i)})}},{key:"compileHTML",value:function(e){var t=document.createElement("div");return t.innerHTML=e.trim(),l(t.children)}},{key:"formData",get:function(){var e=new FormData,t=l(this.form.querySelectorAll('input[type="hidden"], [name="order"]')),n=l(this.form.querySelectorAll('input[type="checkbox"]'));return this.selects.map(function(t){return e.append(t.name,t.value)}),this.inputs.map(function(t){var n=t.mask?t.mask.unmaskedValue:t.value;e.append(t.name,n)}),t.map(function(t){return e.append(t.name,t.value)}),n.map(function(t){return t.checked&&e.append(t.name,t.value)||null}),e}}]),e}()},,,,,,function(e,t,n){"use strict";n.r(t);n(2),n(6),n(7),n(17),n(58),n(8),n(3),n(70),n(61),n(0),n(37),n(90),n(1),n(4),n(91),n(9),n(5);var i=n(13),r=n.n(i),a=n(33),o=n.n(a),s=n(48),l=n.n(s),c=n(56);function u(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function d(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function h(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),e}var f=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,this.hasAvatarPreview=!1,this.input=this.element.querySelector('input[name="my-image"]'),this.hiddenInput=this.element.querySelector('input[name="avatar"]'),this.text=this.element.querySelector(".js-feedback-avatar-text"),this.textSpan=this.text.querySelector("span"),this.textSvg=this.text.querySelector("svg"),this.preview=this.element.querySelector(".js-feedback-avatar-preview"),this.defaultPreview=this.preview.innerHTML,this.bindEvents()}return h(e,null,[{key:"init",value:function(){return u((arguments.length>0&&void 0!==arguments[0]?arguments[0]:document).querySelectorAll(".js-feedback-avatar")).forEach(function(t){new e(t)})}}]),h(e,[{key:"bindEvents",value:function(){var e=this;this.text.addEventListener("click",function(t){e.hasAvatarPreview&&(t.preventDefault(),e.input.value="",e.hiddenInput.value="",e.preview.innerHTML=e.defaultPreview,e.textSpan.innerText="Загрузить фото",e.textSvg.style.display="none",e.element.classList.remove("is-active"),e.hasAvatarPreview=!1)}),this.input.addEventListener("change",function(t){var n=u(t.target.files);if(n&&n[0]){var i=new FileReader;i.onload=function(){var t=document.createElement("img");t.src=i.result,e.hiddenInput.value=i.result,e.preview.innerHTML="",e.preview.appendChild(t),e.textSpan.innerText="Сбросить фото",e.textSvg.style.display="",e.element.classList.add("is-active"),e.hasAvatarPreview=!0},i.readAsDataURL(n[0])}})}}]),e}(),m=(n(45),n(25),n(39));n(12),n(115),n(46);function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function v(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function y(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var g=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.controller=t,this.uploadInput=this.controller.form.querySelector(".js-upload-input"),this.uploadPreviewsContainer=this.controller.form.querySelector(".js-upload-previews"),this.uploadErrorsContainer=this.controller.form.querySelector(".js-upload-errors"),this.uploads={},this.uploadsCount=0,this.bindEvents()}var t,n,i;return t=e,(n=[{key:"bindEvents",value:function(){var e=this;this.uploadInput&&this.uploadInput.addEventListener("change",function(t){v(t.target.files).forEach(function(t){var n=t.name.split(".").pop().toLowerCase(),i=new FileReader;i.onload=function(){e.uploadsCount++;var r="";["jpg","png","gif"].includes(n)&&(r='<img class="thumb" src="'.concat(i.result,'" />'));var a=e.createItemPreview(n,r);e.uploads[e.uploadsCount]={preview:a,file:t},e.uploadPreviewsContainer.appendChild(a),e.bindPreviewEvents(a,e.uploadsCount),e.validateUploadsSize()},i.readAsDataURL(t)}),e.uploadInput.value=""})}},{key:"bindPreviewEvents",value:function(e,t){var n=this;e.querySelector(".attached-file__close").addEventListener("click",function(e){[n.uploads[t].preview].forEach(function(e){e.parentNode.removeChild(e)}),delete n.uploads[t],n.uploadsCount--,n.validateUploadsSize()})}},{key:"createItemPreview",value:function(e,t){var n=document.createElement("div");return n.className="attached-file",n.setAttribute("data-file-index",this.uploadsCount),n.innerHTML='\n      <div class="attached-file__close">\n        <svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 10 10" fill="none">\n          <path stroke="#071321" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M1 1l8 8M9 1L1 9"/>\n        </svg>\n      </div>\n      <div class="attached-file__img">\n        '.concat(t||"",'\n        <div class="attached-file__tag">').concat(e,'</div>\n      </div>\n      <div class="attached-file__title">').concat(this.getTitle(e),"</div>\n    "),n}},{key:"getTitle",value:function(e){return["jpg","png","webp","gif"].includes(e)?"Изображение":["txt","docx","doc","pdf"].includes(e)?"Документ":["xlsx","xls"].includes(e)?"Таблица":["ppt","pps","pptx"].includes(e)?"Презентация":"Файл"}},{key:"validateUploadsSize",value:function(){var e=0;Object.entries(this.uploads).forEach(function(t){var n=p(t,2),i=(n[0],n[1]);e+=i.file.size}),e/1024/1024>3?(this.uploadErrorsContainer.innerHTML="Размер прикрепленных файлов не должен превышать 3мб",this.uploadErrorsContainer.style.display="",this.controller.formSubmit.disabled=!0):(this.uploadErrorsContainer.innerHTML="",this.uploadErrorsContainer.style.display="none",this.controller.validateForm())}},{key:"clear",value:function(){this.uploadsCount=0,this.uploads=[],this.uploadPreviewsContainer.innerHTML="",this.uploadErrorsContainer.innerHTML=""}},{key:"uploadedFiles",get:function(){return Object.entries(this.uploads).map(function(e){var t=p(e,2);t[0];return t[1].file})}}])&&y(t.prototype,n),i&&y(t,i),e}(),b=n(50),w=n(23);n(24);function k(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var C=function(e){return!k(e.elements).find(function(e){if(e.hasAttribute("required")){if(["input","textarea"].includes(e.type))return!(e.value||"0"===e.value);if(["radio","checkbox"].includes(e.type))return!e.checked}})},S=n(69),_=n(59);function A(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function E(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var L=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.form=t,this.controller=n,this.url=this.form.getAttribute("action"),this.formSetAuthType=A(this.controller.feedbackModal.querySelectorAll(".js-auth-type")),this.logout=this.controller.feedbackModal.querySelector(".js-logout"),this.formInputs=A(this.form.elements),this.formSubmit=this.form.querySelector('[type="submit"]'),this.formAuthType=this.form.querySelector('[name="auth-type"]'),this.socialsAuth=A(this.form.querySelectorAll(".js-social-auth")),this.formMessages=this.form.querySelector(".js-feedback-messages"),this.loggedSections=A(this.controller.feedbackModal.querySelectorAll(".js-comments-logged")),this.notLoggedSections=A(this.controller.feedbackModal.querySelectorAll(".js-comments-not-logged")),this.hideForGuestSections=A(this.form.querySelectorAll(".js-hide-for-guest")),this.hideForCommentSections=A(this.form.querySelectorAll(".js-hide-for-comment")),this.hideForNewsSections=A(this.form.querySelectorAll(".js-hide-for-news")),this.hideForArticleSections=A(this.form.querySelectorAll(".js-hide-for-articles")),this.hideForInterviewSections=A(this.form.querySelectorAll(".js-hide-for-interview")),this.uploadController=new g(this),this.ps=new m.a(this.form,{suppressScrollX:!0}),this.initTabs(),this.bindEvents(),this.bindModalTriggersEvents()}var t,n,i;return t=e,(n=[{key:"bindEvents",value:function(){var e=this;this.controller.feedbackModal.addEventListener("hidden.bs.modal-n-2",function(){A(e.form.querySelectorAll(".input-container-n-2__error")).forEach(function(e){e.innerText=""})}),this.formInputs.forEach(function(t){t.addEventListener("blur",function(){e.validateField(t,t.name)})}),this.formSetAuthType.forEach(function(t){t.addEventListener("click",function(){var n=t.getAttribute("data-auth-type");e.formAuthType.value=n,e.hideForGuestSections.forEach(function(e){"guest"===n?e.classList.add("hidden"):e.classList.remove("hidden")})})}),this.socialsAuth.forEach(function(t){t.addEventListener("click",function(n){return n.preventDefault(),e.handleSocialAuth(t.getAttribute("data-provider"))})}),this.logout&&this.logout.addEventListener("click",function(t){return t.preventDefault(),r.a.get("/ajax/comments_logout.php").then(function(t){t.data.success&&(e.loggedSections.forEach(function(e){e.classList.add("hidden")}),e.notLoggedSections.forEach(function(e){e.classList.remove("hidden")}),e.uploadController.clear())})}),this.form.addEventListener("change",function(t){e.validateForm()}),this.form.addEventListener("submit",function(t){return t.preventDefault(),e.handleSubmit()})}},{key:"bindModalTriggersEvents",value:function(){var e=this;this.controller.feedbackModalTriggers.forEach(function(t){t.addEventListener("click",function(){var n={type:t.getAttribute("data-type"),"element-id":t.getAttribute("data-element-id"),review:t.getAttribute("data-review"),"review-top":t.getAttribute("data-review-top")};switch(Object(S.a)(e.form,n),e.hideForCommentSections.forEach(function(e){t.hasAttribute("review")?e.classList.add("hidden"):e.classList.remove("hidden")}),t.getAttribute("data-type")){case"news":e.hideForNewsSections.forEach(function(e){return e.classList.add("hidden")});break;case"articles":e.hideForArticleSections.forEach(function(e){return e.classList.add("hidden")});break;case"interview":e.hideForInterviewSections.forEach(function(e){return e.classList.add("hidden")})}})})}},{key:"handleSubmit",value:function(){var e=this;if(this.formMessages.innerHTML="",this.formInputs.forEach(function(t){e.validateField(t,t.name)}),this.error)return!1;this.formSubmit.disabled=!0;var t=Object(_.b)(Object(w.b)(this.form,{hash:!0}));return this.uploadController.uploadedFiles.forEach(function(e){t.append("files_array[]",e)}),r.a.post(this.url,t).then(function(t){var n=t.data,i=n.error,r=n.success,a=n.action;i?e.formMessages.innerHTML=i.reduce(function(e,t){return e+t}):r&&(e.form.reset(),e.controller.onSuccess()),a&&["afterRegister","afterAuth"].includes(a)&&(e.loggedSections.forEach(function(e){e.classList.remove("hidden")}),e.notLoggedSections.forEach(function(e){e.classList.add("hidden")}))}).finally(function(){e.formSubmit.disabled=!1})}},{key:"handleSocialAuth",value:function(e){var t=this,n=window.screenLeft?window.screenLeft:screen.left,i=window.screenTop?window.screenTop:screen.top,r=(window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width)/2-300+n,a=(window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height)/2-200+i,o=window.open("/ajax/social_auth.php?auth_via="+e+"&social=entry","Авторизация","scrollbars=yes, width=600, height=400, top="+a+", left="+r);window.focus&&o.focus();var s=setInterval(function(){o.document.getElementsByClassName("game-account-user__name").length>0&&(o.close(),t.loggedSections.forEach(function(e){e.classList.remove("hidden")}),t.notLoggedSections.forEach(function(e){e.classList.add("hidden")}),t.formAuthType.value="social",setTimeout(function(){clearInterval(s)},100))},200)}},{key:"validateField",value:function(e,t){var n=this,i=e.value,r=function(t,i){t?(e.nextElementSibling.innerHTML="",e.closest(".input-container-n-2").classList.remove("with-error"),n.error=!1):(e.nextElementSibling.innerHTML=i,e.closest(".input-container-n-2").classList.add("with-error"),n.error=!0)};switch(t){case"name":r(i,"Обязательное поле");break;case"register-email":case"auth-email":r(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(i),"Введите корректный e-mail");break;case"auth-password":case"register-password":r(i&&i.length>=8,"Введите минимум 8 символов");break;case"text":r(i.length>=10,"Введите минимум 10 символов")}}},{key:"initTabs",value:function(){var e=document.querySelector(".feedback-modal__tabs");if(e){var t=e.querySelector(".tabs-links__line"),n=A(e.querySelectorAll(".feedback-modal .tabs-links__link[href]"));this.tabsController=new b.a(n,{line:t,linkClass:"tabs-links__link",tabsClass:"feedback-modal__tab"}),this.tabsController.init()}}},{key:"updateTabs",value:function(){this.tabsController.line.update()}},{key:"validateForm",value:function(){this.formSubmit.disabled=!C(this.form)}}])&&E(t.prototype,n),i&&E(t,i),e}();function T(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function x(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function j(e,t,n){return t&&x(e.prototype,t),n&&x(e,n),e}var O=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,this.input=this.element.querySelector('[name="star"]'),this.resetButton=this.element.querySelector(".js-stars-reset"),this.emptyStars=T(this.element.querySelectorAll(".js-stars-empty i")),this.fullStars=this.element.querySelector(".js-stars-full"),this.fullStarsWidth=0,this.bindEvents()}return j(e,null,[{key:"init",value:function(){return T((arguments.length>0&&void 0!==arguments[0]?arguments[0]:document).querySelectorAll(".js-stars-form")).forEach(function(t){new e(t)})}}]),j(e,[{key:"bindEvents",value:function(){var e=this;this.emptyStars.forEach(function(t,n){t.addEventListener("mouseenter",function(){e.fullStars.style.width=20*n+20+"%"}),t.addEventListener("click",function(){e.fullStarsWidth=20*n+20+"%",e.input.value=n+1,e.resetButton.style.display=""})}),this.element.addEventListener("mouseout",function(){e.fullStars.style.width=e.fullStarsWidth}),this.resetButton.addEventListener("click",function(t){t.preventDefault(),e.resetButton.style.display="none",e.fullStars.style.width="0%",e.input.value=0,e.fullStarsWidth=0})}}]),e}(),M=n(34),q=n(51),I=n(68);function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function B(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function N(e,t,n){return t&&B(e.prototype,t),n&&B(e,n),e}n.d(t,"default",function(){return R});var R=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,this.element.inited=!0,M.a.init(),this.url=this.element.getAttribute("data-url"),this.reviewsTarget=this.element.querySelector(".js-reviews-target"),this.sortForm=this.element.querySelector(".js-reviews-sort-form"),this.sideForm=this.element.querySelector(".js-reviews-rate-form"),this.sideStickyContainer=this.element.querySelector("[data-sticky-container]"),this.feedbackRulesLinks=H(document.querySelectorAll("[data-review-rules]")),this.statusModal=document.querySelector("#modal-status"),this.feedbackModal=document.querySelector("#modal-feedback"),this.feedbackModal&&(this.feedbackModalTriggers=H(document.querySelectorAll('[data-target="#modal-feedback"]')),this.feedbackFormNode=this.feedbackModal.querySelector(".js-feedback-form"),this.feedbackFormNode&&(this.feedbackForm=new L(this.feedbackFormNode,this),this.feedbackModal.addEventListener("shown.bs.modal-n-2",function(e){n.feedbackForm.updateTabs()})),f.init(this.feedbackModal),O.init(this.feedbackModal)),this.moveTo=new o.a,this.hasFixableHeader=!!document.querySelector(".js-fixable-header"),this.initAnswerForm(),this.initLightGallery(),this.bindEvents(),this.bindPaginationEvents()}return N(e,null,[{key:"init",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:document).querySelector(".reviews");if(t&&!t.inited)return new e(t)}}]),N(e,[{key:"bindEvents",value:function(){var e=this;this.sideForm&&this.sideForm.addEventListener("change",function(t){e.request()}),this.sortForm&&this.sortForm.addEventListener("change",function(t){e.request()}),this.statusModal&&this.feedbackRulesLinks.forEach(function(t){t.addEventListener("click",function(t){t.preventDefault();var n=e.statusModal.querySelector(".feedback-rules"),i=e.statusModal.querySelector(".feedback-success");i&&(i.style.display="none"),n&&(n.style.display=""),e.statusModal.Modal.show()})})}},{key:"bindPaginationEvents",value:function(){var e=this;(this.reviewsPagination=this.element.querySelector(".js-reviews-pagination"),this.reviewsPagination)&&H(this.reviewsPagination.querySelectorAll("a")).forEach(function(t){t.addEventListener("click",function(n){n.preventDefault();var i=t.getAttribute("href"),r=Object(q.h)(i).search;if(r){var a=l.a.parse(r),o=a.page||a.PAGEN_1||a.PAGEN_2;return o?e.request(o):void 0}})})}},{key:"request",value:function(e){var t=this,n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){P(e,t,n[t])})}return e}({page:e},this.sideForm?Object(w.b)(this.sideForm,{hash:!0}):{},this.sortForm?Object(w.b)(this.sortForm,{hash:!0}):{});return r.a.get(this.url,{params:n,paramsSerializer:function(e){return l.a.stringify(e)}}).then(function(e){var n=e.data;n&&t.onRequest(n)})}},{key:"onRequest",value:function(e){var t=e.html;this.reviewsTarget.innerHTML=t,c.a.init(this.reviewsTarget),I.a.init(this.reviewsTarget),this.initLightGallery(),this.initAnswerForm(),this.bindPaginationEvents(),this.moveTo.move(this.element,{tolerance:60*this.hasFixableHeader+24}),window.lazyloadInstance&&window.lazyloadInstance.update(),this.sideStickyContainer&&this.sideStickyContainer.StickyContainer&&(this.reviewsTarget.parentNode.clientHeight<=this.sideStickyContainer.clientHeight?this.sideStickyContainer.StickyContainer.disable():this.sideStickyContainer.StickyContainer.enable())}},{key:"initLightGallery",value:function(){H(this.element.querySelectorAll(".js-review-images")).forEach(function(e){lightGallery(e,{selector:".lg",thumbnail:!0,hash:!1,download:!1})})}},{key:"initAnswerForm",value:function(){var e=this;this.forms=H(this.element.querySelectorAll(".answer-form"));this.forms.forEach(function(t){var n=t.querySelector('[type="submit"]');n&&(H(t.elements).forEach(function(e){e.addEventListener("input",function(e){n.disabled=!C(t)})}),t.addEventListener("change",function(e){n.disabled=!C(t)})),t.addEventListener("submit",function(i){if(i.preventDefault(),C(t)){n&&(n.disabled=!0);var a=Object(w.b)(t);return r.a.post("/ajax/comments_send.php",a).then(function(n){var i=n.data,r=i.error,a=i.success;"no"===i.user_auth||Array.isArray(r)&&r.length?function(t){var n=Object(w.b)(t,{hash:!0});e.feedbackFormNode&&Object(S.a)(e.feedbackForm.form,n),e.feedbackModal.Modal&&e.feedbackModal.Modal.show(),t.reset()}(t):a&&e.onSuccess(t)}).finally(function(){n.disabled=!1})}})})}},{key:"onSuccess",value:function(e){if(e&&e.reset(),this.statusModal){var t=this.statusModal.querySelector(".feedback-rules"),n=this.statusModal.querySelector(".feedback-success");n&&(n.style.display=""),t&&(t.style.display="none"),this.statusModal.Modal.show()}try{ym(39897405,"reachGoal","Button_Submit_Feedback")}catch(e){}}}]),e}()},function(e,t,n){"use strict";n.r(t);n(2),n(6),n(7),n(24),n(8),n(3),n(12),n(0),n(1),n(4),n(5);var i=n(15),r=n.n(i),a=(n(17),n(55)),o=n(66),s=n(44),l=(n(25),n(205),n(186)),c=n(187);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function h(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=[],v=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=h(this,f(t).call(this,e))).yandexFirmsKey="81fd4d74-8f99-4223-b3a9-ced2137399e7",n.init(),n}var n,i,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,c["a"]),n=t,(i=[{key:"init",value:function(){var e=this;this.createHintLayout(),this.infrastructureManager=new window.ymaps.ObjectManager({clusterize:!1,gridSize:32,viewportMargin:0}),this.infrastructureManager.objects.options.set({hintLayout:this.hintLayout,hintZIndex:9999}),this.ecoPointsManager=new window.ymaps.ObjectManager({clusterize:!1,gridSize:32,viewportMargin:0}),this.ecoPointsManager.objects.options.set({hintLayout:this.hintLayout,hintHideDelay:0,hintShowTimeout:0,hintZIndex:9999}),this.map.events.add("boundschange",function(t){t.get("newZoom")!==t.get("oldZoom")&&e.ecoPointsManager.objects.options.set("iconLayout",t.get("newZoom")>=13?"default#image":"")}),this.ecoManager=new window.ymaps.ObjectManager,this.ecoManager.objects.options.set({hintLayout:this.hintLayout,hintHideDelay:0,hintShowTimeout:0,hintZIndex:9999})}},{key:"handleInfrastructureChange",value:function(e){var t=this,n=e.currentTarget,i=n.value;0===this.cache.infrastructure[i].length?this.infrastructureRequest(i).then(function(e){return t.onInfrastructureRequest(e,i)}).then(function(){return t.togglePoints(i,n.checked)}):this.togglePoints(i,n.checked)}},{key:"onInfrastructureRequest",value:function(e,t){if(e&&e.properties&&e.properties.ResponseMetaData&&e.properties.ResponseMetaData.SearchResponse&&e.properties.ResponseMetaData.SearchResponse.found){var n=e.features;for(var i in n)if(n.hasOwnProperty(i)){var r=n[i];this.cache.infrastructure[t].push({type:"Feature",id:r.properties.CompanyMetaData.id,geometry:{type:"Point",coordinates:[r.geometry.coordinates[1],r.geometry.coordinates[0]]},options:{iconLayout:"default#image",iconImageSize:[38,38],iconImageHref:this.infrastructureIcon[t]},properties:{name:r.properties.name},fillColor:"#1B6BC6",strokeColor:"#fff",opacity:.5})}}}},{key:"togglePoints",value:function(e,t){t?this.appendArray(p,this.cache.infrastructure[e]):(this.removeArray(p,this.cache.infrastructure[e]),this.infrastructureManager.remove(this.cache.infrastructure[e])),this.infrastructureManager.add(p),this.map.geoObjects.add(this.infrastructureManager)}},{key:"handleEcologyChange",value:function(){var e=this;this.ecologyRequest().then(function(t){return e.onEcologyRequest(t)}).then(function(){return e.updateEcologyPolygons()})}},{key:"addEcologyPolygon",value:function(e){var t=this,n=this.cache.ecology[e];n&&n.length&&(n.map(function(e){"Polygon"===e.geometry.type&&t.ecoPointsManager.add({type:"Feature",id:e.id,options:{iconImageSize:[30,40],iconImageOffset:[-12,-25],iconImageHref:e.options.iconImageHref},geometry:{type:"Point",coordinates:Object(l.a)(e.geometry.coordinates[0])},properties:{name:e.properties.name,description:e.properties.description}})}),this.ecoManager.add(this.cache.ecology[e]),this.ecoPointsManager.objects.options.set("iconLayout",this.map.getZoom()>=13?"default#image":""),this.map.geoObjects.add(this.ecoManager),this.map.geoObjects.add(this.ecoPointsManager))}},{key:"removeEcologyPolygons",value:function(){this.ecoPointsManager.removeAll(),this.ecoManager.removeAll(),this.infrastructureManager&&this.map.geoObjects.add(this.infrastructureManager)}},{key:"createHintLayout",value:function(){this.hintLayout=window.ymaps.templateLayoutFactory.createClass('\n      <div class="placement-map-hint rounded-md">\n        <span class="text-sm text-w-medium text-nowrap">{{ properties.name }}</span>\n      </div>',{getShape:function(){var e,t=this.getElement();if(e=null,t){var n=t.firstChild;e=new window.ymaps.shape.Rectangle(new window.ymaps.geometry.pixel.Rectangle([[0,0],[n.offsetWidth,n.offsetHeight]]))}return e}})}},{key:"getMapBounds",value:function(){var e=this.map.getBounds();return e[1][1]-e[0][1]<.15&&(e[1][1]+=.075,e[0][1]-=.075,e[1][0]+=.02,e[0][0]-=.02),e.reduce(function(e,t,n){return"".concat(e).concat(n>0?",":"").concat(t[0],",").concat(t[1])},"")}}])&&d(n.prototype,i),r&&d(n,r),t}();function y(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var g=function(){function e(t){var n=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t){this.imageLink="localhost"===window.location.hostname?"/static/img/minified-svg/":"/build-redesign/static/img/minified-svg/",this.element=t,this.mapContainer=t.querySelector(".infrastructure-map__map");var i=matchMedia("(max-width: ".concat(this.mobileVieportWidth,"px)"));i.addListener(function(e){return n.handleMediaChange(e)}),this.handleMediaChange(i);var r=this.element.getAttribute("data-map-polygon");this.polygon=r?JSON.parse(r):[],this.yandexFirmsKey="81fd4d74-8f99-4223-b3a9-ced2137399e7",Object(s.a)({elements:[this.element],observerMargin:100,onLoad:function(){return n.bindMapEvents()},scriptSrc:"https://api-maps.yandex.ru/2.1/?lang=ru_RU&onload=ymapsBroadcast&apikey=81fd4d74-8f99-4223-b3a9-ced2137399e7",scriptUniqueSelector:"api-maps.yandex"})}}var t,n,i;return t=e,(n=[{key:"bindMapEvents",value:function(){var e=this;window.ymaps?(this.ymaps=window.ymaps,this.initMap()):window.ymapsObserver.subscribe(function(){e.ymaps=window.ymaps,e.initMap()})}},{key:"initMap",value:function(){this.fullscreenControl=Object(o.a)({ymaps:this.ymaps,position:{top:"112px",right:"20px"}}),this.zoomControl=Object(a.a)(this.ymaps,{top:"20px",right:"20px"}),this.setMapControls(),this.map=new this.ymaps.Map(this.mapContainer,{center:[55.7156053517751,37.4754233558197],zoom:16,controls:[]},{suppressMapOpenBlock:!0,maxZoom:16,minZoom:10}),this.map.controls.add(this.fullscreenControl),this.map.controls.add(this.zoomControl),this.map.behaviors.disable("scrollZoom"),this.isMobile&&this.map.behaviors.disable("drag"),this.createHintLayout(),this.initialData(),this.infrastructureModule=new v({container:this.element,map:this.map,polygon:this.polygon})}},{key:"handleMediaChange",value:function(e){var t=e.matches?"mobile":"desktop";t!==this.deviceType&&(this.deviceType=t,this.setMapControls())}},{key:"setMapControls",value:function(){this.fullscreenControl&&("desktop"===this.deviceType?(this.fullscreenControl.options.set("position",{top:"112px",right:"20px"}),this.zoomControl.options.set("position",{top:"20px",right:"20px"})):(this.fullscreenControl.options.set("position",{top:"100px",right:"12px"}),this.zoomControl.options.set("position",{top:"18px",right:"12px"})))}},{key:"createHintLayout",value:function(){this.hintLayout=this.ymaps.templateLayoutFactory.createClass('\n      <div class="placement-map-hint text-md rounded-md"><span class="text-w-medium text-nowrap">{{ properties.name }}</span></div>\n    ')}},{key:"initialData",value:function(){var e=this;this.complexCollection=new this.ymaps.GeoObjectCollection;var t=this.element.getAttribute("data-complex-name");if(this.polygon.length){var n=new this.ymaps.GeoObject({geometry:{type:"Polygon",coordinates:this.polygon},properties:{name:t}},{fillColor:"#1B6BC6",strokeColor:"#fff",opacity:.5,hintLayout:this.hintLayout});this.complexCollection.add(n),this.map.geoObjects.add(this.complexCollection),this.map.setBounds(this.complexCollection.getBounds(),{checkZoomRange:!0,zoomMargin:10,zoom:16})}setTimeout(function(){var n=e.map.getCenter(),i=new e.ymaps.Placemark(n,{name:t},{iconLayout:"default#image",iconImageHref:"".concat(e.imageLink,"ico-complex-on-map.svg"),iconImageSize:[32,43],iconImageOffset:[-15,-45],zIndex:9e3,id:"zoomMark",visible:!1,hintLayout:e.hintLayout});e.map.geoObjects.add(i),e.map.events.add("boundschange",function(e){var t=e.get("newZoom");i.options.set("visible",t<15)})},5e3)}},{key:"coords",get:function(){var e=this.polygon[0]&&this.polygon[0][0]?this.polygon[0][0]:[],t=this.map.getBounds();return t[1][1]-t[0][1]<.15&&(t[1][1]=e[1]+.075,t[0][1]=e[1]-.075,t[1][0]=e[0]+.02,t[0][0]=e[0]-.02),t.reduce(function(e,t,n){return"".concat(e).concat(n>0?",":"").concat(t[0],",").concat(t[1])},"")}},{key:"mobileVieportWidth",get:function(){return 768}},{key:"isMobile",get:function(){return"mobile"===this.deviceType}}])&&y(t.prototype,n),i&&y(t,i),e}(),b=n(50),w=n(39);function k(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var C=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,t.hasAttribute("data-draggable")||t.setAttribute("data-draggable",""),this.state={clicked:!1,clickX:0,startX:t.scrollLeft},this.bindHandlers()}var t,n,i;return t=e,(n=[{key:"bindHandlers",value:function(){var e=this;this.element.addEventListener("mousemove",function(t){if(e.state.clicked){var n=e.state.clickX-t.pageX;e.scroll(n)}}),this.element.addEventListener("mousedown",function(t){e.state.clicked=!0,e.state.clickX=t.pageX,e.state.startX=e.element.scrollLeft,e.element.setAttribute("data-draggable","active")}),document.addEventListener("mouseup",function(){e.state.clicked=!1,e.element.setAttribute("data-draggable","")})}},{key:"scroll",value:function(e){this.element.scrollLeft=this.state.startX+e}}])&&k(t.prototype,n),i&&k(t,i),e}(),S=n(11);function _(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function A(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function E(e,t,n){return t&&A(e.prototype,t),n&&A(e,n),e}n.d(t,"default",function(){return L});var L=function(){function e(t){var n=this;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,this.tabsContainer=t.querySelector(".tabs-links"),this.tabsContainer)?(this.tabsWrapper=t.querySelector(".tabs-links__wrapper"),this.tabs={links:_(t.querySelectorAll(".tabs-links__link")),line:t.querySelector(".tabs-links__line")},this.tabsController=new b.a(this.tabs.links,{line:this.tabs.line,linkClass:"tabs-links__link",tabsClass:"infrastructure-n-2-tabs__tab",callback:this.handleTabChange.bind(this)}),this.tabsController.init(),this.ps=new w.a(this.tabsWrapper,{useBothWheelAxes:!0}),this.tabsContainer.classList.add("tabs-links_scrollable"),this.draggable=new C(this.tabsWrapper)):document.querySelector(".infrastructure-n-2__tabs")&&(this.tabsController=new b.a(_(t.querySelectorAll(".button-item")),{linkClass:"button-item",tabsClass:"infrastructure-n-2-tabs__tab",callback:this.handleTabChange.bind(this)}),this.tabsController.init());r.a.subscribe(S.j,function(){n.tabsController.state.prevLink.dispatchEvent(new CustomEvent("click"))}),this.map=t.querySelector(".infrastructure-map"),this.streetView=t.querySelector(".street-view"),this.infrastructureMap=new g(this.map),this.switches={infrastructure:t.querySelector("#infrastructure"),ecology:t.querySelector("#ecology")},this.views=[{key:"streetview",node:t.querySelector("#streetview")},{key:"panorama",node:t.querySelector("#panorama")}],this.state={containerActive:this.map,activeWrap:this.tabsController.activeTab}}return E(e,null,[{key:"init",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:document).querySelector(".infrastructure-n-2");if(t)return new e(t)}}]),E(e,[{key:"handleTabChange",value:function(e){if(e){var t=e.getAttribute("data-type");t&&this.beforeWrapperToggle(t)}}},{key:"beforeWrapperToggle",value:function(e){switch(e){case"infrastructure":case"ecology":this.toggleActiveWrapper("switches",e);break;case"streetview":case"panorama":this.toggleActiveWrapper("views",e)}}},{key:"toggleActiveWrapper",value:function(e,t){if(this.state.activeWrap.classList.remove("is-active"),"views"===e){this.map&&this.map.classList.add("is-hidden");var n=this.views.find(function(e){return e.key===t}).node;n&&this.streetView&&(n.classList.add("is-active"),this.state.activeWrap=n)}else"switches"===e&&this.map&&this.map.classList.remove("is-hidden");this.fireResizeEvent()}},{key:"fireResizeEvent",value:function(){var e=new CustomEvent("resize");window.dispatchEvent(e)}}]),e}()},,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){var n;"function"!=typeof(n=window.Element.prototype).matches&&(n.matches=n.msMatchesSelector||n.mozMatchesSelector||n.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),n=0;t[n]&&t[n]!==this;)++n;return Boolean(t[n])}),"function"!=typeof n.closest&&(n.closest=function(e){for(var t=this;t&&1===t.nodeType;){if(t.matches(e))return t;t=t.parentNode}return null})},function(e,t){!function(){if("function"==typeof window.CustomEvent)return!1;function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}e.prototype=window.Event.prototype,window.CustomEvent=e}()},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);n(2),n(6),n(7),n(17),n(8),n(3),n(0),n(37),n(1),n(4),n(46),n(9),n(5);var i,r,a=n(15),o=n.n(a);n(226),n(227),n(228),n(229);i=[window.Element,window.CharacterData,window.DocumentType],r=[],i.forEach(function(e){e&&r.push(e.prototype)}),r.forEach(function(e){e.hasOwnProperty("remove")||Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})});n(140),n(70),n(61);Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(null==e)throw new TypeError("Cannot convert first argument to object");for(var n=Object(e),i=1;i<arguments.length;i++){var r=arguments[i];if(null!=r)for(var a=Object.keys(Object(r)),o=0,s=a.length;o<s;o++){var l=a[o],c=Object.getOwnPropertyDescriptor(r,l);void 0!==c&&c.enumerable&&(n[l]=r[l])}}return n}}),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var n,i;if(null==this)throw new TypeError(" this is null or not defined");var r=Object(this),a=r.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(n=t),i=0;i<a;){var o;i in r&&(o=r[i],e.call(n,o,i,r)),i++}});n(98),n(76),n(38),n(12),n(73),n(77),n(35);var s={getAttribute:function(e,t){return e[t]},setAttribute:function(e,t,n){e[t]=n},wrap:function(e,t){if(e){var n=document.createElement("div");n.className=t,e.parentNode.insertBefore(n,e),e.parentNode.removeChild(e),n.appendChild(e)}},addClass:function(e,t){e&&(e.classList?e.classList.add(t):e.className+=" "+t)},removeClass:function(e,t){e&&(e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," "))},hasClass:function(e,t){return e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className)},setVendor:function(e,t,n){e&&(e.style[t.charAt(0).toLowerCase()+t.slice(1)]=n,e.style["webkit"+t]=n,e.style["moz"+t]=n,e.style["ms"+t]=n,e.style["o"+t]=n)},trigger:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(e){var i=new CustomEvent(t,{detail:n});e.dispatchEvent(i)}},Listener:{uid:0},on:function(e,t,n){var i=this;e&&t.split(" ").forEach(function(t){var r=i.getAttribute(e,"lg-event-uid")||"";s.Listener.uid++,r+="&"+s.Listener.uid,i.setAttribute(e,"lg-event-uid",r),s.Listener[t+s.Listener.uid]=n,e.addEventListener(t.split(".")[0],n,!1)})},off:function(e,t){if(e){var n=this.getAttribute(e,"lg-event-uid");if(n){n=n.split("&");for(var i=0;i<n.length;i++)if(n[i]){var r=t+n[i];if("."===r.substring(0,1))for(var a in s.Listener)s.Listener.hasOwnProperty(a)&&a.split(".").indexOf(r.split(".")[1])>-1&&(e.removeEventListener(a.split(".")[0],s.Listener[a]),this.setAttribute(e,"lg-event-uid",this.getAttribute(e,"lg-event-uid").replace("&"+n[i],"")),delete s.Listener[a]);else e.removeEventListener(r.split(".")[0],s.Listener[r]),this.setAttribute(e,"lg-event-uid",this.getAttribute(e,"lg-event-uid").replace("&"+n[i],"")),delete s.Listener[r]}}}},param:function(e){return Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&")}},l=s;!function(){if("function"==typeof window.CustomEvent)return!1;function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}e.prototype=window.Event.prototype,window.CustomEvent=e}(),window.utils=l,window.lgData={uid:0},window.lgModules={};var c={mode:"lg-slide",cssEasing:"ease",easing:"linear",speed:600,height:"100%",width:"100%",addClass:"",backdropClass:"",startClass:"lg-start-zoom",backdropDuration:150,hideBarsDelay:6e3,useLeft:!1,closable:!0,loop:!0,escKey:!0,keyPress:!0,controls:!0,slideEndAnimatoin:!0,hideControlOnEnd:!1,mousewheel:!1,getCaptionFromTitleOrAlt:!0,appendSubHtmlTo:".lg-sub-html",subHtmlSelectorRelative:!1,preload:1,showAfterLoad:!0,selector:"",selectWithin:"",nextHtml:"",prevHtml:"",index:!1,iframeMaxWidth:"100%",download:!0,counter:!0,appendCounterTo:".lg-toolbar",swipeThreshold:50,enableSwipe:!0,enableDrag:!0,dynamic:!1,dynamicEl:[],galleryId:1};function u(e,t){if(this.el=e,this.s=Object.assign({},c,t),this.s.dynamic&&"undefined"!==this.s.dynamicEl&&this.s.dynamicEl.constructor===Array&&!this.s.dynamicEl.length)throw"When using dynamic mode, you must also define dynamicEl as an Array.";return this.modules={},this.lGalleryOn=!1,this.lgBusy=!1,this.hideBartimeout=!1,this.isTouch="ontouchstart"in document.documentElement,this.s.slideEndAnimatoin&&(this.s.hideControlOnEnd=!1),this.items=[],this.s.dynamic?this.items=this.s.dynamicEl:"this"===this.s.selector?this.items.push(this.el):""!==this.s.selector?this.s.selectWithin?this.items=document.querySelector(this.s.selectWithin).querySelectorAll(this.s.selector):this.items=this.el.querySelectorAll(this.s.selector):this.items=this.el.children,this.___slide="",this.outer="",this.init(),this}u.prototype.init=function(){var e=this;e.s.preload>e.items.length&&(e.s.preload=e.items.length);var t=window.location.hash;if(t.indexOf("lg="+this.s.galleryId)>0&&(e.index=parseInt(t.split("&slide=")[1],10),l.addClass(document.body,"lg-from-hash"),l.hasClass(document.body,"lg-on")||(l.addClass(document.body,"lg-on"),setTimeout(function(){e.build(e.index)}))),e.s.dynamic)l.trigger(this.el,"onBeforeOpen"),e.index=e.s.index||0,l.hasClass(document.body,"lg-on")||(l.addClass(document.body,"lg-on"),setTimeout(function(){e.build(e.index)}));else for(var n=0;n<e.items.length;n++)!function(t){l.on(e.items[t],"click.lgcustom",function(n){n.preventDefault(),l.trigger(e.el,"onBeforeOpen"),e.index=e.s.index||t,l.hasClass(document.body,"lg-on")||(e.build(e.index),l.addClass(document.body,"lg-on"))})}(n)},u.prototype.build=function(e){var t=this;for(var n in t.structure(),window.lgModules)t.modules[n]=new window.lgModules[n](t.el);t.slide(e,!1,!1),t.s.keyPress&&t.keyPress(),t.items.length>1&&(t.arrow(),setTimeout(function(){t.enableDrag(),t.enableSwipe()},50),t.s.mousewheel&&t.mousewheel()),t.counter(),t.closeGallery(),l.trigger(t.el,"onAfterOpen"),l.on(t.outer,"mousemove.lg click.lg touchstart.lg",function(){l.removeClass(t.outer,"lg-hide-items"),clearTimeout(t.hideBartimeout),t.hideBartimeout=setTimeout(function(){l.addClass(t.outer,"lg-hide-items")},t.s.hideBarsDelay)})},u.prototype.structure=function(){var e,t="",n="",i=0,r="",a=this;for(document.body.insertAdjacentHTML("beforeend",'<div class="lg-backdrop"></div>'),this.s.backdropClass&&l.addClass(document.querySelector(".lg-backdrop"),this.s.backdropClass),l.setVendor(document.querySelector(".lg-backdrop"),"TransitionDuration",this.s.backdropDuration+"ms"),i=0;i<this.items.length;i++)t+='<div class="lg-item"></div>';if(this.s.controls&&this.items.length>1&&(n='<div class="lg-actions"><div class="lg-prev lg-icon">'+this.s.prevHtml+'</div><div class="lg-next lg-icon">'+this.s.nextHtml+"</div></div>"),".lg-sub-html"===this.s.appendSubHtmlTo&&(r='<div class="lg-sub-html"></div>'),e='<div class="lg-outer '+this.s.addClass+" "+this.s.startClass+'"><div class="lg" style="width:'+this.s.width+"; height:"+this.s.height+'"><div class="lg-inner">'+t+'</div><div class="lg-toolbar group"><span class="lg-close lg-icon"></span></div>'+n+r+"</div></div>",document.body.insertAdjacentHTML("beforeend",e),this.outer=document.querySelector(".lg-outer"),this.___slide=this.outer.querySelectorAll(".lg-item"),this.s.useLeft?(l.addClass(this.outer,"lg-use-left"),this.s.mode="lg-slide"):l.addClass(this.outer,"lg-use-css3"),a.setTop(),l.on(window,"resize.lg orientationchange.lg",function(){setTimeout(function(){a.setTop()},100)}),l.addClass(this.___slide[this.index],"lg-current"),this.doCss()?l.addClass(this.outer,"lg-css3"):(l.addClass(this.outer,"lg-css"),this.s.speed=0),l.addClass(this.outer,this.s.mode),this.s.enableDrag&&this.items.length>1&&l.addClass(this.outer,"lg-grab"),this.s.showAfterLoad&&l.addClass(this.outer,"lg-show-after-load"),this.doCss()){var o=this.outer.querySelector(".lg-inner");l.setVendor(o,"TransitionTimingFunction",this.s.cssEasing),l.setVendor(o,"TransitionDuration",this.s.speed+"ms")}setTimeout(function(){l.addClass(document.querySelector(".lg-backdrop"),"in")}),setTimeout(function(){l.addClass(a.outer,"lg-visible")},this.s.backdropDuration),this.s.download&&this.outer.querySelector(".lg-toolbar").insertAdjacentHTML("beforeend",'<a id="lg-download" target="_blank" download class="lg-download lg-icon"></a>'),this.prevScrollTop=document.documentElement.scrollTop||document.body.scrollTop},u.prototype.setTop=function(){if("100%"!==this.s.height){var e=window.innerHeight,t=(e-parseInt(this.s.height,10))/2,n=this.outer.querySelector(".lg");e>=parseInt(this.s.height,10)?n.style.top=t+"px":n.style.top="0px"}},u.prototype.doCss=function(){return!!function(){var e=["transition","MozTransition","WebkitTransition","OTransition","msTransition","KhtmlTransition"],t=document.documentElement,n=0;for(n=0;n<e.length;n++)if(e[n]in t.style)return!0}()},u.prototype.isVideo=function(e,t){var n;if(n=this.s.dynamic?this.s.dynamicEl[t].html:this.items[t].getAttribute("data-html"),!e&&n)return{html5:!0};var i=e.match(/\/\/(?:www\.)?youtu(?:\.be|be\.com|be-nocookie\.com)\/(?:watch\?v=|embed\/)?([a-z0-9\-\_\%]+)/i),r=e.match(/\/\/(?:www\.)?vimeo.com\/([0-9a-z\-_]+)/i),a=e.match(/\/\/(?:www\.)?dai.ly\/([0-9a-z\-_]+)/i),o=e.match(/\/\/(?:www\.)?(?:vk\.com|vkontakte\.ru)\/(?:video_ext\.php\?)(.*)/i);return i?{youtube:i}:r?{vimeo:r}:a?{dailymotion:a}:o?{vk:o}:void 0},u.prototype.counter=function(){this.s.counter&&this.outer.querySelector(this.s.appendCounterTo).insertAdjacentHTML("beforeend",'<div id="lg-counter"><span id="lg-counter-current">'+(parseInt(this.index,10)+1)+'</span> / <span id="lg-counter-all">'+this.items.length+"</span></div>")},u.prototype.addHtml=function(e){var t,n=null;if(this.s.dynamic?n=this.s.dynamicEl[e].subHtml:(n=(t=this.items[e]).getAttribute("data-sub-html"),this.s.getCaptionFromTitleOrAlt&&!n&&(n=t.getAttribute("title"))&&t.querySelector("img")&&(n=t.querySelector("img").getAttribute("alt"))),null!=n){var i=n.substring(0,1);"."!==i&&"#"!==i||(n=this.s.subHtmlSelectorRelative&&!this.s.dynamic?t.querySelector(n).innerHTML:document.querySelector(n).innerHTML)}else n="";".lg-sub-html"===this.s.appendSubHtmlTo?this.outer.querySelector(this.s.appendSubHtmlTo).innerHTML=n:this.___slide[e].insertAdjacentHTML("beforeend",n),null!=n&&(""===n?l.addClass(this.outer.querySelector(this.s.appendSubHtmlTo),"lg-empty-html"):l.removeClass(this.outer.querySelector(this.s.appendSubHtmlTo),"lg-empty-html")),l.trigger(this.el,"onAfterAppendSubHtml",{index:e})},u.prototype.preload=function(e){var t=1,n=1;for(t=1;t<=this.s.preload&&!(t>=this.items.length-e);t++)this.loadContent(e+t,!1,0);for(n=1;n<=this.s.preload&&!(e-n<0);n++)this.loadContent(e-n,!1,0)},u.prototype.loadContent=function(e,t,n){var i,r,a,o,s,c,u=this,d=!1,h=function(e){for(var t=[],n=[],i=0;i<e.length;i++){var a=e[i].split(" ");""===a[0]&&a.splice(0,1),n.push(a[0]),t.push(a[1])}for(var o=window.innerWidth,s=0;s<t.length;s++)if(parseInt(t[s],10)>o){r=n[s];break}};if(u.s.dynamic){if(u.s.dynamicEl[e].poster&&(d=!0,a=u.s.dynamicEl[e].poster),c=u.s.dynamicEl[e].html,r=u.s.dynamicEl[e].src,u.s.dynamicEl[e].responsive)h(u.s.dynamicEl[e].responsive.split(","));o=u.s.dynamicEl[e].srcset,s=u.s.dynamicEl[e].sizes}else{if(u.items[e].getAttribute("data-poster")&&(d=!0,a=u.items[e].getAttribute("data-poster")),c=u.items[e].getAttribute("data-html"),r=u.items[e].getAttribute("href")||u.items[e].getAttribute("data-src"),u.items[e].getAttribute("data-responsive"))h(u.items[e].getAttribute("data-responsive").split(","));o=u.items[e].getAttribute("data-srcset"),s=u.items[e].getAttribute("data-sizes")}var f=!1;u.s.dynamic?u.s.dynamicEl[e].iframe&&(f=!0):"true"===u.items[e].getAttribute("data-iframe")&&(f=!0);var m=u.isVideo(r,e);if(!l.hasClass(u.___slide[e],"lg-loaded")){if(f)u.___slide[e].insertAdjacentHTML("afterbegin",'<div class="lg-video-cont" style="max-width:'+u.s.iframeMaxWidth+'"><div class="lg-video"><iframe class="lg-object" frameborder="0" src="'+r+'"  allowfullscreen="true"></iframe></div></div>');else if(d){var p="";p=m&&m.youtube?"lg-has-youtube":m&&m.vimeo?"lg-has-vimeo":"lg-has-html5",u.___slide[e].insertAdjacentHTML("beforeend",'<div class="lg-video-cont '+p+' "><div class="lg-video"><span class="lg-video-play"></span><img class="lg-object lg-has-poster" src="'+a+'" /></div></div>')}else m?(u.___slide[e].insertAdjacentHTML("beforeend",'<div class="lg-video-cont "><div class="lg-video"></div></div>'),l.trigger(u.el,"hasVideo",{index:e,src:r,html:c})):u.___slide[e].insertAdjacentHTML("beforeend",'<div class="lg-img-wrap"><img class="lg-object lg-image" src="'+r+'" /></div>');if(l.trigger(u.el,"onAferAppendSlide",{index:e}),i=u.___slide[e].querySelector(".lg-object"),s&&i.setAttribute("sizes",s),o){i.setAttribute("srcset",o);try{picturefill({elements:[i[0]]})}catch(e){}}".lg-sub-html"!==this.s.appendSubHtmlTo&&u.addHtml(e),l.addClass(u.___slide[e],"lg-loaded")}l.on(u.___slide[e].querySelector(".lg-object"),"load.lg error.lg",function(){var t=0;n&&!l.hasClass(document.body,"lg-from-hash")&&(t=n),setTimeout(function(){l.addClass(u.___slide[e],"lg-complete"),l.trigger(u.el,"onSlideItemLoad",{index:e,delay:n||0})},t)}),m&&m.html5&&!d&&l.addClass(u.___slide[e],"lg-complete"),!0===t&&(l.hasClass(u.___slide[e],"lg-complete")?u.preload(e):l.on(u.___slide[e].querySelector(".lg-object"),"load.lg error.lg",function(){u.preload(e)}))},u.prototype.slide=function(e,t,n){for(var i=0,r=0;r<this.___slide.length;r++)if(l.hasClass(this.___slide[r],"lg-current")){i=r;break}var a=this;if(!a.lGalleryOn||i!==e){var o=this.___slide.length,s=a.lGalleryOn?this.s.speed:0,c=!1,u=!1;if(!a.lgBusy){var d;if(this.s.download)(d=a.s.dynamic?!1!==a.s.dynamicEl[e].downloadUrl&&(a.s.dynamicEl[e].downloadUrl||a.s.dynamicEl[e].src):"false"!==a.items[e].getAttribute("data-download-url")&&(a.items[e].getAttribute("data-download-url")||a.items[e].getAttribute("href")||a.items[e].getAttribute("data-src")))?(document.getElementById("lg-download").setAttribute("href",d),l.removeClass(a.outer,"lg-hide-download")):l.addClass(a.outer,"lg-hide-download");if(l.trigger(a.el,"onBeforeSlide",{prevIndex:i,index:e,fromTouch:t,fromThumb:n}),a.lgBusy=!0,clearTimeout(a.hideBartimeout),".lg-sub-html"===this.s.appendSubHtmlTo&&setTimeout(function(){a.addHtml(e)},s),this.arrowDisable(e),t){var h=e-1,f=e+1;0===e&&i===o-1?(f=0,h=o-1):e===o-1&&0===i&&(f=0,h=o-1),l.removeClass(a.outer.querySelector(".lg-prev-slide"),"lg-prev-slide"),l.removeClass(a.outer.querySelector(".lg-current"),"lg-current"),l.removeClass(a.outer.querySelector(".lg-next-slide"),"lg-next-slide"),l.addClass(a.___slide[h],"lg-prev-slide"),l.addClass(a.___slide[f],"lg-next-slide"),l.addClass(a.___slide[e],"lg-current")}else{l.addClass(a.outer,"lg-no-trans");for(var m=0;m<this.___slide.length;m++)l.removeClass(this.___slide[m],"lg-prev-slide"),l.removeClass(this.___slide[m],"lg-next-slide");e<i?(u=!0,0!==e||i!==o-1||n||(u=!1,c=!0)):e>i&&(c=!0,e!==o-1||0!==i||n||(u=!0,c=!1)),u?(l.addClass(this.___slide[e],"lg-prev-slide"),l.addClass(this.___slide[i],"lg-next-slide")):c&&(l.addClass(this.___slide[e],"lg-next-slide"),l.addClass(this.___slide[i],"lg-prev-slide")),setTimeout(function(){l.removeClass(a.outer.querySelector(".lg-current"),"lg-current"),l.addClass(a.___slide[e],"lg-current"),l.removeClass(a.outer,"lg-no-trans")},50)}a.lGalleryOn?(setTimeout(function(){a.loadContent(e,!0,0)},this.s.speed+50),setTimeout(function(){a.lgBusy=!1,l.trigger(a.el,"onAfterSlide",{prevIndex:i,index:e,fromTouch:t,fromThumb:n})},this.s.speed)):(a.loadContent(e,!0,a.s.backdropDuration),a.lgBusy=!1,l.trigger(a.el,"onAfterSlide",{prevIndex:i,index:e,fromTouch:t,fromThumb:n})),a.lGalleryOn=!0,this.s.counter&&document.getElementById("lg-counter-current")&&(document.getElementById("lg-counter-current").innerHTML=e+1)}}},u.prototype.goToNextSlide=function(e){var t=this;t.lgBusy||(t.index+1<t.___slide.length?(t.index++,l.trigger(t.el,"onBeforeNextSlide",{index:t.index}),t.slide(t.index,e,!1)):t.s.loop?(t.index=0,l.trigger(t.el,"onBeforeNextSlide",{index:t.index}),t.slide(t.index,e,!1)):t.s.slideEndAnimatoin&&(l.addClass(t.outer,"lg-right-end"),setTimeout(function(){l.removeClass(t.outer,"lg-right-end")},400)))},u.prototype.goToPrevSlide=function(e){var t=this;t.lgBusy||(t.index>0?(t.index--,l.trigger(t.el,"onBeforePrevSlide",{index:t.index,fromTouch:e}),t.slide(t.index,e,!1)):t.s.loop?(t.index=t.items.length-1,l.trigger(t.el,"onBeforePrevSlide",{index:t.index,fromTouch:e}),t.slide(t.index,e,!1)):t.s.slideEndAnimatoin&&(l.addClass(t.outer,"lg-left-end"),setTimeout(function(){l.removeClass(t.outer,"lg-left-end")},400)))},u.prototype.keyPress=function(){var e=this;this.items.length>1&&l.on(window,"keyup.lg",function(t){e.items.length>1&&(37===t.keyCode&&(t.preventDefault(),e.goToPrevSlide()),39===t.keyCode&&(t.preventDefault(),e.goToNextSlide()))}),l.on(window,"keydown.lg",function(t){!0===e.s.escKey&&27===t.keyCode&&(t.preventDefault(),l.hasClass(e.outer,"lg-thumb-open")?l.removeClass(e.outer,"lg-thumb-open"):e.destroy())})},u.prototype.arrow=function(){var e=this;l.on(this.outer.querySelector(".lg-prev"),"click.lg",function(){e.goToPrevSlide()}),l.on(this.outer.querySelector(".lg-next"),"click.lg",function(){e.goToNextSlide()})},u.prototype.arrowDisable=function(e){if(!this.s.loop&&this.s.hideControlOnEnd){var t=this.outer.querySelector(".lg-next"),n=this.outer.querySelector(".lg-prev");e+1<this.___slide.length?(t.removeAttribute("disabled"),l.removeClass(t,"disabled")):(t.setAttribute("disabled","disabled"),l.addClass(t,"disabled")),e>0?(n.removeAttribute("disabled"),l.removeClass(n,"disabled")):(n.setAttribute("disabled","disabled"),l.addClass(n,"disabled"))}},u.prototype.setTranslate=function(e,t,n){this.s.useLeft?e.style.left=t:l.setVendor(e,"Transform","translate3d("+t+"px, "+n+"px, 0px)")},u.prototype.touchMove=function(e,t){var n=t-e;Math.abs(n)>15&&(l.addClass(this.outer,"lg-dragging"),this.setTranslate(this.___slide[this.index],n,0),this.setTranslate(document.querySelector(".lg-prev-slide"),-this.___slide[this.index].clientWidth+n,0),this.setTranslate(document.querySelector(".lg-next-slide"),this.___slide[this.index].clientWidth+n,0))},u.prototype.touchEnd=function(e){var t=this;"lg-slide"!==t.s.mode&&l.addClass(t.outer,"lg-slide");for(var n=0;n<this.___slide.length;n++)l.hasClass(this.___slide[n],"lg-current")||l.hasClass(this.___slide[n],"lg-prev-slide")||l.hasClass(this.___slide[n],"lg-next-slide")||(this.___slide[n].style.opacity="0");setTimeout(function(){l.removeClass(t.outer,"lg-dragging"),e<0&&Math.abs(e)>t.s.swipeThreshold?t.goToNextSlide(!0):e>0&&Math.abs(e)>t.s.swipeThreshold?t.goToPrevSlide(!0):Math.abs(e)<5&&l.trigger(t.el,"onSlideClick");for(var n=0;n<t.___slide.length;n++)t.___slide[n].removeAttribute("style")}),setTimeout(function(){l.hasClass(t.outer,"lg-dragging")||"lg-slide"===t.s.mode||l.removeClass(t.outer,"lg-slide")},t.s.speed+100)},u.prototype.enableSwipe=function(){var e=this,t=0,n=0,i=!1;if(e.s.enableSwipe&&e.isTouch&&e.doCss()){for(var r=0;r<e.___slide.length;r++)l.on(e.___slide[r],"touchstart.lg",function(n){l.hasClass(e.outer,"lg-zoomed")||e.lgBusy||(n.preventDefault(),e.manageSwipeClass(),t=n.targetTouches[0].pageX)});for(var a=0;a<e.___slide.length;a++)l.on(e.___slide[a],"touchmove.lg",function(r){l.hasClass(e.outer,"lg-zoomed")||(r.preventDefault(),n=r.targetTouches[0].pageX,e.touchMove(t,n),i=!0)});for(var o=0;o<e.___slide.length;o++)l.on(e.___slide[o],"touchend.lg",function(){l.hasClass(e.outer,"lg-zoomed")||(i?(i=!1,e.touchEnd(n-t)):l.trigger(e.el,"onSlideClick"))})}},u.prototype.enableDrag=function(){var e=this,t=0,n=0,i=!1,r=!1;if(e.s.enableDrag&&!e.isTouch&&e.doCss()){for(var a=0;a<e.___slide.length;a++)l.on(e.___slide[a],"mousedown.lg",function(n){l.hasClass(e.outer,"lg-zoomed")||(l.hasClass(n.target,"lg-object")||l.hasClass(n.target,"lg-video-play"))&&(n.preventDefault(),e.lgBusy||(e.manageSwipeClass(),t=n.pageX,i=!0,e.outer.scrollLeft+=1,e.outer.scrollLeft-=1,l.removeClass(e.outer,"lg-grab"),l.addClass(e.outer,"lg-grabbing"),l.trigger(e.el,"onDragstart")))});l.on(window,"mousemove.lg",function(a){i&&(r=!0,n=a.pageX,e.touchMove(t,n),l.trigger(e.el,"onDragmove"))}),l.on(window,"mouseup.lg",function(a){r?(r=!1,e.touchEnd(n-t),l.trigger(e.el,"onDragend")):(l.hasClass(a.target,"lg-object")||l.hasClass(a.target,"lg-video-play"))&&l.trigger(e.el,"onSlideClick"),i&&(i=!1,l.removeClass(e.outer,"lg-grabbing"),l.addClass(e.outer,"lg-grab"))})}},u.prototype.manageSwipeClass=function(){var e=this.index+1,t=this.index-1,n=this.___slide.length;this.s.loop&&(0===this.index?t=n-1:this.index===n-1&&(e=0));for(var i=0;i<this.___slide.length;i++)l.removeClass(this.___slide[i],"lg-next-slide"),l.removeClass(this.___slide[i],"lg-prev-slide");t>-1&&l.addClass(this.___slide[t],"lg-prev-slide"),l.addClass(this.___slide[e],"lg-next-slide")},u.prototype.mousewheel=function(){var e=this;l.on(e.outer,"mousewheel.lg",function(t){t.deltaY&&(t.deltaY>0?e.goToPrevSlide():e.goToNextSlide(),t.preventDefault())})},u.prototype.closeGallery=function(){var e=this,t=!1;l.on(this.outer.querySelector(".lg-close"),"click.lg",function(){e.destroy()}),e.s.closable&&(l.on(e.outer,"mousedown.lg",function(e){t=!!(l.hasClass(e.target,"lg-outer")||l.hasClass(e.target,"lg-item")||l.hasClass(e.target,"lg-img-wrap"))}),l.on(e.outer,"mouseup.lg",function(n){(l.hasClass(n.target,"lg-outer")||l.hasClass(n.target,"lg-item")||l.hasClass(n.target,"lg-img-wrap")&&t)&&(l.hasClass(e.outer,"lg-dragging")||e.destroy())}))},u.prototype.destroy=function(e){var t=this;if(e||l.trigger(t.el,"onBeforeClose"),e){if(!t.s.dynamic)for(var n=0;n<this.items.length;n++)l.off(this.items[n],".lg"),l.off(this.items[n],".lgcustom");var i=t.el.getAttribute("lg-uid");delete window.lgData[i],t.el.removeAttribute("lg-uid")}for(var r in l.off(this.el,".lgtm"),window.lgModules)t.modules[r]&&t.modules[r].destroy(e);this.lGalleryOn=!1,clearTimeout(t.hideBartimeout),this.hideBartimeout=!1,l.off(window,".lg"),l.removeClass(document.body,"lg-on"),l.removeClass(document.body,"lg-from-hash"),t.outer&&l.removeClass(t.outer,"lg-visible"),l.removeClass(document.querySelector(".lg-backdrop"),"in"),setTimeout(function(){try{t.outer&&t.outer.parentNode.removeChild(t.outer),document.querySelector(".lg-backdrop")&&document.querySelector(".lg-backdrop").parentNode.removeChild(document.querySelector(".lg-backdrop")),e||l.trigger(t.el,"onCloseAfter")}catch(e){}},t.s.backdropDuration+50)},window.lightGallery=function(e,t){if(e)try{if(e.getAttribute("lg-uid"))try{window.lgData[e.getAttribute("lg-uid")].init()}catch(e){}else{var n="lg"+window.lgData.uid++;window.lgData[n]=new u(e,t),e.setAttribute("lg-uid",n)}}catch(e){}};var d=n(196),h=n(146);function f(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function m(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var p=function(){var e,t,n;function i(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),e.addEventListener("click",function(){"block"===t.style.display?(t.style.display="none",e.classList.remove("list-open")):(t.style.display="block",e.classList.add("list-open"))})}return e=i,n=[{key:"init",value:function(){var e=f(document.querySelectorAll(".js-more-button")),t=f(document.querySelectorAll(".js-hidden-items"));e&&t&&e.forEach(function(e,n){new i(e,t[n])})}}],(t=null)&&m(e.prototype,t),n&&m(e,n),i}();function v(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function y(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function g(e,t,n){return t&&y(e.prototype,t),n&&y(e,n),e}var b=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,this.intersectionObserver=new IntersectionObserver(function(e){return n.handleIntersection(e)}),this.intersectionObserver.observe(this.element)}return g(e,null,[{key:"init",value:function(){v(document.querySelectorAll(".preview-cards-n-2")).forEach(function(t){new e(t)})}}]),g(e,[{key:"handleIntersection",value:function(e){var t=this,n="preview-cards-n-2",i="tabs-link-n-2",r=v(this.element.querySelectorAll(".".concat(n,"__cards-group"))),a=v(this.element.querySelectorAll(".".concat(i,"__tab"))),o=v(this.element.querySelectorAll(".".concat(n,"__main-button"))),s=this.element.querySelector(".".concat(n," .").concat(i,"__tab_active")),l=this.element.querySelector(".line-n-2"),c=0,u=0;s&&l&&(c=s.offsetLeft,u=s.offsetWidth,l.style.left=c+"px",l.style.width=u+"px"),this.previousRow=r[0],this.previousTabButton=a[0],this.previousAllButton=o[0],a.forEach(function(e,a){e.addEventListener("click",function(s){s.preventDefault();var d=s.currentTarget,h=r[a],f=o[a];if(!e.classList.contains("".concat(i,"__tab_active"))){h.classList.remove("".concat(n,"__cards-group_hidden")),t.previousRow.classList.add("".concat(n,"__cards-group_hidden")),t.previousTabButton.classList.remove("".concat(i,"__tab_active")),c=t.previousTabButton.offsetLeft,u=t.previousTabButton.offsetWidth;var m=d.offsetLeft,p=d.offsetWidth;m>=c?(l.style.width="".concat(m-c+p,"px"),setTimeout(function(){l.style.cssText="left: ".concat(m,"px;                 width: ").concat(p,"px;               ")},300),e.classList.add("".concat(i,"__tab_active"))):(l.style.cssText="left: ".concat(m,"px;               width: ").concat(c-m+u,"px;             "),setTimeout(function(){l.style.width="".concat(p,"px")},300),e.classList.add("".concat(i,"__tab_active"))),t.previousAllButton.classList.add("".concat(n,"__main-button_hidden")),f.classList.remove("".concat(n,"__main-button_hidden")),t.previousRow=h,t.previousTabButton=e,t.previousAllButton=f}})}),this.intersectionObserver.disconnect()}}]),e}();function w(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function k(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var C=function(){var e,t,n;function i(e){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var n=w(document.querySelectorAll(".".concat(e," .js-drop-button-n-2"))),r=w(document.querySelectorAll(".".concat(e," .js-hidden-menu-n-2")));n.forEach(function(n,i){if(!n.DropMenu){n.DropMenu=!0;var a=r[i],o=function(){n.classList.remove("".concat(e,"__link_open")),a.classList.add("".concat(e,"__sublinks-wrapper_hidden"))};n.addEventListener("click",function(){var i=function e(t){t.target===n||a.contains(t.target)||(o(),document.removeEventListener("click",e))};n.classList.contains("".concat(e,"__link_open"))?(o(),document.removeEventListener("click",i)):(n.classList.add("".concat(e,"__link_open")),a.classList.remove("".concat(e,"__sublinks-wrapper_hidden"))),t.previousButton&&t.previousButton!==n&&t.previousButton.classList.contains("".concat(e,"__link_open"))&&(t.previousButton.classList.remove("".concat(e,"__link_open")),t.previousMenu.classList.add("".concat(e,"__sublinks-wrapper_hidden"))),t.previousButton=n,t.previousMenu=a,document.addEventListener("click",i)})}})}return e=i,n=[{key:"init",value:function(){["main-nav-n-2","tablet-menu-n-2","side-menu-n-2"].forEach(function(e){new i(e)})}}],(t=null)&&k(e.prototype,t),n&&k(e,n),i}();function S(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _(e,t,n){return t&&S(e.prototype,t),n&&S(e,n),e}var A=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t.SideMenu||(t.SideMenu=this,this.burger=t,this.menu=n,this.state={open:!1},this.calcHeight=this.calcHeight.bind(this),this.onWindowResize=this.onWindowResize.bind(this),this.calcHeight(),this.bindHandlers())}return _(e,null,[{key:"init",value:function(){var t=document.querySelector(".js-burger-n-2"),n=document.querySelector(".js-side-menu-n-2");t&&n&&new e(t,n)}}]),_(e,[{key:"bindHandlers",value:function(){var e=this;this.burger.addEventListener("click",function(){e.state.open?e.close():e.open()}),this.menu.classList.add("side-menu-n-2_inited"),document.addEventListener("close-top-banner",this.calcHeight),window.addEventListener("resize",this.onWindowResize)}},{key:"open",value:function(){this.burger.classList.add("active"),this.menu.classList.add("side-menu-n-2_open"),document.body.classList.add("no-scroll"),this.calcHeight(),this.state.open=!0}},{key:"close",value:function(){this.burger.classList.remove("active"),this.menu.classList.remove("side-menu-n-2_open"),document.body.classList.remove("no-scroll"),this.state.open=!1}},{key:"calcHeight",value:function(){var e=document.documentElement.clientHeight-this.menu.getBoundingClientRect().top;this.menu.style.height=e+"px"}},{key:"onWindowResize",value:function(){this.calcHeight(),document.body.clientWidth>=1024&&this.state.open&&this.close()}}]),e}(),E=n(52),L=n(53),T=n(27),x=n(113),j=n(177),O=(n(116),n(31));function M(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function q(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function I(e,t,n){return t&&q(e.prototype,t),n&&q(e,n),e}var P=function(){function e(t,n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t.CityPick){t.CityPick=this,this.element=t,this.output=t.querySelector(".".concat(n,"__output")),this.list=t.querySelector(".".concat(n,"__list")),this.cities=M(t.querySelectorAll(".".concat(n,"__city"))),this.cookie=new O.a,this.selector=n,this.clickOutHandle=this.clickOutHandle.bind(this);var i=location.hostname.split(".")[0],r="novostroev"===i?"":"".concat(i,"-");this.cookieNames={city:"".concat(r,"geo-city"),cityName:"".concat(r,"geo-city-name")},this.previousCity=null,this.cityID=this.cookie.getCookie(this.cookieNames.city),this.cityName=this.cookie.getCookie(this.cookieNames.cityName),this.update(),this.bindHanlers()}}return I(e,null,[{key:"init",value:function(){["city-pick-n-2","city-pick-mobile-n-2"].forEach(function(t){var n=document.querySelector(".".concat(t));n&&new e(n,t)})}}]),I(e,[{key:"bindHanlers",value:function(){var e=this;this.element.addEventListener("first-pick",function(){e.update()}),this.output.addEventListener("click",function(){e.list.classList.contains("".concat(e.selector,"__list_open"))?e.closePopup():(e.list.classList.add("".concat(e.selector,"__list_open")),e.output.classList.add("".concat(e.selector,"__output_open")),document.addEventListener("click",e.clickOutHandle))}),this.list.addEventListener("click",function(t){var n=t.target;if(n.classList.contains("".concat(e.selector,"__city"))){e.cityID=n.getAttribute("data-city"),e.cityName=n.textContent,e.previousCity&&e.previousCity.classList.remove("".concat(e.selector,"__city_selected")),n.classList.add("".concat(e.selector,"__city_selected")),e.output.textContent=e.cityName,e.addCookie(),e.previousCity=n,e.closePopup();var i=e.list.getAttribute("data-redirect");i&&i.trim().length?window.location.href=i:window.location.reload()}})}},{key:"addCookie",value:function(){var e=new Date;e.setFullYear(e.getFullYear()+10);var t={expires:e.toUTCString(),path:"/",domain:window.location.hostname};this.cookie.setCookie(this.cookieNames.city,this.cityID,t),this.cookie.setCookie(this.cookieNames.cityName,this.cityName.trim(),t),localStorage.setItem(this.cookieNames.city,this.cityID),localStorage.setItem(this.cookieNames.cityName,this.cityName.trim())}},{key:"update",value:function(){var e=this;this.cityID&&this.cityName&&(this.output.textContent=this.cityName,this.cities.forEach(function(t){t.textContent.trim()===e.cityName.trim()&&(t.classList.add("".concat(e.selector,"__city_selected")),e.previousCity=t)}))}},{key:"clickOutHandle",value:function(e){e.target!==this.output&&e.target!==this.list&&this.closePopup()}},{key:"closePopup",value:function(){this.list.classList.remove("".concat(this.selector,"__list_open")),this.output.classList.remove("".concat(this.selector,"__output_open")),document.removeEventListener("click",this.clickOutHandle)}}]),e}();function H(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function B(e,t,n){return t&&H(e.prototype,t),n&&H(e,n),e}var N=function(){function e(t,n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t.FirstPick){t.FirstPick=this,this.normalPick=t,this.mobilePick=n,this.cookie=new O.a;var i=location.hostname.split(".")[0],r="novostroev"===i?"":"".concat(i,"-");this.cookieNames={city:"".concat(r,"geo-city"),cityName:"".concat(r,"geo-city-name")},this.cityPick=document.querySelector(".city-pick-n-2"),this.cityPickMobile=document.querySelector(".city-pick-mobile-n-2"),this.cityID=this.cookie.getCookie(this.cookieNames.city),this.cityName=this.cookie.getCookie(this.cookieNames.cityName),this.cityID&&this.cityName||this.show()}}return B(e,null,[{key:"init",value:function(){var t=document.querySelector(".first-pick-n-2"),n=document.querySelector(".first-pick-mobile-n-2");(t||n)&&new e(t,n)}}]),B(e,[{key:"show",value:function(){this.width=document.body.clientWidth,this.width<768?this.showMobilePick():this.showDesktopPick()}},{key:"showMobilePick",value:function(){var e=this,t=document.querySelector(".first-pick-mobile-n-2__supposed-city"),n=this.mobilePick.querySelector(".first-pick-mobile-n-2__correct-region"),i=this.mobilePick.querySelector(".first-pick-mobile-n-2__change-region"),r=this.mobilePick.querySelector(".first-pick-mobile-n-2__list");this.cityID=t.getAttribute("data-city"),this.cityName=t.textContent,this.mobilePick.style.display="block",this.cityPickMobile.style.display="none",n.addEventListener("click",function(){e.addCookie(),e.mobilePick.style.display="none",e.cityPickMobile.style.display="block"}),i.addEventListener("click",function(){r.style.display="block"}),r.addEventListener("click",function(t){if(t.target.classList.contains("first-pick-mobile-n-2__city")){var n=t.target;e.cityID=n.getAttribute("data-city"),e.cityName=n.textContent,e.addCookie(),e.mobilePick.style.display="none",e.cityPickMobile.style.display="block";var i=e.cityPickMobile.getAttribute("data-redirect");i&&i.trim().length?window.location.href=i:window.location.reload()}})}},{key:"showDesktopPick",value:function(){var e=this,t=document.querySelector(".first-pick-n-2__city"),n=this.normalPick.querySelector(".first-pick-n-2__correct-region"),i=this.normalPick.querySelector(".first-pick-n-2__change-region");this.cityID=t.getAttribute("data-city"),this.cityName=t.textContent,this.normalPick.classList.remove("first-pick-n-2_hidden"),n.addEventListener("click",function(){e.addCookie(),e.normalPick.classList.add("first-pick-n-2_hidden")}),i.addEventListener("click",function(){e.normalPick.classList.add("first-pick-n-2_hidden"),document.querySelector(".city-pick-n-2__list").classList.add("city-pick-n-2__list_open")})}},{key:"addCookie",value:function(){var e=new Date;e.setFullYear(e.getFullYear()+10);var t={expires:e.toUTCString(),path:"/",domain:window.location.hostname};this.cookie.setCookie(this.cookieNames.city,this.cityID,t),this.cookie.setCookie(this.cookieNames.cityName,this.cityName.trim(),t),localStorage.setItem(this.cookieNames.city,this.cityID),localStorage.setItem(this.cookieNames.cityName,this.cityName.trim())}}]),e}();function R(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function D(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function z(e,t,n){return t&&D(e.prototype,t),n&&D(e,n),e}var V=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,this.content={initial:this.element.querySelector(".button-n-2__content_initial"),hidden:this.element.querySelector(".button-n-2__content_hidden")},this.onClick=this.onClick.bind(this),this.element.addEventListener("click",this.onClick)}return z(e,null,[{key:"init",value:function(){return R(document.querySelectorAll(".button-n-2_switchable")).map(function(t){return new e(t)})}}]),z(e,[{key:"onClick",value:function(e){e.preventDefault(),this.content.initial.style.display="none",this.content.hidden.style.display="block",this.element.classList.contains("button-n-2_type_phone")&&window.ym&&window.ym(39897405,"reachGoal","show_telephone"),this.element.removeEventListener("click",this.onClick)}}]),e}();function F(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function W(e,t,n){return t&&F(e.prototype,t),n&&F(e,n),e}var G=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,this.closeButton=t.querySelector(".wide-banner-n-2__close-wrapper"),this.onClose=this.onClose.bind(this),this.closeButton.addEventListener("click",this.onClose)}return W(e,null,[{key:"init",value:function(){var t=document.querySelector(".wide-banner-n-2_closing");return t?new e(t):null}}]),W(e,[{key:"onClose",value:function(){var e=new CustomEvent("close-top-banner");this.element.style.display="none",document.dispatchEvent(e)}}]),e}(),Z=n(198),U=n.n(Z);function J(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function X(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var K=function(){var e,t,n;function i(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.element=e,this.selectNode=this.element.querySelector("select"),i.initSelect(this.selectNode)}return e=i,n=[{key:"init",value:function(){var e=J((arguments.length>0&&void 0!==arguments[0]?arguments[0]:document).querySelectorAll(".js-select-container"));return i.initAll(e)}},{key:"initAll",value:function(e){var t=new IntersectionObserver(function(e){return function(e){e.forEach(function(e){var n=e.isIntersecting,r=e.target;n&&(i.initSelect(r),t.unobserve(r))})}(e)},{rootMargin:"50px"});e.forEach(function(e){return t.observe(e)})}},{key:"initSelect",value:function(e){return e instanceof HTMLSelectElement||(e=e.querySelector("select")),e.Select=new U.a({select:e,showSearch:!1,allowDeselect:!1}),!0}}],(t=null)&&X(e.prototype,t),n&&X(e,n),i}(),Y=n(43),$=n(16),Q=n.n($);function ee(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function te(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ne(e,t,n){return t&&te(e.prototype,t),n&&te(e,n),e}var ie=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,this.slider=t.querySelector(".layouts-slider"),this.slider&&(this.arrows={prev:t.querySelector(".swiper-button-prev"),next:t.querySelector(".swiper-button-next")},this.buttonAll=t.querySelector(".apartment-aside__control .button-n-2"),this.initSlider(),this.bindHandlers())}return ne(e,null,[{key:"init",value:function(){var t=document.querySelector(".apartment-layouts");return t?new e(t):null}}]),ne(e,[{key:"initSlider",value:function(){var e=this,t=ee(this.slider.querySelectorAll(".swiper-slide")).length;this.swiper=new Q.a(this.slider,{slidesPerView:6,spaceBetween:13,initialSlide:0,loop:t>3,navigation:{nextEl:this.arrows.next,prevEl:this.arrows.prev},breakpoints:{1287:{slidesPerView:5,loop:t>6},900:{slidesPerView:4,loop:t>5},767:{slidesPerView:3,loop:t>4},567:{slidesPerView:2,loop:t>3}}}),lightGallery(this.slider,{thumbnail:!0,hash:!1,download:!1,loop:!0,exThumbImage:"data-src",selector:".swiper-slide:not(.swiper-slide-duplicate) .layout__preview"}),ee(this.slider.querySelectorAll(".swiper-slide-duplicate .layout__preview")).map(function(t){t.addEventListener("click",function(n){n.preventDefault();var i=t.parentNode.parentNode.getAttribute("data-swiper-slide-index");e.clickOnGalleryLink(i)})})}},{key:"bindHandlers",value:function(){var e=this;this.buttonAll&&this.buttonAll.addEventListener("click",function(t){t.preventDefault(),e.clickOnGalleryLink(0)})}},{key:"clickOnGalleryLink",value:function(e){var t=this.getOriginalSlide(e).querySelector("a");return t?t.click():null}},{key:"getOriginalSlide",value:function(e){return this.slider.querySelector('[data-swiper-slide-index="'.concat(e,'"]:not(.swiper-slide-duplicate)'))}}]),e}(),re=n(143),ae=(n(24),n(10)),oe=n(39),se=n(67);function le(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ce(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ue(e,t,n){return t&&ce(e.prototype,t),n&&ce(e,n),e}var de=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,this.slider=t.querySelector(".timeline-slider__slider .swiper-container"),this.months=le(t.querySelectorAll(".timeline-month")),this.line=new se.a({line:t.querySelector(".timeline-years__line")}),this.navi={prevEl:t.querySelector(".btn-slider_prev"),nextEl:t.querySelector(".btn-slider_next")},this.yearsWrapper=t.querySelector(".timeline-years__wrapper"),this.classes={activeMonth:"timeline-month_active"},this.state={activeMonth:this.months.find(function(e){return e.classList.contains(n.classes.activeMonth)})},this.ps=new oe.a(this.yearsWrapper,{wheelSpeed:.7}),window.addEventListener("resize",this.ps.update),this.initSliders(),this.initHandlers()}return ue(e,null,[{key:"init",value:function(){var t=document.querySelector(".timeline-slider");return t?new e(t):null}}]),ue(e,[{key:"initSliders",value:function(){var e=this;this.swiper=new Q.a(this.slider,{slidesPerView:"auto",spaceBetween:10,setWrapperSize:!0,navigation:this.navi,breakpoints:{767:{slidesPerView:1}}}),lightGallery(this.slider,{thumbnail:!0,hash:!1,download:!1,loop:!0,exThumbImage:"data-src",selector:".swiper-slide .timeline-slider__image"}),this.monthIndexes={},this.swiper.slides.each(function(t,n){var i=n.id;i&&(e.monthIndexes[i]=t)})}},{key:"initHandlers",value:function(){var e=this;this.months.map(function(t){t.addEventListener("click",function(n){n.preventDefault();var i=t.getAttribute("href");e.swiper.slideTo(e.monthIndexes[i.replace("#","")])})}),this.swiper.on("slideChange",function(){var t=e.swiper,n=t.activeIndex,i=t.previousIndex,r=e.swiper.slides[n];if(e.swiper.isEnd){var a=e.getLeftDatedSlideId(e.swiper.slides.length-1);e.line.move(e.getMonthLink(a))}else if(e.checkIfDated(r)){var o=e.getMonthLink(r.id);e.line.move(o),e.toggleActiveMonth(o)}else if(e.checkIfDated(e.swiper.slides[i])&&i>n){var s=e.getLeftDatedSlideId(n),l=e.getMonthLink(s);e.line.move(l),e.toggleActiveMonth(l)}var c,u,d=(c=e.state.activeMonth,u=":first-child",(c.matches||c.matchesSelector||c.msMatchesSelector||c.mozMatchesSelector||c.webkitMatchesSelector||c.oMatchesSelector).call(c,u)?74:10);ae.c.to(e.yearsWrapper,.3,{scrollLeft:e.state.activeMonth.offsetLeft-d})}),this.line.move(this.months[0])}},{key:"checkIfDated",value:function(e){return e.classList.contains("timeline-slider__slide_has-date")}},{key:"getLeftDatedSlideId",value:function(e){var t=Array.from(this.swiper.slides);for(e--;e>-1;){var n=t[e];if(this.checkIfDated(n))return n.id;e--}}},{key:"getMonthLink",value:function(e){return document.querySelector('[href="#'.concat(e,'"]'))}},{key:"toggleActiveMonth",value:function(e){this.state.activeMonth.classList.remove(this.classes.activeMonth),this.state.activeMonth=e,this.state.activeMonth.classList.add(this.classes.activeMonth)}}]),e}(),he=n(144);function fe(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function me(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function pe(e,t,n){return t&&me(e.prototype,t),n&&me(e,n),e}var ve=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,this.slider=t.querySelector(".swiper-container"),this.arrows={prev:t.querySelector(".swiper-button-prev"),next:t.querySelector(".swiper-button-next")},this.slidesCount=fe(this.element.querySelectorAll(".swiper-slide")).length,this.init()}return pe(e,null,[{key:"init",value:function(){return fe(document.querySelectorAll(".previews-slider")).map(function(t){return new e(t)})}}]),pe(e,[{key:"init",value:function(){this.toggleSliderOnScreenWidth(),window.addEventListener("resize",this.toggleSliderOnScreenWidth.bind(this))}},{key:"initSlider",value:function(){this.swiper&&this.swiper.initialized||(this.swiper=new Q.a(this.slider,{slidesPerView:4,initialSlide:0,spaceBetween:24,loop:!0,navigation:{nextEl:this.arrows.next,prevEl:this.arrows.prev},breakpoints:{1023:{slidesPerView:2},767:{slidesPerView:1}}}))}},{key:"destroySlider",value:function(){this.swiper&&this.swiper.initialized&&(this.swiper.destroy(),this.swiper=null)}},{key:"toggleSliderOnScreenWidth",value:function(){var e=document.documentElement.clientWidth;e>1023&&this.toggleSliderOnSlidesCount(4),e>767&&e<1024&&this.toggleSliderOnSlidesCount(2),e<768&&this.toggleSliderOnSlidesCount(1)}},{key:"toggleSliderOnSlidesCount",value:function(e){this.slidesCount>e?this.initSlider():this.destroySlider()}}]),e}(),ye=n(54);function ge(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function be(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function we(e,t,n){return t&&be(e.prototype,t),n&&be(e,n),e}var ke=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,this.topContainer=t.querySelector(".photo-gallery-single"),this.thumbContainer=t.querySelector(".photo-gallery-previews"),this.topContainer&&(this.intersectionObserver=new IntersectionObserver(function(e){return n.handleIntersection(e)}),this.topContainer&&this.intersectionObserver.observe(this.topContainer),this.thumbContainer&&this.intersectionObserver.observe(this.thumbContainer),this.init())}return we(e,null,[{key:"init",value:function(){return ge(document.querySelectorAll(".photo-gallery")).forEach(function(t){return new e(t)})}}]),we(e,[{key:"handleIntersection",value:function(e){var t=this;e.forEach(function(e){var n=e.isIntersecting,i=e.target;n&&(i===t.thumbContainer&&t.galleryThumbs?t.galleryThumbs.update():i===t.topContainer&&t.galleryTop&&t.galleryTop.update())})}},{key:"init",value:function(){this.topContainer.querySelector(".swiper-wrapper")||this.wrapSlides(this.topContainer),this.thumbContainer&&!this.thumbContainer.querySelector(".swiper-wrapper")&&this.wrapSlides(this.thumbContainer),this.thumbContainer?this.appendButtons(this.thumbContainer):this.appendButtons(this.topContainer),this.initSliders()}},{key:"wrapSlides",value:function(e){var t=document.createElement("div");t.className="swiper-wrapper",ge(e.children).forEach(function(e){e.classList.add("swiper-slide"),t.appendChild(e)}),e.innerHTML="",e.appendChild(t)}},{key:"appendButtons",value:function(e){this.swiperPrev=document.createElement("button"),this.swiperPrev.className="photo-gallery__arrow swiper-prev",this.swiperPrev.type="button",this.swiperPrev.innerHTML='\n      <svg width="11" height="19" viewBox="0 0 7 12" xmlns="http://www.w3.org/2000/svg">\n        <path d="M5.9 10.9a.35.35 0 0 0 0-.5L1.47 6 5.9 1.6a.35.35 0 0 0 0-.5.36.36 0 0 0-.5 0L.71 5.75a.34.34 0 0 0-.1.25c0 .08.03.18.1.25l4.67 4.64c.14.15.37.15.5 0z" fill="currentColor" stroke="currentColor"/>\n      </svg>\n    ',this.swiperNext=document.createElement("button"),this.swiperNext.className="photo-gallery__arrow swiper-next",this.swiperNext.type="button",this.swiperNext.innerHTML='\n      <svg width="11" height="19" viewBox="0 0 7 12" xmlns="http://www.w3.org/2000/svg">\n        <path d="M5.9 10.9a.35.35 0 0 0 0-.5L1.47 6 5.9 1.6a.35.35 0 0 0 0-.5.36.36 0 0 0-.5 0L.71 5.75a.34.34 0 0 0-.1.25c0 .08.03.18.1.25l4.67 4.64c.14.15.37.15.5 0z" fill="currentColor" stroke="currentColor"/>\n      </svg>\n    ',e.appendChild(this.swiperPrev),e.appendChild(this.swiperNext)}},{key:"initSliders",value:function(){this.thumbContainer&&(this.galleryThumbs=new Q.a(this.thumbContainer,{spaceBetween:10,slidesPerView:3,centeredSlides:!0,loop:!0,speed:600,loopedSlides:3,longSwipes:!1,breakpoints:{768:{slidesPerView:2,centeredSlides:!1}}})),this.galleryTop=new Q.a(this.topContainer,{effect:"fade",longSwipes:!1,fadeEffect:{crossFade:!0},navigation:{nextEl:this.swiperNext,prevEl:this.swiperPrev},speed:600,loop:!0,loopedSlides:3}),this.thumbContainer&&(this.galleryTop.controller.control=this.galleryThumbs,this.galleryThumbs.controller.control=this.galleryTop)}}]),e}();function Ce(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Se(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var _e=function(){var e,t,n;function i(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.element=e,this.swiper=new Q.a(this.element,{slidesPerView:4,spaceBetween:24,loop:!0,centeredSlides:!1,navigation:{nextEl:this.element.nextElementSibling.nextElementSibling,prevEl:this.element.nextElementSibling},breakpoints:{1024:{slidesPerView:3},803:{slidesPerView:2},523:{slidesPerView:1}}})}return e=i,n=[{key:"init",value:function(){return Ce(document.querySelectorAll(".news-slider")).map(function(e){return new i(e)})}}],(t=null)&&Se(e.prototype,t),n&&Se(e,n),i}(),Ae=[he.a,ie,re.a,de,ve,ye.a,ke,_e],Ee=n(33),Le=n.n(Ee);function Te(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function xe(e,t,n){return t&&Te(e.prototype,t),n&&Te(e,n),e}var je=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t.ButtonUp||(t.ButtonUp=this,this.moveTo=new Le.a,this.button=t,this.pageWithMapSearchButton=document.querySelector("[data-filter-map-center]"),this.pageWithMapSearchButton&&this.button.classList.add("button-up-n-2_search-center"),this.bindEvents())}return xe(e,null,[{key:"init",value:function(){var t=document.querySelector(".button-up-n-2");t&&new e(t)}}]),xe(e,[{key:"backToTop",value:function(){window.pageYOffset>0&&this.moveTo.move(document.body,{duration:500})}},{key:"bindEvents",value:function(){var e=this;window.addEventListener("scroll",function(){window.pageYOffset>200?(e.button.classList.add("is-visible"),e.button.disabled=!1):(e.button.classList.remove("is-visible"),e.button.disabled=!0)}),this.button.addEventListener("click",function(){return e.backToTop()})}}]),e}();function Oe(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Me(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function qe(e,t,n){return t&&Me(e.prototype,t),n&&Me(e,n),e}var Ie=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,this.element.controller=this,this.classes=e.classes,this.buttons=Oe(t.querySelectorAll(".".concat(this.classes.button))),this.state={activeButton:this.buttons.find(function(e){return e.classList.contains(n.classes.activeButton)})},this.toggleActive=this.toggleActive.bind(this),this.handlers=[],this.bindHandlers()}return qe(e,null,[{key:"init",value:function(){return Oe(document.querySelectorAll(".button-group")).map(function(t){return new e(t)})}},{key:"classes",get:function(){return{button:"button-item",activeButton:"button-item_is_active"}}}]),qe(e,[{key:"bindHandlers",value:function(){var e=this;this.buttons.map(function(t){t.addEventListener("click",e.toggleActive)})}},{key:"registerHandler",value:function(e){"function"==typeof e&&this.handlers.push(e)}},{key:"toggleActive",value:function(e){e.preventDefault();var t=e.currentTarget;this.state.activeButton.classList.remove(this.classes.activeButton),this.state.activeButton=t,this.state.activeButton.classList.add(this.classes.activeButton),this.handlers.map(function(e){return e(t)})}}]),e}(),Pe=n(56),He=n(13),Be=n.n(He),Ne=n(23),Re=n(59);function De(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ze(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ve(e,t,n){return t&&ze(e.prototype,t),n&&ze(e,n),e}var Fe=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,this.form=t.querySelector("form"),this.button=t.querySelector("button")||t.querySelector('input[type="submit"]'),this.resultContainer=t.querySelector(".subscribe-n-2__result"),this.inputContainer=this.form.querySelector(".input-container-n-2"),this.emailField=this.inputContainer.querySelector("input"),this.inputError=this.inputContainer.querySelector(".input-container-n-2__error"),this.inputError||(this.inputError=document.createElement("div"),this.inputError.classList.add("input-container-n-2__error"),this.inputContainer.appendChild(this.inputError)),this.url=this.form.getAttribute("action"),this.onInput=this.onInput.bind(this),this.bindHandlers()}return Ve(e,null,[{key:"init",value:function(){return De(document.querySelectorAll(".subscribe-n-2")).map(function(t){return new e(t)})}}]),Ve(e,[{key:"bindHandlers",value:function(){var e=this;this.form.addEventListener("submit",function(t){t.preventDefault();var n=e.emailField.value;e.button.setAttribute("disabled",!0),e.validateEmail(n)?e.sendRequest():e.displayError("Укажите верный email")})}},{key:"sendRequest",value:function(){var e=this;return Be.a.get(this.url,{params:Object(Ne.b)(this.form,{hash:!0})}).then(function(){e.emailField.value="",e.showResult("Вы успешно подписались на новости")}).catch(function(){e.displayError("Не удалось подписаться")})}},{key:"displayError",value:function(e){this.inputError.innerText=e,this.inputContainer.classList.add("input-container-n-2_has_error"),this.emailField.addEventListener("keydown",this.onInput)}},{key:"onInput",value:function(){this.inputContainer.classList.remove("input-container-n-2_has_error"),this.button.removeAttribute("disabled"),this.emailField.removeEventListener("keydown",this.onInput)}},{key:"showResult",value:function(e){var t=this;ae.c.to(this.form,.5,{opacity:0,yPercent:10,display:"none",onComplete:function(){t.showResultText(e),t.resultContainer.style.opacity=0}}),ae.c.to(this.resultContainer,.7,{opacity:1,display:"flex",delay:.5}),ae.c.to(this.resultContainer,.7,{delay:2.5,opacity:0,display:"none"}),ae.c.to(this.form,.7,{opacity:1,yPercent:0,display:"flex",delay:3.2})}},{key:"showResultText",value:function(e){this.resultContainer.innerText=e,this.button.removeAttribute("disabled")}},{key:"validateEmail",value:function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}}]),e}();n(58);function We(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Ge(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ze(e,t,n){return t&&Ge(e.prototype,t),n&&Ge(e,n),e}var Ue=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.moveTo=new Le.a,this.links=We(document.querySelectorAll("[data-anchor]")),this.hasFixableHeader=!!document.querySelector(".js-fixable-header"),this.bindHandlers()}return Ze(e,null,[{key:"init",value:function(){return new e}}]),Ze(e,[{key:"bindHandlers",value:function(){var e=this;this.links.map(function(t){var n=+t.getAttribute("data-anchor-tolerance")||0,i=t.getAttribute("href"),r=document.querySelector(i);i&&r&&t.addEventListener("click",function(t){t.preventDefault();var i=function(){e.moveTo.move(r,{duration:750,tolerance:60*e.hasFixableHeader+n})};if(r.dynamicSection){var a=We(document.querySelectorAll(".js-dynamic-section"));if(a.indexOf(r)>-1){var o=r.offsetTop,s=a.filter(function(e){return e!==r}).filter(function(e){var t=e.dynamicSection;return!!t&&(t&&("intersection"===t.openOn||"intersection-desktop"===t.openOn&&"desktop"===t.deviceType)&&e.offsetTop<o)});s.length?Promise.all(s.map(function(e){return e.dynamicSection.openSection()})).then(function(){r.dynamicSection.openSection(),setTimeout(function(){return i()},0)}):(r.dynamicSection.openSection(),i())}}else i()})})}}]),e}(),Je=n(11);function Xe(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Ke(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ye(e,t,n){return t&&Ke(e.prototype,t),n&&Ke(e,n),e}var $e=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i=t.getAttribute("data-coords"),r=t.getAttribute("data-direction");i&&(this.controlsContainer=document.querySelector(".infrastructure-n-2__tab-container"),this.element=t,this.type=t.getAttribute("data-street-view"),this.ymaps=window.ymaps,this.coords=JSON.parse(i),this.direction=r?JSON.parse(r):[0,0],this.state="initial",this.intersectionObserver=new IntersectionObserver(function(e){return n.handleIntersection(e)}),this.intersectionObserver.observe(this.element))}return Ye(e,null,[{key:"init",value:function(){return Xe((arguments.length>0&&void 0!==arguments[0]?arguments[0]:document).querySelectorAll("[data-street-view]")).map(function(t){return new e(t)})}}]),Ye(e,[{key:"handleIntersection",value:function(e){var t=this;e.forEach(function(e){e.isIntersecting&&(t.intersectionObserver.unobserve(e.target),"initial"===t.state?t.initView():"not found"===t.state&&t.onNotFound())})}},{key:"initView",value:function(){var e=this;switch(this.element.classList.add("spinner"),this.type){case"yandex":window.ymaps?this.initYandex():window.ymapsObserver.subscribe(function(){e.initYandex()})}}},{key:"initYandex",value:function(){var e=this;window.ymaps.panorama.locate(this.coords).then(function(t){t.length?(e.state="found",e.player=new window.ymaps.panorama.Player(e.element,t[0],{controls:["fullscreenControl","panoramaName","zoomControl"],direction:e.direction,suppressMapOpenBlock:!0}),e.element.classList.add("is-spinner-hidden"),e.controlsContainer.classList.add("inited-panorama")):(e.state="not found",e.onNotFound())})}},{key:"onNotFound",value:function(){var e=this;this.element.classList.add("is-spinner-hidden"),setTimeout(function(){var t=document.createElement("div");t.textContent="Не удалось найти панораму",t.style="height: 100%; display: flex; justify-content: center; align-items: center;",e.element.appendChild(t)},200),setTimeout(function(){o.a.publish(Je.j)},1700)}}]),e}(),Qe=n(65);function et(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function tt(e,t,n){return t&&et(e.prototype,t),n&&et(e,n),e}var nt=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,this.toggleButton=t.querySelector(".main-banner-n-2__minimize"),this.footer=document.querySelector(".footer-n-2"),this.element.style.cssText="",this.element.classList.add("_minimized"),this.element.classList.add("_show"),this.MAXIMIZE_OFFSET=100,this.isMinimizedByUser=!1,this.cookie=new O.a,this.cookie.getCookie("main-banner-minimized")||this.initHandlers(!0)}return tt(e,null,[{key:"init",value:function(){var t=document.querySelector(".main-banner-n-2");return t?new e(t):null}}]),tt(e,[{key:"initHandlers",value:function(e){var t=this;document.addEventListener("scroll",function(){(document.scrollingElement||document.documentElement).scrollTop>=t.MAXIMIZE_OFFSET&&(e||t.isFooterNotVisible)&&!t.isMinimizedByUser&&t.element.classList.remove("_minimized")}),this.toggleButton&&this.toggleButton.addEventListener("click",function(e){e.preventDefault(),t.element.classList.contains("_minimized")?(t.isMinimizedByUser=!1,t.element.classList.remove("_minimized")):(t.isMinimizedByUser=!0,t.element.classList.add("_minimized"),t.setCookie())})}},{key:"setCookie",value:function(){var e={path:"/",domain:location.hostname};this.cookie.setCookie("main-banner-minimized",!0,e)}},{key:"isFooterNotVisible",get:function(){var e=window.innerHeight;return this.footer.getBoundingClientRect().top>e}}]),e}(),it=n(68);function rt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var at=function(){var e,t,n;function i(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.element=e,this.wrapper=e.querySelector(".breadcrumbs__wrapper"),this.ps=new oe.a(this.wrapper,{wheelSpeed:.7}),window.addEventListener("resize",this.ps.update)}return e=i,n=[{key:"init",value:function(){var e=document.querySelector(".breadcrumbs");return e?new i(e):null}}],(t=null)&&rt(e.prototype,t),n&&rt(e,n),i}();n(25),n(74);function ot(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function st(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function lt(e,t,n){return t&&st(e.prototype,t),n&&st(e,n),e}var ct=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,this.tabsContainer=t.querySelector(".tabs-links"),this.tabsWrapper=t.querySelector(".tabs-links__wrapper"),this.ymapsScreen=t.querySelector(".ymap-screen"),this.ymapsScreenController=this.ymapsScreen.$controller,this.loadButton=t.querySelector(".dev-complexes-list__load-more .button-n-2"),this.listRow=t.querySelector(".dev-complexes-list .row"),this.icons={recomended:'<svg xmlns="http://www.w3.org/2000/svg" width="12" height="13" viewBox="0 0 12 13"><path fill="" d="M.01 3.41c0-.72.26-1.3.78-1.74A3 3 0 0 1 2.82 1c.85 0 1.53.22 2.04.66.52.44.78 1.04.78 1.79v.58c0 .72-.26 1.3-.78 1.73-.51.44-1.19.66-2.02.66-.85 0-1.53-.22-2.05-.66a2.22 2.22 0 0 1-.78-1.78zm1.71.63c0 .32.1.58.3.77.21.2.48.3.82.3.33 0 .6-.1.79-.3.2-.2.3-.47.3-.8v-.6c0-.32-.1-.58-.3-.78-.2-.2-.47-.3-.81-.3-.33 0-.6.1-.8.3-.2.2-.3.47-.3.82zm4.63 6.93c0-.72.26-2.3.79-2.74.52-.44 1.2-.66 2.02-.66.85 0 1.53.21 2.05.65.52.43.78 1.03.78 1.8v.57c0 .72-.26 1.3-.77 1.74a3 3 0 0 1-2.04.66c-.85 0-1.54-.22-2.05-.67-.52-.44-.78-.03-.78-.76zm1.71-.37c0 .3.1.55.32.76.22.21.48.31.8.31.73 0 1.09-.36 1.09-1.08v-.61c0-.33-.1-.59-.3-.78-.2-.2-.47-.3-.8-.3-.34 0-.6.1-.8.3-.2.2-.3.46-.3.8zm2.68-8.76l-1.25-.6-8.33 11.1 1.25.62z"/></svg>',mortgage:'<svg width="16" height="18" viewBox="0 0 16 18" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14 9.1L8 3.1L2 9.1V15C2 15.6 2.4 16 3 16H8.1C8.5 17.1 10.1 17.9 12 17.9C14.2 17.9 16 16.8 16 15.4C16 15 15.9 14.7 15.7 14.4C15.9 14.1 16 13.8 16 13.4C16 13 15.9 12.7 15.7 12.4C15.9 12.1 16 11.8 16 11.4C16 10.5 15.2 9.7 13.9 9.2V9.1H14ZM12.1 16.9C10.8 16.9 9.8 16.5 9.4 15.9C9.3 15.8 9.2 15.6 9.2 15.4C9.2 15.3 9.2 15.2 9.3 15.1C10 15.6 11.1 15.9 12.2 15.9C12.8 15.9 13.3 15.8 13.8 15.7C14.3 15.6 14.8 15.3 15.1 15.1C15.2 15.2 15.2 15.3 15.2 15.4C15 16.1 13.8 16.9 12.1 16.9ZM15 13.7C14.9 13.9 14.6 14.2 14.2 14.4L14 14.5C13.5 14.7 12.8 14.9 12.1 14.9C11.2 14.9 10.5 14.7 10 14.4C9.6 14.2 9.4 14 9.2 13.7C9.2 13.6 9.1 13.5 9.1 13.4C9.1 13.3 9.1 13.2 9.2 13.1C10.1 13.6 11.1 13.9 12.1 13.9C13.1 13.9 14.1 13.6 15 13.1C15 13.2 15.1 13.3 15.1 13.4C15.1 13.5 15 13.6 15 13.7ZM15 11.8C14.9 12 14.6 12.3 14.2 12.5H14C13.5 12.7 12.8 12.9 12.1 12.9C11.2 12.9 10.5 12.7 10 12.4C9.6 12.2 9.4 12 9.2 11.7C9.2 11.6 9.1 11.5 9.1 11.4C9.1 10.7 10.4 9.9 12.1 9.9C12.8 9.9 13.5 10.1 14 10.3C14.6 10.6 15.1 11 15.1 11.4C15 11.6 15 11.7 15 11.8ZM15.7 7.3L8.7 0.3C8.3 -0.1 7.7 -0.1 7.3 0.3L0.3 7.3C0.1 7.5 0 7.8 0 8L1.1 9L8 2L15 9L16 8C16 7.8 15.9 7.5 15.7 7.3Z" fill="white"></path></svg>',installment:'<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9.99518 1.66672C5.39102 1.66672 1.66602 5.39588 1.66602 10.0001C1.66602 14.6042 5.39102 18.3334 9.99518 18.3334C14.5993 18.3334 18.3327 14.6042 18.3327 10.0001C18.3327 5.39588 14.5993 1.66672 9.99518 1.66672ZM9.99935 16.6667C6.31602 16.6667 3.33268 13.6834 3.33268 10.0001C3.33268 6.31672 6.31602 3.33338 9.99935 3.33338C13.6827 3.33338 16.666 6.31672 16.666 10.0001C16.666 13.6834 13.6827 16.6667 9.99935 16.6667Z" fill="white"></path><path d="M10.416 5.83328H9.16602V10.8333L13.5368 13.4583L14.166 12.4333L10.416 10.2083V5.83328Z" fill="white"></path></svg>',favorite:'<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 21 19" fill="none"><path d="M9.64174 3.63033C9.8224 3.93176 10.148 4.11624 10.4994 4.11625C10.8509 4.11626 11.1765 3.93181 11.3572 3.63039C12.6037 1.55098 14.2477 0.889229 15.6855 1.01486C17.1737 1.14489 18.6267 2.1317 19.4119 3.71787C20.184 5.27743 20.323 7.46301 19.0482 9.96824C17.8062 12.409 15.2046 15.174 10.4995 17.8537C5.79482 15.1741 3.19353 12.409 1.95168 9.96828C0.67701 7.46304 0.816073 5.27744 1.58806 3.71785C2.37321 2.13166 3.82614 1.14488 5.31414 1.01485C6.7517 0.889237 8.39547 1.55093 9.64174 3.63033Z" stroke="#BFC9D5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg>',compare:'<svg width="17" height="17" viewBox="0 0 17 17" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M5.17358 0C4.06909 0 3.17358 0.895416 3.17358 2V3.78262H2C0.895508 3.78262 0 4.67807 0 5.78262V15C0 16.1046 0.895508 17 2 17H11.2173C12.322 17 13.2173 16.1046 13.2173 15V13.8261H14.9998C16.1042 13.8261 16.9998 12.9307 16.9998 11.8261V2C16.9998 0.895416 16.1042 0 14.9998 0H5.17358ZM13.2173 11.8261H14.9998V2H5.17358V3.78262H11.2173C12.322 3.78262 13.2173 4.67804 13.2173 5.78262V11.8261ZM2 5.78262H11.2173V15H2V5.78262Z" fill="#071321"></path></svg>',phone:'<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.6413 12.6552L13.1704 10.1784C12.6782 9.6871 11.8632 9.70203 11.3538 10.2127L10.109 11.4601C10.0303 11.4167 9.94891 11.3713 9.86332 11.3231C9.07719 10.8866 8.00124 10.2882 6.86903 9.15259C5.73347 8.01459 5.1359 6.93454 4.69898 6.14613C4.65288 6.0626 4.6087 5.98207 4.56508 5.90559L5.40057 5.06945L5.81134 4.65725C6.32143 4.14586 6.33549 3.32921 5.84448 2.83648L3.37353 0.359373C2.88251 -0.132666 2.0671 -0.117739 1.55701 0.39365L0.860608 1.09563L0.879638 1.11457C0.646127 1.4132 0.450997 1.75763 0.305788 2.12905C0.171932 2.4826 0.0885942 2.81998 0.0504876 3.15805C-0.275785 5.86906 0.960265 8.34671 4.31474 11.7088C8.95165 16.3559 12.6884 16.0049 12.8496 15.9877C13.2007 15.9457 13.5372 15.8616 13.8791 15.7285C14.2465 15.5847 14.5899 15.3894 14.8877 15.1558L14.9029 15.1694L15.6084 14.477C16.1174 13.9657 16.1321 13.1487 15.6413 12.6552Z" fill="#071321"></path></svg>'},this.switches=ot(t.querySelectorAll(".tabs-links__link")),this.line=new se.a({buttons:this.switches,line:t.querySelector(".tabs-links__line"),bindClick:!0});var n=this.switches.find(function(e){return e.classList.contains("button-item_is_active")});this.state={category:n?n.getAttribute("data-category"):"all"},this.bindHandlers()}return lt(e,null,[{key:"init",value:function(){var t=document.querySelector(".developer-complexes");return t?new e(t):null}}]),lt(e,[{key:"bindHandlers",value:function(){var e=this;this.switches.map(function(t){t.addEventListener("click",function(){var n=t.getAttribute("data-category");e.state.category=n,e.refreshList()})}),this.loadButton.addEventListener("click",function(t){t.preventDefault(),e.loadItems()})}},{key:"loadItems",value:function(){var e=this;return fetch(this.loadButton.href).then(function(e){return e.json()}).then(function(t){t&&t.items&&t.items.map(function(t){var n=e.createItem(t);e.listRow.appendChild(n);var i=n.querySelector("[data-favorite]"),r=n.querySelector("[data-compare-n-2]"),a=n.querySelector(".phone-number-n-2"),o=n.querySelector(".complex-item-slider");return Y.a.init(),[new E.a(i),new L.a(r),a?new T.a(a):null,o?new ye.a(o):null]}),e.loadButton.href=t.url||"",e.refreshList()})}},{key:"refreshList",value:function(){var e=ot(document.querySelectorAll(".complex-item-n-2")),t=[],n=this.state.category,i=0;e.map(function(e){var r=e.getAttribute("data-state");if("all"===n||n===r){var a;try{a=JSON.parse(e.getAttribute("data-coords"))}catch(e){}a&&t.push({location:a,id:e.getAttribute("data-id")}),e.parentNode.style.display="",e.parentNode.style.order=i,2===++i&&i++}else e.parentNode.style.display="none",e.parentNode.style.order=""}),this.ymapsScreen.parentNode.style.order=2,this.refreshMap(t)}},{key:"refreshMap",value:function(e){e.length&&(this.ymapsScreenController.setCoords(e),this.ymapsScreenController.getScreen(),this.ymapsScreenController.addMultipleMarks())}},{key:"createItem",value:function(e){var t=this,n=document.createElement("div");n.className="col col_xs-4 col_sm-6 col_lg-3";var i=document.createElement("div");i.className="complex-item-n-2",i.setAttribute("data-id",e.id),e.location&&e.location[0]&&i.setAttribute("data-coords","[[[".concat(e.location[0][0].join(","),"]]]")),i.setAttribute("data-state","Дом сдан"===e.dedline?"ready":"building");var r=document.createElement("a");if(r.className="complex-item-n-2__image",r.setAttribute("target","_blank"),r.setAttribute("href",e.link),r.style.backgroundImage="url('".concat(e.image,"')"),e.recommended||e.mortgage||e.installment||e.action){var a=document.createElement("div");a.className="complex-item-n-2__info-labels";var o=[];e.recommended&&o.push("recommended"),e.mortgage&&o.push("mortgage"),e.action&&o.push("action"),e.installment&&o.push("installment"),[].concat(o).forEach(function(n){var i=document.createElement("div");i.className="info-label-n-2 info-label-n-2_".concat(n,"  "),i.setAttribute("data-tip",e[n]),i.setAttribute("data-style",n),i.innerHTML=t.icons[n],a.appendChild(i)}),r.appendChild(a)}i.appendChild(r);var s=document.createElement("div");s.className="complex-item-n-2__controls",s.innerHTML='\n      <div class="complex-item-n-2__control">\n        <div class="manage-complex-btn-n-2"\n          data-tip="Добавить в избранное"\n          data-id="'.concat(e.id,'"\n          data-type="').concat(e.type,'"\n          data-favorite="">\n          ').concat(this.icons.favorite,'\n        </div>\n      </div>\n      <div class="complex-item-n-2__control">\n        <div class="manage-complex-btn-n-2"\n          data-tip="Добавить в сравнение"\n          data-id="').concat(e.id,'"\n          data-type="').concat(e.type,'"\n          data-compare-n-2="">\n          ').concat(this.icons.compare,"\n        </div>\n      </div>\n    "),i.appendChild(s);var l=document.createElement("div"),c="";return l.className="complex-item-n-2__body",c+='\n      <a class="complex-item-n-2__name" href="'.concat(e.link,'" target="_blank">').concat(e.name,'</a>\n      <div class="complex-item-n-2__price-block').concat("cottages"===e.type?" complex-item-n-2__price-block__cottages":"",'">\n        <div class="complex-item-n-2__total-price">').concat(e.price,'</div>\n        <div class="complex-item-n-2__price-per-square">').concat(e.priceM?e.priceM:"",'</div>\n      </div>\n      <div class="complex-item-n-2__data">\n        <div class="complex-item-n-2__location">').concat(e.locationCity?e.locationCity:"","</div>\n        ").concat(e.metroString?e.metroString:"",'\n        <div class="complex-item-n-2__time">Срок ввода:<span>  ').concat(e.dedline,"</span></div>\n      </div>"),e.telNumber&&(c+='<div class="complex-item-n-2__phone">\n        <a class="phone-number-n-2 phone-number-n-2_theme_yellow" href="tel: '.concat(e.telNumber,'" data-tel="').concat(e.telNumber,'" \n          onclick="ym(39897405, \'reachGoal\', Click_phone\');">\n          <div class="phone-number-n-2__icon">\n            ').concat(this.icons.phone,'\n          </div>\n          <div class="phone-number-n-2__number">\n            +7 <span>Показать телефон</span>\n          </div>\n        </a>\n      </div>\n    ')),l.innerHTML=c,i.appendChild(l),n.appendChild(i),n}}]),e}(),ut=n(101);function dt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ht=[ct,function(){var e,t,n;function i(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.element=e,this.ratingAnimation=new ut.a({wrapper:".rating-badge__background",data:"ranking",colorRange:["#fa0000","#ff7200","#ffa800","#ffc63e"],maxValue:5,circle:{background:"#e8e8e8",thickness:6,backwards:!0,ease:"Bounce.easeOut",speed:2}}),this.ratingAnimation.init()}return e=i,n=[{key:"init",value:function(){var e=document.querySelector(".developer-rating .ratings-list");return e?new i(e):null}}],(t=null)&&dt(e.prototype,t),n&&dt(e,n),i}()];n(258);function ft(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function mt(e,t,n){return t&&ft(e.prototype,t),n&&ft(e,n),e}var pt=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,this.wrapper=document.querySelector(".js-fixable-header-wrapper"),this.pageWrapper=document.querySelector(".container.page-wrapper"),this.mobileState=this.element.hasAttribute("data-fixable-mobile"),this.customBodyClass=this.element.getAttribute("data-custom-class"),this.state={fixed:!1,inited:!1},this.onScroll=this.onScroll.bind(this),this.onResize=this.onResize.bind(this),window.addEventListener("resize",this.onResize),this.onResize(),(document.documentElement.clientWidth>=768||this.mobileState)&&this.onScroll()}return mt(e,null,[{key:"init",value:function(){var t=document.querySelector(".js-fixable-header");return t?new e(t):null}}]),mt(e,[{key:"init",value:function(){document.addEventListener("scroll",this.onScroll),this.state.inited=!0}},{key:"disable",value:function(){document.removeEventListener("scroll",this.onScroll),document.body.classList.remove(this.customBodyClass||"with-sticky-header"),this.wrapper.classList.remove("is-fixed"),this.element.classList.remove("js-fixable-header_fixed"),this.state.inited=!1}},{key:"onScroll",value:function(){this.wrapper.getBoundingClientRect().top<0?this.state.fixed||(this.setWidth(),document.body.classList.add(this.customBodyClass||"with-sticky-header"),this.wrapper.classList.add("is-fixed"),this.element.classList.add("js-fixable-header_fixed"),this.state.fixed=!0):this.state.fixed&&(document.body.classList.remove(this.customBodyClass||"with-sticky-header"),this.wrapper.classList.remove("is-fixed"),this.element.classList.remove("js-fixable-header_fixed"),this.resetWidth(),this.state.fixed=!1)}},{key:"onResize",value:function(){this.state.inited&&this.state.fixed&&this.setWidth(),document.documentElement.clientWidth<768&&!this.mobileState?this.state.inited&&this.disable():this.state.inited||this.init()}},{key:"setWidth",value:function(){this.element.style.width="".concat(this.pageWrapper.clientWidth,"px")}},{key:"resetWidth",value:function(){this.element.style.width=""}}]),e}();function vt(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function yt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function gt(e,t,n){return t&&yt(e.prototype,t),n&&yt(e,n),e}var bt=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,this.background=t.querySelector(".parallax-banner__background"),this.background&&this.init()}return gt(e,null,[{key:"init",value:function(){return vt(document.querySelectorAll(".parallax-banner")).map(function(t){return new e(t)})}}]),gt(e,[{key:"init",value:function(){var e=this;window.lazyloadInstance&&window.lazyloadInstance.update(),this.background.style.position="absolute",this.background.style.top="0",this.background.style.left="0",this.background.style.width="100%",this.background.style.height="auto";var t=document.scrollingElement||document.documentElement;document.addEventListener("scroll",function(){if(e.isVisible(e.element)){var n=window.pageYOffset||document.documentElement.scrollTop,i=e.element.getBoundingClientRect().top-t.scrollTop+n,r=e.background.clientHeight-e.element.clientHeight,a=i*(e.element.getAttribute("data-speed")||.5);e.background.style.top="".concat(-(a>r?r:a),"px")}})}},{key:"isVisible",value:function(e){var t=e.getBoundingClientRect(),n=window.innerHeight,i=t.top+e.clientHeight;return t.top<n&&i>0}}]),e}(),wt=n(180),kt=n(181);function Ct(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function St(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _t(e,t,n){return t&&St(e.prototype,t),n&&St(e,n),e}var At=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,this.elementHeader=t.querySelector(".infrastructure-n-2-select__header"),this.isOpened=!1,this.bindEvents()}return _t(e,null,[{key:"init",value:function(){Ct((arguments.length>0&&void 0!==arguments[0]?arguments[0]:document).querySelectorAll(".infrastructure-n-2-select")).forEach(function(t){new e(t)})}}]),_t(e,[{key:"bindEvents",value:function(){var e=this;this.elementHeader&&this.elementHeader.addEventListener("click",function(){return e.handleHeaderClick()})}},{key:"handleHeaderClick",value:function(){this.element.classList.toggle("is-open"),this.isOpened=!this.isOpened,this.element.dispatchEvent(new CustomEvent(this.isOpened?"opened":"closed"))}}]),e}(),Et=n(139),Lt=n(66),Tt=n(55);function xt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function jt(e,t,n){return t&&xt(e.prototype,t),n&&xt(e,n),e}var Ot=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t;var n=t.getAttribute("data-center");this.mapCenter=n?JSON.parse(n):[2,1],this.imageLink="localhost"===window.location.hostname?"/static/img/minified-svg/":"/build-redesign/static/img/minified-svg/",this.init()}return jt(e,null,[{key:"init",value:function(){var t=document.querySelector(".contact-page__map");if(t)return new e(t)}}]),jt(e,[{key:"init",value:function(){var e=this;window.ymaps?this.bindMapEvents():window.ymapsObserver.subscribe(function(){e.bindMapEvents()})}},{key:"initMap",value:function(){var e=this,t=Object(Tt.a)(this.ymaps,{top:"14px",left:"17px"}),n=Object(Lt.a)({ymaps:this.ymaps,position:{top:"106px",left:"17px"}});this.mapHintLayout=this.ymaps.templateLayoutFactory.createClass('\n      <div class="contact-hint">\n        <div class="contact-hint__name">{{ properties.name }}</div>\n        <div class="contact-hint__time">{{ properties.time }}</div>\n      </div>\n    '),this.map=new this.ymaps.Map(this.element,{center:this.mapCenter,zoom:16,controls:[]},{maxZoom:18,minZoom:8,suppressMapOpenBlock:!0}),this.map.controls.add(t),this.map.controls.add(n),this.mapPlacemark=new this.ymaps.Placemark(this.mapCenter,{name:"Новостроев",time:"До 19:00"},{hintOpenHintOnHover:!1,hintOffset:[55,-30],hintCloseTimeout:133713371337,hintLayout:this.mapHintLayout,iconLayout:"default#image",iconImageHref:"".concat(this.imageLink,"maps-baloon-logo.svg"),iconImageSize:[60,65],iconImageOffset:[-5,-38]}),this.mapPlacemark.events.add("mouseleave",function(){e.mapPlacemark.hint.open()}),this.map.events.add("hintclose",function(){e.mapPlacemark.hint.open()}),n.events.add("fullscreenenter",function(){e.mapPlacemark.hint.open()}),n.events.add("fullscreenexit",function(){e.mapPlacemark.hint.open()}),this.map.geoObjects.add(this.mapPlacemark),this.mapPlacemark.hint.open(),this.map.events.add("actiontick",function(){e.mapPlacemark.hint.open()})}},{key:"bindMapEvents",value:function(){var e=this;this.ymaps=window.ymaps,this.ymaps.ready(function(){e.element.innerHTML="",e.initMap()})}}]),e}();function Mt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function qt(e,t,n){return t&&Mt(e.prototype,t),n&&Mt(e,n),e}var It=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,this.intersectionObserver=new IntersectionObserver(function(e){return n.handleIntersection(e)}),this.intersectionObserver.observe(this.element)}return qt(e,null,[{key:"init",value:function(){var t=document.querySelector(".useful-videos__slider");if(t)return new e(t)}}]),qt(e,[{key:"init",value:function(){this.swiper=new Q.a(this.element,{slidesPerView:"auto",navigation:{nextEl:this.element.nextElementSibling.nextElementSibling,prevEl:this.element.nextElementSibling},lazy:{loadPrevNext:!0}})}},{key:"handleIntersection",value:function(e){e[0].isIntersecting&&(this.init(),this.intersectionObserver.disconnect())}}]),e}(),Pt=(n(90),n(86)),Ht=n(69);function Bt(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Nt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Rt(e,t,n){return t&&Nt(e.prototype,t),n&&Nt(e,n),e}var Dt=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.form=t,this.modalNode=document.querySelector("#modal-callback-right"),this.statusModalNode=document.querySelector("#modal-callback-status-right"),this.modal=new Pt.a.Modal(this.modalNode),this.statusModal=new Pt.a.Modal(this.statusModalNode),this.statusModalText=this.statusModalNode.querySelector(".js-modal-form-status"),this.formAdvInput=document.querySelector(".js-modal-callback-trigger-adv")||document.querySelector('input[name="adv"]'),this.formHeader=document.querySelector(".modal-callback__title"),this.daySelect=this.form.querySelector("#modal-date"),this.timeSelect=this.form.querySelector("#modal-time"),this.phone=this.form.querySelector('[name="phone"]'),this.submitButton=this.form.querySelector('[type="submit"]'),this.daySelect&&this.timeSelect&&(this.errorsContainer=document.createElement("div"),this.errorsContainer.className="modal-callback__errors",this.bindEvents())}return Rt(e,null,[{key:"init",value:function(){var t=document.querySelector(".js-modal-callback");if(t)return new e(t)}}]),Rt(e,[{key:"bindEvents",value:function(){var e=this;"undefined"!=typeof callback_days&&callback_days.length&&this.daySelect.addEventListener("change",function(){return e.initCallback()}),this.form.addEventListener("submit",function(t){t.preventDefault();var n=e.form.getAttribute("action"),i=Object(Ne.b)(e.form,{hash:!0}),r=function(){e.modal.hide(),e.statusModal.show()},a=Object(Re.b)(i);return Be.a.post(n,a).then(function(t){var n=t.data;if(n&&!1===n.success)(a=n.errors)&&Array.isArray(a)&&(e.errorsContainer.parentNode&&e.errorsContainer.parentNode.removeChild(e.errorsContainer),e.errorsContainer.innerHTML="",a.forEach(function(t){var n=document.createElement("div");n.className="modal-callback_error",n.innerText=t,e.errorsContainer.appendChild(n)}),e.submitButton.parentNode.insertBefore(e.errorsContainer,e.submitButton));else{var a;e.errorsContainer.parentNode&&e.errorsContainer.parentNode.removeChild(e.errorsContainer);var o=Math.floor(Date.now()/1e3),s=+e.timeSelect.value,l=e.daySelect.querySelector('option[value="'.concat(i.date,'"]')),c=e.timeSelect.querySelector('option[value="'.concat(i.time,'"]'));e.statusModalText.innerHTML=o>s?'\n              <div class="h3">\n                Спасибо за вашу заявку!\n              </div>\n              <div>\n                Менеджер свяжется с вами в течение 30 секунд, по номеру \n                <nobr>'.concat(e.phone.mask.value,"</nobr>\n              </div>"):'\n            <div class="h3">Спасибо за вашу заявку!</div>\n            <div>Менеджер свяжется с вами '.concat(l.innerText.toLowerCase(),"<br/> в ").concat(c.innerText.toLowerCase()," по номеру <nobr>").concat(e.phone.mask.value,"</nobr></div>"),r()}}).catch(function(){e.statusModalText.innerText="Ошибка при отправке, свяжитесь с нами по телефону +7 (495) 662-97-55",r()}).finally(function(){e.form.reset(),Bt(e.form.elements).forEach(function(e){e.mask&&(e.mask.updateValue(""),e.mask.updateControl())})})}),this.modalNode.addEventListener("show.bs.modal-n-2",function(){e.formAdvInput.value=e.modalNode.modalTrigger.getAttribute("data-form-adv"),e.formHeader.innerText=e.modalNode.modalTrigger.getAttribute("data-form-title");var t=e.modalNode.modalTrigger.getAttribute("data-form-state");if(t)try{var n=JSON.parse(t);n&&Object(Ht.a)(e.form,n)}catch(e){}e.initCallback()})}},{key:"initCallback",value:function(){var e=callback_days[this.daySelect.value];if(e){var t=[];e.hours.forEach(function(e,n){t.push({value:e.timestamp.toString(),text:e.title,selected:0===n})}),this.timeSelect.Select&&this.timeSelect.Select.setData(t)}}}]),e}();function zt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Vt(e,t,n){return t&&zt(e.prototype,t),n&&zt(e,n),e}var Ft=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t}return Vt(e,null,[{key:"init",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:document).querySelector(".js-article-modal-slider");if(t)return new e(t)}}]),Vt(e,[{key:"init",value:function(){this.swiper=new Q.a(this.element,{loop:!0,sliderPerView:1,navigation:{nextEl:this.element.nextElementSibling.nextElementSibling,prevEl:this.element.nextElementSibling}}),this.element.swiper=this.swiper}}]),e}();function Wt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Gt(e,t,n){return t&&Wt(e.prototype,t),n&&Wt(e,n),e}var Zt=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,this.element.Modal&&(this.state={show:!1},this.modalShowDelay=+this.element.getAttribute("data-modal-time"),this.modalShowOnArticleEnd=this.element.hasAttribute("data-show-on-end"),this.modalSlider=Ft.init(this.element),this.onScroll=this.onScroll.bind(this),this.init())}return Gt(e,null,[{key:"init",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:document).querySelector(".js-controllable-modal");if(t)return new e(t)}}]),Gt(e,[{key:"init",value:function(){var e=this;this.modalShowOnArticleEnd&&(this.article=document.querySelector(".article"),this.article&&this.bindScrollEvent()),this.modalShowDelay>0&&setTimeout(function(){e.openModal()},1e3*this.modalShowDelay)}},{key:"bindScrollEvent",value:function(){document.addEventListener("scroll",this.onScroll)}},{key:"unbindScrollEvent",value:function(){document.removeEventListener("scroll",this.onScroll)}},{key:"onScroll",value:function(){this.article.getBoundingClientRect().bottom-document.documentElement.clientHeight<-document.documentElement.clientHeight/10&&this.openModal()}},{key:"openModal",value:function(){this.state.show?this.unbindScrollEvent():(this.state.show=!0,this.element.Modal.show(),this.modalSlider&&this.modalSlider.init())}}]),e}(),Ut=n(44);function Jt(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Xt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Kt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"init",value:function(){var e=Jt((arguments.length>0&&void 0!==arguments[0]?arguments[0]:document).querySelectorAll(".js-yandex-share"));if(e.length&&Object(Ut.a)({elements:e,scriptSrc:"//yastatic.net/share2/share.js"}),window.MutationObserver){var t=new MutationObserver(function(e,t){e.forEach(function(e){var t=e.target.querySelector(".ya-share2__item_service_telegram a");t&&(t.href=t.href.replace("telegram.me","ttttt.me"))})});e.forEach(function(e){return t.observe(e,{childList:!0})})}}}],(n=null)&&Xt(t.prototype,n),i&&Xt(t,i),e}(),Yt=n(112),$t=n.n(Yt);function Qt(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function en(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function tn(e,t,n){return t&&en(e.prototype,t),n&&en(e,n),e}var nn=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i=t.getAttribute("data-coords"),r=i?JSON.parse(i):null;Array.isArray(r)&&(this.element=t,this.coords=r,this.coordsRev=this.coords.slice().reverse(),this.modalOverlayButton=t.querySelector(".ymap-screen__overlay-link"),this.modalButton=t.querySelector(".ymap-screen__control a"),this.width=438,this.height=450,this.multiple=t.hasAttribute("data-multiple"),this.element.$controller=this,this.searchAjaxUrlItem=this.element.getAttribute("data-request-url"),this.getScreen(),Object(Ut.a)({elements:[this.element],observerMargin:100,onLoad:function(){return n.bindMapEvents()},scriptSrc:"https://api-maps.yandex.ru/2.1/?lang=ru_RU&onload=ymapsBroadcast&apikey=81fd4d74-8f99-4223-b3a9-ced2137399e7",scriptUniqueSelector:"api-maps.yandex"}))}return tn(e,null,[{key:"init",value:function(){return Qt(document.querySelectorAll(".ymap-screen")).map(function(t){return new e(t)})}}]),tn(e,[{key:"bindMapEvents",value:function(){var e=this;window.ymaps?(this.ymaps=window.ymaps,this.initHandlers()):window.ymapsObserver.subscribe(function(){e.ymaps=window.ymaps,e.initHandlers()})}},{key:"getScreen",value:function(){var e=this,t="https://static-maps.yandex.ru/1.x/?size=".concat(this.width,",").concat(this.height,"&l=map");this.multiple?(t+="&pt=",t+=this.coords.map(function(e){return"".concat(e.location[0][0].reverse().join(","),",home")}).join("~")):t+="&ll=".concat(this.coordsRev.join(","),"&z=16");var n=document.createElement("img");n.src=t,n.addEventListener("load",function(){var n=document.createElement("div");n.classList.add("ymap-screen__image"),n.style.backgroundImage='url("'.concat(t,'")'),e.element.appendChild(n),e.element.classList.add("ymap-screen_loaded")})}},{key:"setCoords",value:function(e){this.coords=e}},{key:"initHandlers",value:function(){var e=this;this.modalButton&&this.ymaps.ready(function(){e.initModalMap(),e.modalButton.style.display="",e.modalButton.addEventListener("click",function(t){t.preventDefault(),e.modal.open()}),e.modalOverlayButton.addEventListener("click",function(t){t.preventDefault(),e.modal.open()}),Qt(document.querySelectorAll("[data-screen-map-modal]")).map(function(t){t.addEventListener("click",function(t){t.preventDefault(),e.modal.open()})}),e.createBallonContent()})}},{key:"initModalMap",value:function(){var e=this;this.modal=new $t.a.modal({footer:!1,closeMethods:["overlay","button","escape"],cssClass:["ymaps-modal"],onOpen:function(){e.map&&(e.multiple?e.map.setBounds(e.map.geoObjects.getBounds(),{checkZoomRange:!0}):e.map.setCenter(e.coords),e.map.container.fitToViewport())}}),this.map=new this.ymaps.Map(this.modal.modalBoxContent,{center:this.multiple?[55.741075,37.624988]:this.coords,zoom:16,controls:["zoomControl"]},{searchControlProvider:"yandex#search",maxZoom:16}),this.multiple?this.addMultipleMarks():this.map.geoObjects.add(this.createPlaceMark(this.coords))}},{key:"addMultipleMarks",value:function(){var e=this;this.map.geoObjects.removeAll(),this.coords.map(function(t){e.map.geoObjects.add(e.createPlaceMark(t.location[0][0].reverse(),t.id))}),this.map.setBounds(this.map.geoObjects.getBounds(),{checkZoomRange:!0})}},{key:"createPlaceMark",value:function(e,t){var n=this,i="localhost"===location.hostname?"":"/build-redesign/",r=new this.ymaps.Placemark(e,{objId:t||"123",ballonGetted:!1},{iconLayout:"default#image",iconImageHref:"".concat(i,"static/img/minified-svg/ico-complex-on-map.svg"),iconImageSize:[50,50],iconImageOffset:[-15,-45],zIndex:9e3,id:"zoomMark"});return t&&r.events.add("click",function(e){n.getLotInfo(e.originalEvent.target)}),r}},{key:"getLotInfo",value:function(e){if(!e.properties.get("ballonGetted"))e.properties.get("objId")}},{key:"createBallonContent",value:function(){}}]),e}();function rn(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function an(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var on=function(){var e,t,n;function i(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var t={};e.hasAttribute("data-scroll-disable-y")&&(t.suppressScrollY=!0),e.hasAttribute("data-scroll-disable-x")&&(t.suppressScrollX=!0),e.ps=new oe.a(e,t)}return e=i,n=[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=function(){rn(e.querySelectorAll(".js-custom-scrollbar")).forEach(function(e){return new i(e)})};"complete"===document.readyState?t():window.addEventListener("load",function(){return t()})}}],(t=null)&&an(e.prototype,t),n&&an(e,n),i}(),sn=n(182),ln=n.n(sn);function cn(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function un(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var dn=function(){var e,t,n;function i(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var t=e.children[0];e.Scrollbooster=new ln.a({viewport:e,content:t,mode:"x",bounce:!1,onUpdate:function(e){t.style.transform="translateX(".concat(-e.position.x,"px)")}})}return e=i,n=[{key:"init",value:function(){cn((arguments.length>0&&void 0!==arguments[0]?arguments[0]:document).querySelectorAll(".js-swipable-section")).forEach(function(e){return new i(e)})}}],(t=null)&&un(e.prototype,t),n&&un(e,n),i}(),hn=(n(91),n(48)),fn=n.n(hn);function mn(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function pn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function vn(e,t,n){return t&&pn(e.prototype,t),n&&pn(e,n),e}var yn=function(){function e(t){var n=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,this.frame=t.querySelector("iframe"),this.frame&&(this.src=this.frame.getAttribute("data-src"),this.src)){if(this.isInit=!1,window.location.search){var i=fn.a.parse(window.location.search);i.autoPlay&&this.frame.id===i.autoPlay&&this.playVideo(),i.scrollTo&&this.frame.id===i.scrollTo&&window.addEventListener("load",function(e){(new Le.a).move(n.element,{tolerance:30})})}this.isInit||this.initHandlers()}}return vn(e,null,[{key:"init",value:function(){return mn((arguments.length>0&&void 0!==arguments[0]?arguments[0]:document).querySelectorAll(".js-video-wrapper")).map(function(t){return new e(t)})}}]),vn(e,[{key:"initHandlers",value:function(){var e=this;this.element.addEventListener("click",function(t){t.preventDefault(),e.playVideo()})}},{key:"playVideo",value:function(){this.element.classList.add("is-active"),this.frame.setAttribute("src",this.src),this.isInit=!0}}]),e}(),gn=n(183),bn=n(184),wn=n(202),kn=n(188),Cn=n(189),Sn=n(201),_n=n(190),An=n(191),En=n(192),Ln=n(114),Tn=n(195),xn=n(34);function jn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var On=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i=matchMedia("(max-width: 1024px)");i.addListener(function(e){return n.handleMediaChange(e)}),this.handleMediaChange(i),this.element=t,this.element.dynamicSection=this,this.sectionTrigger=this.element.classList.contains("js-dynamic-section-trigger")?this.element:this.element.querySelector(".js-dynamic-section-trigger"),this.isSectionLoaded=this.element.hasAttribute("data-loaded"),this.isSectionOpened=this.element.classList.contains("is-active"),this.openOn=this.element.getAttribute("data-open")||"click",this.url=this.element.getAttribute("data-url"),this.features=this.element.getAttribute("data-features"),this.element.classList.contains("js-dynamic-section-target")?this.renderTarget=this.element:this.renderTarget=this.element.hasAttribute("data-section-target")?document.querySelector(this.element.getAttribute("data-section-target")):this.element.querySelector(".js-dynamic-section-target"),this.bindEvents()}var t,n,i;return t=e,(n=[{key:"bindEvents",value:function(){var e=this,t=function(){e.sectionTrigger&&e.sectionTrigger.addEventListener("click",function(){return e.toggleSection()})},n=function(){new IntersectionObserver(function(t,n){t.some(function(e){return e.isIntersecting})&&(e.openSection(),n.disconnect())}).observe(e.element)};switch(this.openOn){case"intersection-desktop":"desktop"===this.deviceType?n():(this.isSectionOpened&&n(),t());break;case"intersection":n();break;case"click":t()}}},{key:"request",value:function(){var e=this;return Be.a.get(this.url).then(function(t){var n=t.data;n&&e.onRequest(n)})}},{key:"onRequest",value:function(e){var t=e.html;this.renderTarget.innerHTML=t,this.element.setAttribute("data-loaded",""),this.isSectionLoaded=!0,this.initSection(),this.openSection()}},{key:"initSection",value:function(){var e=this;this.features&&this.features.split(" ").forEach(function(t){switch(t){case"accordion":Pe.a.init(e.renderTarget);break;case"apartment-layouts":kn.a.init(e.renderTarget);break;case"apartment-prices":bn.a.init(e.renderTarget);break;case"around-cards":o.a.publish(Je.b,{data:e.renderTarget});break;case"flats-prices":Tn.a.init(e.renderTarget),x.a.init(e.renderTarget);break;case"infrastructure":wn.default.init(e.renderTarget),At.init(e.renderTarget),$e.init(e.renderTarget);break;case"lazyload":window.lazyloadInstance&&window.lazyloadInstance.update();break;case"lg":Qe.a.init(e.renderTarget);break;case"object-description":Cn.a.init(e.renderTarget);break;case"photogallery":ke.init(e.renderTarget);break;case"rating":An.a.init(e.renderTarget);break;case"reviews":xn.a.init({container:e.renderTarget,triggersSelector:"[data-target]"}),Sn.default.init(e.renderTarget),it.a.init(e.renderTarget);break;case"search-cards":o.a.publish(Je.b),o.a.publish(Je.u),o.a.publish(Je.t),o.a.publish(Je.m);break;case"select":K.init(e.renderTarget);break;case"similar-objects":En.a.init(e.renderTarget),Ln.a.init(e.renderTarget);break;case"timeline":_n.a.init(e.renderTarget);break;case"tooltip":Y.a.init(e.renderTarget);break;case"video":yn.init(e.renderTarget)}})}},{key:"openSection",value:function(){if(!this.isSectionLoaded)return this.request();this.isSectionOpened||(this.renderTarget.style.height="auto",this.renderTarget.classList.add("is-open"),this.element.classList.add("is-active"),this.isSectionOpened=!0)}},{key:"closeSection",value:function(){this.isSectionOpened&&(this.renderTarget.classList.remove("is-open"),this.element.classList.remove("is-active"),this.isSectionOpened=!1)}},{key:"toggleSection",value:function(){this.isSectionOpened?this.closeSection():this.openSection()}},{key:"handleMediaChange",value:function(e){this.deviceType=e.matches?"mobile":"desktop"}}])&&jn(t.prototype,n),i&&jn(t,i),e}();function Mn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var qn=function(){function e(t){var n,i,r,a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=function(){return a.element.classList.add("spinner"),a.element.classList.add("white"),a.element.classList.add("visually-hidden-childs"),a.request()},(i="openSection")in(n=this)?Object.defineProperty(n,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[i]=r,this.element=t,this.url=this.element.getAttribute("data-url"),this.renderTarget=document.querySelector(this.element.getAttribute("data-section-target")),this.bindEvents()}var t,i,r;return t=e,(i=[{key:"bindEvents",value:function(){this.element.addEventListener("click",this.openSection)}},{key:"request",value:function(){var e=this;return Be.a.get(this.url).then(function(t){var n=t.data;n&&e.onRequest(n)})}},{key:"onRequest",value:function(e){var t=this,i=e.html;this.renderTarget.innerHTML=i;var r=document.querySelector(".js-search-filter");r&&Promise.all([n.e(0),n.e(1),n.e(11)]).then(n.bind(null,300)).then(function(e){e&&(new(0,e.default)(r).openFilter(),t.element.classList.remove("spinner"),t.element.classList.remove("white"),t.element.classList.remove("visually-hidden-childs"))}),this.element.removeEventListener("click",this.openSection)}}])&&Mn(t.prototype,i),r&&Mn(t,r),e}();function In(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Pn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Hn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"init",value:function(){In(document.querySelectorAll(".js-dynamic-section")).forEach(function(e){switch(e.getAttribute("data-type")){case"search-filter":return new qn(e);default:return new On(e)}})}}],(n=null)&&Pn(t.prototype,n),i&&Pn(t,i),e}();function Bn(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Nn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Rn(e,t,n){return t&&Nn(e.prototype,t),n&&Nn(e,n),e}var Dn=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,this.metroTabLinks=Bn(t.querySelectorAll(".metro_tab__link")),this.metroLinks=Bn(t.querySelectorAll(".metro_list__item")),this.bindEvents()}return Rn(e,null,[{key:"init",value:function(){var t=document.querySelector(".section__metro");return t?new e(t):null}}]),Rn(e,[{key:"bindEvents",value:function(){var e=this;this.metroTabLinks.forEach(function(t){t.addEventListener("click",function(n){n.preventDefault(),t.classList.toggle("active");var i=t.getAttribute("data-metro");e.metroLinks.forEach(function(e){e.getAttribute("data-metro")===i&&e.classList.toggle("active")})})})}}]),e}(),zn=n(102);function Vn(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}d.a;window.ymapsObserver=new zn.a;var Fn=location.hostname.split(".")[0];window.COOKIE_PREFIX="novostroev"===Fn?"":"".concat(Fn,"-"),window.VECTOR_IMAGES_LINK="localhost"===window.location.hostname?"/static/img/minified-svg/":"/build-redesign/static/img/minified-svg/";var Wn=function(){(new O.a).setCookie("current-page",window.location.pathname,{path:"/",domain:window.location.hostname}),[je,h.a,p,b,K,C,A,E.a,L.a,x.a,T.a,P,N,j.a,V,G,Y.a,nn].concat(Vn(Ae),[Ie,Pe.a,Fe,Ue,$e,Qe.a,nt,it.a,at],Vn(ht),[pt,bt,wt.a,kt.a,At,It,Et.a,Dt,Ot,Zt,Kt,dn,on,yn,gn.a,Hn,Dn]).forEach(function(e){return e.init()})},Gn=function(e,t){if(e)return new(0,e.default)(t)},Zn=function(){var e=document.querySelector(".main-filter-n-2");e&&Promise.all([n.e(12),n.e(0),n.e(5)]).then(n.bind(null,294)).then(function(t){return Gn(t,e)});var t=document.querySelector(".js-search-filter:not([data-dynamic])");t&&Promise.all([n.e(0),n.e(1),n.e(11)]).then(n.bind(null,300)).then(function(e){return Gn(e,t)});var i=document.querySelector(".map-filter-n-2[data-filter-map]");i&&Promise.all([n.e(14),n.e(0),n.e(1),n.e(9)]).then(n.bind(null,299)).then(function(e){return Gn(e,i)});var r=document.querySelector(".js-item-card");r&&n.e(6).then(n.bind(null,298)).then(function(e){return Gn(e,r)});var a=document.querySelector(".landing-new-building");a&&n.e(7).then(n.bind(null,301)).then(function(e){return Gn(e,a)});var o=document.querySelector(".reviews");o&&Promise.resolve().then(n.bind(null,201)).then(function(e){return Gn(e,o)});var s=document.querySelector(".js-advertise");s&&n.e(2).then(n.bind(null,302)).then(function(e){return Gn(e,s)});var l=document.querySelector(".infrastructure-n-2");l&&Promise.resolve().then(n.bind(null,202)).then(function(e){return Gn(e,l)});var c=document.querySelector("[data-content-search]");c&&n.e(4).then(n.bind(null,297)).then(function(e){return Gn(e,c)});var u=document.querySelector(".js-book-reader");u&&n.e(3).then(n.bind(null,295)).then(function(e){return Gn(e,u)});var d=document.querySelector(".js-review-modal");d&&n.e(10).then(n.bind(null,296)).then(function(e){return Gn(e,d)})};document.addEventListener("DOMContentLoaded",function(){return Wn()}),o.a.subscribe(Je.a,function(){Wn(),Zn()}),Zn()}]);