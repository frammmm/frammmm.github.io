(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{294:function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(14),createHTML=__webpack_require__(145);$({target:"String",proto:!0,forced:__webpack_require__(146)("fontsize")},{fontsize:function(size){return createHTML(this,"font","size",size)}})},296:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"default",function(){return BooksReader});__webpack_require__(294);var moveto__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(34),moveto__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(moveto__WEBPACK_IMPORTED_MODULE_1__),_content_search_content_search_helpers__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(25),_helpers_throttle__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(103);function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var DEFAULT_FONT_SIZE=15,BooksReader=function(){function BooksReader(element){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,BooksReader),this.element=element,this.moveTo=new moveto__WEBPACK_IMPORTED_MODULE_1___default.a,this.bookContent=document.querySelector(".js-book-content"),this.bookRender=document.querySelector(".js-book-render"),this.bookControls=document.querySelector(".js-book-controls"),this.bookSidebar=document.querySelector(".js-book-sidebar"),this.mobileOverlay=document.querySelector(".js-mobile-overlay"),this.mobileSidebarButton=document.querySelector(".js-book-content-toggle"),this.mobileSidebarCloseButton=document.querySelector(".js-book-content-close"),this.mobileFontDropdown=document.querySelector(".js-book-font-dropdown"),this.mobileFontDropdownButton=document.querySelector(".js-book-font-toggle"),this.mobileFontDropdownForm=document.querySelector(".js-book-font-form"),this.mobilePagination=document.querySelector(".js-mobile-pagination"),this.mobilePaginationParentHeight=Math.max(document.documentElement.clientHeight,window.innerHeight||0),this.bookControls&&(this.currentFontSize=DEFAULT_FONT_SIZE,this.bookFontIncrease=this.bookControls.querySelector(".js-font-increase"),this.bookFontDecrease=this.bookControls.querySelector(".js-font-decrease"),this.bookFontReset=this.bookControls.querySelector(".js-font-reset")),this.bindEvents()}var Constructor,protoProps,staticProps;return Constructor=BooksReader,(protoProps=[{key:"bindFontControlsEvents",value:function(){var _this=this,setFontSize=function(fontSize){_this.bookRender.style.fontSize=fontSize+"px"};this.bookControls&&(this.bookFontIncrease.addEventListener("click",function(){setFontSize(++_this.currentFontSize)}),this.bookFontDecrease.addEventListener("click",function(){setFontSize(--_this.currentFontSize)}),this.bookFontReset.addEventListener("click",function(){setFontSize(DEFAULT_FONT_SIZE),_this.currentFontSize=DEFAULT_FONT_SIZE})),this.mobileFontDropdownButton&&(this.mobileFontDropdownButton.addEventListener("click",function(){_this.mobileFontDropdown.classList.toggle("is-active"),_this.mobileFontDropdownButton.classList.toggle("is-active")}),window.addEventListener("click",function(event){_this.mobileFontDropdown.contains(event.target)||_this.mobileFontDropdownButton.contains(event.target)||(_this.mobileFontDropdown.classList.remove("is-active"),_this.mobileFontDropdownButton.classList.remove("is-active"))})),this.mobileFontDropdownForm&&(this.mobileFontDropdownForm.addEventListener("change",function(e){e.preventDefault();var fontsize=Object(_content_search_content_search_helpers__WEBPACK_IMPORTED_MODULE_2__.b)(_this.mobileFontDropdownForm,{hash:!0}).fontsize;fontsize&&(setFontSize(+fontsize),_this.currentFontSize=+fontsize)}),this.mobileFontDropdownForm.addEventListener("submit",function(e){e.preventDefault()}))}},{key:"bindSidebarEvents",value:function(){var _this2=this;this.bookSidebar&&(this.mobileOverlay&&this.mobileOverlay.addEventListener("click",function(){document.body.classList.remove("no-scroll_sm"),_this2.bookSidebar.classList.remove("is-open"),_this2.mobileSidebarButton.classList.remove("is-active"),_this2.mobileOverlay.classList.remove("is-active")}),this.mobileSidebarButton&&this.mobileSidebarButton.addEventListener("click",function(){document.body.classList.toggle("no-scroll_sm"),_this2.bookSidebar.classList.toggle("is-open"),_this2.mobileSidebarButton.classList.toggle("is-active"),_this2.mobileOverlay.classList.toggle("is-active")}),this.mobileSidebarCloseButton&&this.mobileSidebarCloseButton.addEventListener("click",function(){document.body.classList.remove("no-scroll_sm"),_this2.bookSidebar.classList.remove("is-open"),_this2.mobileSidebarButton.classList.remove("is-active"),_this2.mobileOverlay.classList.remove("is-active")}))}},{key:"bindPaginationEvents",value:function(){var _this3=this;this.mobilePagination&&(window.addEventListener("scroll",Object(_helpers_throttle__WEBPACK_IMPORTED_MODULE_3__.a)(function(e){_this3.handleScroll()},100)),window.addEventListener("resize",Object(_helpers_throttle__WEBPACK_IMPORTED_MODULE_3__.a)(function(e){_this3.mobilePaginationParentHeight=Math.max(document.documentElement.clientHeight,window.innerHeight||0)},100)))}},{key:"handleScroll",value:function(){var paginationParentOffset=this.mobilePagination.parentElement.getBoundingClientRect().bottom;this.isMobilePaginationStatic&&(paginationParentOffset-=this.mobilePagination.clientHeight),paginationParentOffset-this.mobilePaginationParentHeight<0?(this.mobilePagination.style.position="static",this.isMobilePaginationStatic=!0):(this.mobilePagination.style.position="",this.isMobilePaginationStatic=!1)}},{key:"bindEvents",value:function(){this.bindFontControlsEvents(),this.bindSidebarEvents(),this.bindPaginationEvents()}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),BooksReader}()}}]);